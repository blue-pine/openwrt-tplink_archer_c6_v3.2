<!DOCTYPE html
	PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>Quick&nbsp;Setup</title>
	<style type="text/css">
		div.top-bg div.top-bg-l {
			background-color: #ffffff;
		}

		div.radio-content-wrap.inline-block {
			display: block;
			text-indent: 2.7em;
		}
	</style>
</head>

<body>

	<div id="empty_confirm_msg" class="hidden warning">
		<h4 class="title">
			<span class="icon"></span>
			<span class="text" id="empty_confirm_msg_text"></span>
		</h4>
	</div>

	<!-- 端口改变重启提示框 -->
	<div class="warning hidden" id="linkAggChanged">
		<div id="link_agg_reboot_note">
			<h4 class="title">
				<span class="icon"></span>
				<span class="text msg-content-container"></span>
			</h4>
		</div>

		<div id="link_agg_loading_msg" class="wan-agg-reboot-loading-msg hidden">
			<p id="link_agg_reboot_progressbar_text" class="reboot-progressbar-text"></p>
			<input id="link_agg_reboot_loading_progressbar" />
		</div>
	</div>

	<div id="dslite-warning-msg" class="hidden warning">
		<h4 class="title">
			<span class="icon"></span>
			<span class="text" id="dslite-warning-msg-text"></span>
		</h4>
	</div>

	<div id="v6plus-warning-msg"  class="hidden warning">
		<h4 class="title">
			<span class="icon"></span>
			<span class="text" id="v6plus-warning-msg-text"></span>
		</h4>
	</div>

	<div class="content-container quicksetup">
		<div id="quicksetup-form">

			<div id="quick-setup-wizard">
				<div id="quicksetup-language-setting">
					<p class="note" id="region-time-zone-tips"></p>
					<!-- <input id="combo-language" name="combo-language" /> -->
					<!-- <input type="hidden" name="wireless_form" value="region&wireless_2g&wireless_5g" /> -->
					<input id="combo-region" name="region_country" class="hidden" />
					<!-- <input type="hidden" name="time_form" value="settings" /> -->
					<input id="combo-time-zone" name="time_timezone" />
					<!-- <button id="btn-get-gmt" name="btn-get-gmt"></button> -->
				</div>

				<div id="quicksetup-internet-connection-type">

					<div id="auto-detect-container">
						<p class="note hidden" id="auto-detect-note-container">
							<span class="text" id="quicksetup-wan-connection-type-note"></span>
						</p>
						<button type="button" id="btn-auto-detect"></button>
						<div class="auto-detect-progressbar-wrap">
							<span id="auto_detect_result" class="hidden scan-result"></span>
							<input id="progressbar-internet-connection-type-auto-detect" />
						</div>
					</div>
					<p class="note" id="quicksetup-connect-type-note">
					</p>
					<input id="rdo-internet-connection-type" name="network_conntype" />
					<p id="dynamic"></p>
					<p id="static"></p>
					<p id="pppoe"></p>
					<p id="l2tp"></p>
					<p id="pptp"></p>
					<p id="dslite"></p>
					<p id="v6plus"></p>
					<div id="adv_btn" class="advanced-block part-seperate" type="button">
						<span class="advanced-icon"></span>
						<span class="advanced-text"></span>
					</div>
					<div id="basic_btn" class="basic-block part-seperate hidden" type="button">
						<span class="basic-icon"></span>
						<span class="basic-text"></span>
					</div>
					<div class="advanced-container hidden">
						<p class="note">
							<span class="title note-title"></span>
							<span class="text internet-note-text"></span>
						</p>
						<p id="note_cnt" class="note hidden">
							<span class="note-title" id="noteTitle"></span>
							<span class="text" id="note"></span>
						</p>
						<input id="isp-special-mode" name="isp_special_mode" />
						<div id="vlan_cnt" class="part-seperate">
							<div id="internet_vlan_cnt">
								<input type="text" id="isp_special_internet_vid" name="isp_special_internet_vid" />
								<input type="text" id="isp_special_internet_vprio" name="isp_special_internet_vprio" />
								<input type="text" id="isp_special_internet_tag" name="isp_special_internet_tag" />
							</div>
							<div id="ip_vlan_cnt">
								<input type="text" id="isp_special_ipphone_vid" name="isp_special_ipphone_vid" />
								<input type="text" id="isp_special_ipphone_vprio" name="isp_special_ipphone_vprio" />
							</div>
							<div id="iptv_vlan_cnt">
								<input type="text" id="isp_special_iptv_vid" name="isp_special_iptv_vid" />
								<input type="text" id="isp_special_iptv_vprio" name="isp_special_iptv_vprio" />
							</div>
							<div id="iptv_multi_vlan_cnt">
								<input type="text" id="isp_special_mciptv_vid" name="isp_special_mciptv_vid" />
								<input type="text" id="isp_special_mciptv_vprio" name="isp_special_mciptv_vprio" />
								<input type="text" id="isp_special_mciptv_enable" name="isp_special_mciptv_enable" />
							</div>
						</div>

						<div id="lan_cnt" class="hidden part-seperate">
							<!-- <input type="text" id="isp_special_lan1" name="isp_special_lan1" />
                    <input type="text" id="isp_special_lan2" name="isp_special_lan2" />
                    <input type="text" id="isp_special_lan3" name="isp_special_lan3" />
                    <input type="text" id="isp_special_lan4" name="isp_special_lan4" /> -->
						</div>
						<input id="isp-special-enable" name="isp_special_enable" class="hidden" />
					</div>
				</div>


				<!-- internet connection type start -->
				<div id="quicksetup-internet-connection-type-detail">
					<div id="quicksetup-dynamic" class="quicksetup-internet-connection-type-detail">
						<p class="note" id="p-quicksetup-mac-clone-info"></p>
						<input id="rdo-mac-clone" name="network_dhcp_mac_clone_type" />
						<p class="note">
							<span class="title note-title"></span>
							<span class="text" id="span-quicksetup-mac-clone-note"></span>
						</p>
					</div>

					<div id="quicksetup-static" class="quicksetup-internet-connection-type-detail">
						<p class="note" id="p-quicksetup-static-info"></p>
						<input id="txt-static-ip-addr" name="network_static_ipaddr" />
						<input id="txt-static-subnet-mask" name="network_static_netmask" />
						<input id="txt-static-default-gateway" name="network_static_gateway" />
						<input id="txt-static-primary-dns" name="network_static_pri_dns" />
						<input id="txt-static-secondary-dns" name="network_static_snd_dns" />
					</div>

					<div id="quicksetup-pppoe" class="quicksetup-internet-connection-type-detail">
						<p class="note" id="p-quicksetup-pppoe-info"></p>
						<input id="txt-pppoe-username" name="network_pppoe_username" />
						<input id="txt-pppoe-password" name="network_pppoe_password" />
					</div>

					<div id="quicksetup-l2tp" class="quicksetup-internet-connection-type-detail">
						<p class="note" id="p-quicksetup-l2tp-info"></p>
						<input id="txt-l2tp-username" name="network_l2tp_username" />
						<input id="txt-l2tp-password" name="network_l2tp_password" />
						<input id="rdo-l2tp-connect-type" name="network_l2tp_snd_conn" />
						<div id="l2tp-dynamic-ip-fieldset" class="l2tp-fieldset">
							<input id="txt-l2tp-server-ip-address-name-dynamic" name="network_l2tp_dyn_server" />
						</div>
						<div id="l2tp-static-ip-fieldset" class="l2tp-fieldset">
							<input id="txt-l2tp-server-ip-address-name-static" name="network_l2tp_static_server" />
							<input id="txt-l2tp-ip-addr-static" name="network_l2tp_static_ip" />
							<input id="txt-l2tp-subnet-mask-static" name="network_l2tp_static_netmask" />
							<input id="txt-l2tp-default-gateway-static" name="network_l2tp_static_gateway" />
							<input id="txt-l2tp-primary-dns-static" name="network_l2tp_static_pridns" />
							<input id="txt-l2tp-secondary-dns-static" name="network_l2tp_static_snddns" />
						</div>
					</div>

					<div id="quicksetup-pptp" class="quicksetup-internet-connection-type-detail">
						<p class="note" id="p-quicksetup-pptp-info"></p>
						<input id="txt-pptp-username" name="network_pptp_username" />
						<input id="txt-pptp-password" name="network_pptp_password" />
						<input id="rdo-pptp-connect-type" name="network_pptp_snd_conn" />
						<div id="pptp-dynamic-ip-fieldset" class="pptp-fieldset">
							<input id="txt-pptp-server-ip-address-name-dynamic" name="network_pptp_dyn_server" />
						</div>
						<div id="pptp-static-ip-fieldset" class="pptp-fieldset">
							<input id="txt-pptp-server-ip-address-name-static" name="network_pptp_static_server" />
							<input id="txt-pptp-ip-addr-static" name="network_pptp_static_ip" />
							<input id="txt-pptp-subnet-mask-static" name="network_pptp_static_netmask" />
							<input id="txt-pptp-default-gateway-static" name="network_pptp_static_gateway" />
							<input id="txt-pptp-primary-dns-static" name="network_pptp_static_pridns" />
							<input id="txt-pptp-secondary-dns-static" name="network_pptp_static_snddns" />
						</div>
					</div>
					<div id="quicksetup-dslite" class="quicksetup-internet-connection-type-detail">
						<p class="note" id="p-quicksetup-dslite-info"></p>
						<div id="dslite_dynamic" class="part-seperate">
							<input id="dslite_dynamic_status" name="network_dslite_dynamic_mode" />

						</div>
						<input id="txt-dslite-name" name="network_dslite_AFTR_name" />
					</div>
				</div>
				<!-- internet connection type end -->

				<div id="quicksetup-wireless-settings">
					<p id="wireless_note" class="note"></p>
					<div id="quicksetup-smart-conn">
						<input id="chk-enable-smart-conn" name="smart_connect_smart_enable" type="text" class="hidden" disabled />
						<p class="text" id="smart-conn-note"></p>
					</div>
					<div id="quicksetup-wireless-settings-2g" class="part-separate">
						<input id="chk-enable-wireless-radio-2g" name="wireless_2g_enable" />
						<input id="txt-wireless-name-ssid-2g" name="wireless_2g_ssid" />
						<input type="checkbox" id="chk-wireless-enable-ssid-2g" name="wireless_2g_hidden" />
						<input id="txt-wireless-password-2g" name="wireless_2g_encry_password" />

						<input type="hidden" name="wireless_2g_wpa_key" id="wpa_key_2g" disabled="disabled" />
						<input type="hidden" name="wireless_2g_psk_key" id="psk_key_2g" disabled="disabled" />

						<input type="hidden" class="wep_key_2g" id="wep_key1_2g" name="wireless_2g_wep_key1" disabled="disabled" />
						<input type="hidden" class="wep_key_2g" id="wep_key2_2g" name="wireless_2g_wep_key2" disabled="disabled" />
						<input type="hidden" class="wep_key_2g" id="wep_key3_2g" name="wireless_2g_wep_key3" disabled="disabled" />
						<input type="hidden" class="wep_key_2g" id="wep_key4_2g" name="wireless_2g_wep_key4" disabled="disabled" />

						<input type="hidden" id="wireless_2g_encryption" name="wireless_2g_encryption" />
						<input type="hidden" name="wireless_2g_psk_version" id="wireless_2g_psk_version" disabled="disabled" />
						<input type="hidden" name="wireless_2g_psk_cipher" id="wireless_2g_psk_cipher" disabled="disabled" />


						<input type="hidden" id="wireless_2g_disabled_all" name="wireless_2g_disabled_all" />
					</div>
					<div id="quicksetup-wireless-settings-5g" class="part-separate">
						<input id="chk-enable-wireless-radio-5g" name="wireless_5g_enable" />
						<input id="txt-wireless-name-ssid-5g" name="wireless_5g_ssid" />
						<input type="checkbox" id="chk-wireless-enable-ssid-5g" name="wireless_5g_hidden" />
						<input id="txt-wireless-password-5g" name="wireless_5g_encry_password" />

						<input type="hidden" name="wireless_5g_wpa_key" id="wpa_key_5g" disabled="disabled" />
						<input type="hidden" name="wireless_5g_psk_key" id="psk_key_5g" disabled="disabled" />

						<input type="hidden" class="wep_key_5g" id="wep_key1_5g" name="wireless_5g_wep_key1" disabled="disabled" />
						<input type="hidden" class="wep_key_5g" id="wep_key2_5g" name="wireless_5g_wep_key2" disabled="disabled" />
						<input type="hidden" class="wep_key_5g" id="wep_key3_5g" name="wireless_5g_wep_key3" disabled="disabled" />
						<input type="hidden" class="wep_key_5g" id="wep_key4_5g" name="wireless_5g_wep_key4" disabled="disabled" />

						<input type="hidden" id="wireless_5g_encryption" name="wireless_5g_encryption" />
						<input type="hidden" name="wireless_5g_psk_version" id="wireless_5g_psk_version" disabled="disabled" />
						<input type="hidden" name="wireless_5g_psk_cipher" id="wireless_5g_psk_cipher" disabled="disabled" />
						<input type="hidden" id="wireless_5g_region_enable" name="wireless_5g_region_enable">
						<input type="hidden" id="wireless_5g_disabled_all" name="wireless_5g_disabled_all" />
					</div>
					<div id="quicksetup-wireless-settings-52g" class="part-separate">
						<input id="chk-enable-wireless-radio-52g" name="wireless_5g_2_enable" disabled />
						<input id="txt-wireless-name-ssid-52g" name="wireless_5g_2_ssid" />
						<input type="checkbox" id="chk-wireless-enable-ssid-52g" name="wireless_5g_2_hidden" />
						<input id="txt-wireless-password-52g" name="wireless_5g_2_encry_password" />

						<input type="hidden" name="wireless_5g_2_wpa_key" id="wpa_key_52g" disabled="disabled" />
						<input type="hidden" name="wireless_5g_2_psk_key" id="psk_key_52g" disabled="disabled" />

						<input type="hidden" class="wep_key_5g" id="wep_key1_52g" name="wireless_5g_2_wep_key1"
							disabled="disabled" />
						<input type="hidden" class="wep_key_5g" id="wep_key2_52g" name="wireless_5g_2_wep_key2"
							disabled="disabled" />
						<input type="hidden" class="wep_key_5g" id="wep_key3_52g" name="wireless_5g_2_wep_key3"
							disabled="disabled" />
						<input type="hidden" class="wep_key_5g" id="wep_key4_52g" name="wireless_5g_2_wep_key4"
							disabled="disabled" />

						<input type="hidden" id="wireless_52g_encryption" name="wireless_5g_2_encryption" />
						<input type="hidden" name="wireless_5g_2_psk_version" id="wireless_52g_psk_version" disabled="disabled" />
						<input type="hidden" name="wireless_5g_2_psk_cipher" id="wireless_52g_psk_cipher" disabled="disabled" />
						<input type="hidden" id="wireless_52g_region_enable" name="wireless_5g_2_region_enable">
						<input type="hidden" id="wireless_52g_disabled_all" name="wireless_5g_2_disabled_all" />
					</div>
					<p id="wireless-hardware-off-note" class="note hidden">
						<span class="title note-title"></span>
						<span id="wireless-hardware-off-note-content" class="text"></span>
					</p>

					<div id="wireless-confirm-notice" class="wireless-confirm-msg warning">
						<h4 class="title">
							<span class="icon"></span>
							<span class="text text1" id="encryption_2g_notice"></span>
							<span class="text text2" id="encryption_5g_notice"></span>
							<div id="smart_enable_off_notice">
								<span class="text" id="encryption_2g_notice"></span>
								<span class="text" id="encryption_5g_notice"></span>
								<span class="text" id="encryption_52g_notice"></span>
							</div>
							<div id="smart_enable_on_notice">
								<span class="text" id="encryption_notice"></span>
							</div>
							<span class="text text3" id="encryption_sure"></span>
						</h4>
						<!-- <p class="note" id="encryption_2g_notice"></p>
                    <p class="note" id="encryption_5g_notice"></p> -->
					</div>
				</div>

				<div id="quicksetup-summary">
					<div id="quicksetup-summary-0">
						<div>
							<!-- <input id="display-region-summary" /> -->
							<input id="display-time-zone-summary" />
							<input id="display-internet-connection-type-summary" />
							<input id="isp-connection-type-summary" />
						</div>
						<div id="smart-connect-summary-container" class="hidden">
							<input id="smart-connect-summary" type="text" />
						</div>
						<div id="display-wireless-2g-container-summary" class="display-wireless-container-summary">
							<h4 class="display-wireless-title" id="display-title-wireless-2g-summary"></h4>
							<input id="display-wireless-enable-2g-summary" />
							<input id="display-wireless-name-ssid-2g-summary" />
							<input id="display-wireless-password-2g-summary" />
						</div>
						<div id="display-wireless-5g-container-summary" class="display-wireless-container-summary">
							<h4 class="display-wireless-title" id="display-title-wireless-5g-summary"></h4>
							<input id="display-wireless-enable-5g-summary" />
							<input id="display-wireless-name-ssid-5g-summary" />
							<input id="display-wireless-password-5g-summary" />
						</div>
						<div id="display-wireless-52g-container-summary" class="display-wireless-container-summary">
							<h4 class="display-wireless-title" id="display-title-wireless-52g-summary"></h4>
							<input id="display-wireless-enable-52g-summary" />
							<p class="status-textarea-read">
								<label id="display-wireless-name-ssid-52g-summary_label" class="l"></label>
								<span class="l" id="display-wireless-name-ssid-52g-summary"></span>
							</p>
							<p class="status-textarea-read">
								<label id="display-wireless-password-52g-summary_label" class="l"></label>
								<span class="l" id="display-wireless-password-52g-summary"></span>
							</p>
						</div>
						<p class="note hidden" id="note_title_all">
							<span class="title note-title"></span>
							<span class="text" id="note_title_all_text"></span>
						</p>
						<div class="progressbar-container">
							<input id="display-quicksetup-progressbar-summary" />
						</div>
					</div>

					<div id="quicksetup-summary-1">
						<p id="p-reconnect-network-note-0" class="emphasize note first-line"></p>
						<div>
							<!-- <p id="p-reconnect-network-info" class="note"></p> -->
							<div>
								<input id="reconnect-network-wireless-ssid-2g" />
								<input id="reconnect-network-wireless-password-2g" />
							</div>
							<div>
								<input id="reconnect-network-wireless-ssid-5g" />
								<input id="reconnect-network-wireless-password-5g" />
							</div>
							<div id="quicksetup-summary52g-ssid">
								<p class="status-textarea-read">
									<label id="reconnect-network-wireless-ssid-52g_label" class="l"></label>
									<span class="l" id="reconnect-network-wireless-ssid-52g"></span>
								</p>
								<p class="status-textarea-read">
									<label id="reconnect-network-wireless-password-52g_label" class="l"></label>
									<span class="l" id="reconnect-network-wireless-password-52g"></span>
								</p>
							</div>
						</div>
						<!-- <p id="p-reconnect-network-note-1" class="note"></p> -->
						<div class="status-reconnect-button-container">
							<input id="status-reconnect-network" />
							<button type="button" id="btn-reconnect-network"></button>
						</div>
					</div>

					<div id="quicksetup-summary-2">
						<h3 class="title" id="h3-quicksetup-summary-2-sorry"></h3>
						<p id="p-quicksetup-summary-2-info" class="note"></p>
						<div class="status-reconnect-button-container">
							<button type="button" id="btn-quicksetup-summary-2-ok"></button>
						</div>
					</div>
				</div>

				<div id="quicksetup-setup-complete">				
					<h3 class="title" id="h3-quicksetup-congratulations"></h3>
					<p class="note" id="p-quicksetup-congratulations-info-0"></p>
					<p class="note" id="p-quicksetup-congratulations-info-1"></p>
					<div>
						<a class="test-internet link" href="javascript:void(0);" id="a-quicksetup-congratulations-click-here">
							<span class="icon"></span>
							<span class="text" id="span-quicksetup-congratulations-click-here"></span>
						</a>
						<!-- <input id="status-internet-check"/> -->
					</div>
					<div id="test-internet-success-container">
						<h4 class="quicksetup-title title">
							<span class="icon"></span>
							<span class="text" id="test-internet-success-title"></span>
						</h4>
						<p class="note" id="test-internet-success-info"></p>
					</div>

					<div id="test-internet-failed-container">
						<h4 class="quicksetup-title title">
							<span class="icon"></span>
							<span class="text" id="test-internet-failed-title"></span>
						</h4>
						<p class="note" id="test-internet-failed-info-0"></p>
						<p class="note" id="test-internet-failed-info-1"></p>
					</div>
				</div>
			</div>
		</div>

	</div><!-- content-container -->

	<script type="text/javascript">
		//<![CDATA[
		try {
			$;
		} catch (e) {
			location.href = "/";
		};

		$(document).ready(function (e) {
			var URL_COUNTRY = $.su.url("/locale?form=country");
			var currentCountry = "";
			var countryProxy = new $.su.Proxy({
				url: URL_COUNTRY,
				async: false
			});
			countryProxy.read({}, function (data) {
				currentCountry = data.country;
			});

			$.su.menu = null;
			delete $.su.menu;
			$.su.menu = {};
			$.su.module = $.su.module || {};
			var tribandModule = $.su.module.triband.quickSetup();
			var smartModule = $.su.module.smart.quickSetup(tribandModule);
			var portModule = $.su.module.port.quickSetup();
			var linkAggModule = $.su.module.linkAgg.quickSetup();
			linkAggModule.init();
			rebuidProfile = linkAggModule.extendRebuidProfile(rebuidProfile);


			var URL_QUICKSETUP = $.su.url("/admin/quick_setup?form=quick_setup");
			var URL_REGION = $.su.url("/admin/region?form=region");
			var URL_TIMEZONE = $.su.url("/admin/time?form=timezone");

			var URL_QUICKSETUP_CHECK_ROUTER = $.su.url("/admin/quick_setup?form=check_router");
			var URL_QUICKSETUP_CHECK_INTERNET = $.su.url("/admin/quick_setup?form=check_internet");
			var URL_QUICKSETUP_DETECT_INTERNET_CONNECTION_TYPE = $.su.url("/admin/network?form=wan_autodetect");
			var URL_LAN = $.su.url('/admin/network?form=status_ipv4');
			//var URL_CLOUD_BIND_STATUS = $.su.url("/admin/cloud_account?form=cloud_bind_status");
			//var URL_CLOUD_LOGIN = $.su.url("/admin/cloud_account?form=user_login");

			var checkRouterProxy = new $.su.Proxy({
				url: URL_QUICKSETUP_CHECK_ROUTER,
				autoLoad: false,
				preventErrorDefault: true
			});
			var checkInternetProxy = new $.su.Proxy({
				url: URL_QUICKSETUP_CHECK_INTERNET,
				autoLoad: false,
				preventErrorDefault: true
			});
			var detectInternetConnectionProxy = new $.su.Proxy({
				url: URL_QUICKSETUP_DETECT_INTERNET_CONNECTION_TYPE,
				autoLoad: false,
				preventErrorDefault: true
			});

			//var cloudBindStatusProxy = new $.su.Proxy({
				//url: URL_CLOUD_BIND_STATUS
			//});
			//var cloudLoginBindProxy = new $.su.Proxy({
				//url: URL_CLOUD_LOGIN
			//});

			var wireType = "wired";
			var isBindCloud = false;

			var checkRouterTime = 0;
			var checkInternetTime = 0;
			var detectInternetConnectionTime = 0;

			var wirelessSettings = {
				enable2g: "",
				ssid2g: "",
				pwd2g: "",
				hide2g: "",
				wireless_2g_disabled: "",

				enable5g: "",
				ssid5g: "",
				pwd5g: "",
				hide5g: "",
				wireless_5g_disabled: "",

				changeFlag: false
			};

			//iptv setting
			var cur_mode = "";
			var cur_lan1 = "";
			var cur_lan2 = "";
			var cur_lan3 = "";
			var cur_lan4 = "";
			var cur_internet_vlanid = "";
			var cur_internet_vlanpri = "";
			var cur_internet_vlancheck = "";
			var cur_ipphone_vlanid = "";
			var cur_ipphone_vlanpri = "";
			var cur_iptv_vlanid = "";
			var cur_iptv_vlanpri = "";
			var cur_iptv_multi_vlanid = "";
			var cur_iptv_multi_vlanpri = "";
			var cur_iptv_multi_vlancheck = "";

			tribandModule.extendObj(wirelessSettings);

			var form2g5g_data = {};
			var firstLoad = true;
			
			var iptv_change_flag = false;
			
			// --------dslite dynamic mode support settings  starts----------
			var is_support_dynamic_mode = false;
			var dsliteDynamicCombo = $("input#dslite_dynamic_status").combobox({
						fieldLabel: $.su.CHAR.INTERNET.AFTR_NAME,
						labelCls: 'l',
						items: [

						]
					});
					var dsliteDynamicItems = [
						{ value: "1", name: $.su.CHAR.INTERNET.AUTO },
						{ value: "0", name: $.su.CHAR.INTERNET.MANUAL }
					];
					dsliteDynamicCombo.combobox("loadData", dsliteDynamicItems);
			var respondDynamicModeValueChange = function(){
				var currentMode = dsliteDynamicCombo.combobox('getValue')[0];
						if (currentMode === "1") {
							$("#txt-dslite-name").textbox('hide');
							$("#txt-dslite-name").textbox('setAttribute', "allowBlank", true);

						} else {

							$("#txt-dslite-name").textbox('setAttribute', "allowBlank", false);
							$("#txt-dslite-name").textbox('show');
							var aftrName = $("#txt-dslite-name").textbox('getValue');
							!$.trim(aftrName) && $("#txt-dslite-name").textbox('setValue', 'gw.transix.jp');

						}
						setButtonStatus.step3();
			};
			dsliteDynamicCombo.combobox('getContainer').delegate('div.combobox-list-wrap label', 'click', respondDynamicModeValueChange);
			var respondDynamicModeSupport = function (isSupport, dynamicMode) {
				isSupport = isSupport.toString() === "1";
				is_support_dynamic_mode = isSupport;
				if (isSupport) {
					dsliteDynamicCombo.combobox("setValue", dynamicMode);
					respondDynamicModeValueChange();
					
				} else {
					$("div#dslite_dynamic").remove();
					$("input#txt-dslite-name").textbox('setLabel', $.su.CHAR.INTERNET.AFTR_NAME + ":");
				}
			}
			// --------dslite dynamic mode support settings  ends----------

			var emptyConfirmMsg = $("div#empty_confirm_msg").msg({
				type: "confirm",
				closeBtn: false,
				cls: "l",
				okHandler: function (e) {
					quickSetupWizard.wizard("goTo", "wireless-settings");
				},
				noHandler: function () {
					emptyConfirmMsg.msg('close');
				}
			});

			var dsliteWarningMsg = $("div#dslite-warning-msg").msg({
				type: "confirm",
				closeBtn: false,
				cls: "l",
				okHandler: function (e) {
					var ipv4ProxyDslite = new $.su.Proxy({
						timeout: 20 * 1000,
						url: $.su.url('/admin/network?form=wan_ipv4_dslite')
					});
					ipv4ProxyDslite.read({}, function (data) {
						respondDynamicModeSupport(data.is_support_dynamic_mode,data.dynamic_mode);
						$("input#txt-dslite-name").textbox("setValue",data.AFTR_name||'gw.transix.jp')
						quickSetupWizard.wizard("goTo", "internet-connection-type-setting");
						setButtonStatus.step3();

					});
				},
				noHandler: function () {
					dsliteWarningMsg.msg('close');
				}
			});
			$("span#dslite-warning-msg-text").html($.su.CHAR.INTERNET.DSLITE_WARNING_V2);

			var v6plusWarningMsg = $("div#v6plus-warning-msg").msg({
				type: "confirm",
				closeBtn: false,
				cls: "l",
				okHandler: function(e){
					//quickSetupWizard.wizard("goTo","internet-connection-type-setting");
					quickSetupWizard.wizard("goTo", "wireless-settings");
				},
				noHandler: function(){
					v6plusWarningMsg.msg('close');
				}
			});
			$("span#v6plus-warning-msg-text").html($.su.CHAR.INTERNET.V6_PLUS_WARNING_V2);

			var rebootProxy = new $.su.Proxy({
				url: $.su.url('/admin/system?form=reboot')
			});
			$('p#link_agg_reboot_progressbar_text').html($.su.CHAR.INDEX.REBOOTING);
			$("div#linkAggChanged span.msg-content-container").html($.su.CHAR.QUICK_SETUP.REBOOT_CONFIRM_2);
			$("#linkAggChanged").msg({
				type: "confirm",
				cls: "l",
				yesText: $.su.CHAR.OPERATION.OK,
				noText: $.su.CHAR.OPERATION.CANCEL,
				closeBtn: false,
				okHandler: function () {
					if ($.su.module.link_agg_and_iptv_c4000v2) {
						portModule.closeAgg(function () {
							quicksetupForm.form("submit", {}, function (e) {
								$('div#link_agg_reboot_note').hide();
								$('div#link_agg_loading_msg').show();
								$("#linkAggChanged").msg('hideButtons');
								setTimeout(function () {
									rebootProxy.write({}, function (data) {
										link_agg_reboot_pro_bar.progressbar("reset").progressbar('animate', 0, 1, parseInt(data.reboot_time) * 1000, function () {
											if (localStorage) {
												localStorage.setItem("token", "");
											};
											location.href = "/";
										});
									});
								}, 5000);
							});
						});
					} else {
						quicksetupForm.form("submit", {}, function (e) {
							rebootProxy.write({}, function (data) {
								$('div#link_agg_reboot_note').hide();
								$('div#link_agg_loading_msg').show();
								$("#linkAggChanged").msg('hideButtons');
								link_agg_reboot_pro_bar.progressbar("reset").progressbar('animate', 0, 1, parseInt(data.reboot_time) * 1000, function () {
									if (localStorage) {
										localStorage.setItem("token", "");
									};
									location.href = "/";
								});
							});
						});
					}
					return false;
				},
				noHandler: function () {
					quickSetupWizard.find("button.button-next[data-name=quicksetup-summary]").button("enable");
				}
			});
			var link_agg_reboot_pro_bar = $('input#link_agg_reboot_loading_progressbar').progressbar({
				width: 397,
				height: 6,
				isProgressbar: true,
				cls: 'reboot-loading-probar'
			});

			$("span#empty_confirm_msg_text").html($.su.CHAR.ERROR["00000122"]);

			$("#encryption_sure").html($.su.CHAR.BASIC_WIRELESS.ENCRYPTION_SURE);
			$("span#note_title_all_text").text($.su.CHAR.ERROR["00000101"]);

			/**$("#internet_ok").html($.su.CHAR.QUICK_SETUP.INTERNET_OK);
			$("#register_account span").html($.su.CHAR.QUICK_SETUP.REGISTER_NEW);
			$("#register_account").hide();
			$("#cloud_account_wizard").html($.su.CHAR.QUICK_SETUP.CLOUD_WIZARD);
			$("span#not-account-tip").html($.su.CHAR.QUICK_SETUP.NO_ACCOUNT);

			$("#cloud_account_wizard_total").html($.su.CHAR.QUICK_SETUP.ACCOUNT_DESP);
			$("#cloud_account_wizard_tip1").html($.su.CHAR.QUICK_SETUP.ACCOUNT_DESP_SUB1);
			$("#cloud_account_wizard_tip2").html($.su.CHAR.QUICK_SETUP.ACCOUNT_DESP_SUB2);
			$("#cloud_account_wizard_tip3").html($.su.CHAR.QUICK_SETUP.ACCOUNT_DESP_SUB3);

			$("span#cloud-no-internet-title").html($.su.CHAR.QUICK_SETUP.SORRY);
			$("span#cloud-no-internet-note").html($.su.CHAR.QUICK_SETUP.TEST_INTERNET_FAILED_INFO_1);

			$("div#cloud-account-0").hide();
			$("div#cloud-account-1").hide();
			$("div#cloud-account-2").hide();**/

			/***************cloud event ********************/
			/**var doCloudLogin = function (operation) {
				var data = {
					"operation": operation,
					"token": $.su.userInfo.token
				};
				cloudLoginBindProxy.write(data, function (data, status, xhr) {
					$.su.userInfo.role = data.role;

					$("p#p-quicksetup-congratulations-info-1").html($.su.CHAR.QUICK_SETUP.COMPLETE_INFO_EMAIL_PREFIX + $.su.userInfo.username);
					$("div#cloud-account-2").show();
					$("div#cloud-account-0").hide();
					$("div#cloud-account-1").hide();
					quickSetupWizard.find("button.button-next[data-name=setup-complete]").button("setText", $.su.CHAR.QUICK_SETUP.FINISH);
					quickSetupWizard.find("div.form-step[name=setup-complete] .btn-prev").hide();
					quickSetupWizard.find("div.form-step[name=setup-complete] .form-buttons-container").show();

					$("#top-control-account span.icon").addClass("logined");
					$("#top-control-account #txt-account").html($.su.userInfo.username.split("@")[0]);
					$("#top-control-account #top-control-account-info").html($.su.func.escapeHtml($.su.userInfo.username));
					$("#top-control-account").show();
					$("#top-control-logout").hide();

				}, function (errorcode, others, data) {
					var errorcode = data.errorcode;
					errorcode && (errorcode = String(errorcode).replace(/^-/, 'E'));
					if (errorcode && $.su.cloudErrorCode.indexOf(errorcode) != -1) {
						$("span#cloud-error-msg-text").html($.su.CHAR.ERROR[errorcode]);
						$("div#cloud-error-msg").msg("show");
					}
					return;
				});
			};

			//param e include e.data & e.source & e.origin
			function onReceive(eObject) {
				var e = eObject.originalEvent || eObject;
				//console.log("quick setup receive from "+ e.origin, e.data, e)
				if (e.origin !== $.su.url.cloudOrigin && e.origin !== "_self" && e.origin != undefined) {
					return;
				}
				var data = e.data;
				if (typeof (e.data) == "string") {
					data = $.parseJSON(data);
				}
				if (data) {
					switch (data.eType) {
						//module change
						case "ev_goto": {
							if (data.url) {
								//set iframe's src, then set wating event(10s timeout)
								$.su.func.getToken(data.url);
							}
							if ("login" == data.url || "login" == data.index) {
								$("#register_account").hide();
								$("#cloud_account_wizard_cnt").show();
							}
							else if ("register" == data.url || "register" == data.index) {
								$.su.loading.show("iframeResize");
								$("#cloud_account_wizard_cnt").hide();
								$("#register_account").show();
							}
							else if ("findBackPassword" == data.url || "findBackPassword" == data.index) {
								$.su.loading.show("iframeResize");
							}
							break;
						}
						//cloud login status
						case "ev_login": {
							if (data.validate) {
								$.su.userInfo.username = data.email;
								$.su.userInfo.token = data.token;

								// check bind
								cloudBindStatusProxy.read({
									operation: "read",
									token: $.su.userInfo.token
								}, function (data) {
									if (data.isbind) {
										doCloudLogin("login");
									} else {
										doCloudLogin("bind");
									}
								}, function (errorcode, others, data) {
									var errorcode = data.errorcode;
									errorcode && (errorcode = String(errorcode).replace(/^-/, 'E'));
									if (errorcode && $.su.cloudErrorCode.indexOf(errorcode) != -1) {
										$("span#cloud-error-msg-text").html($.su.CHAR.ERROR[errorcode]);
										$("div#cloud-error-msg").msg("show");
									}
									return;
								});
							}
							break;
						}
						case "ev_cloud_logout": {
							if (localStorage) {
								localStorage.setItem("token", "");
							};
							location.href = "/";
						}
						case "ev_login_later": {
							$("p#p-quicksetup-congratulations-info-1").html($.su.CHAR.QUICK_SETUP.COMPLETE_INFO_2);
							$("div#cloud-account-2").show();
							$("div#cloud-account-0").hide();
							$("div#cloud-account-1").hide();
							quickSetupWizard.find("button.button-next[data-name=setup-complete]").button("setText", $.su.CHAR.QUICK_SETUP.FINISH);
							quickSetupWizard.find("div.form-step[name=setup-complete] .btn-prev").hide();
							quickSetupWizard.find("div.form-step[name=setup-complete] .form-buttons-container").show();
							break;
						}
					}
				}
			}
			$(window).on("message", onReceive);**/
			/***************cloud event end********************/

			var stopFlag = false;
			//$("#region-time-zone-tips").text($.su.CHAR.QUICK_SETUP.REGION_TIME_ZONE_TIPS);
			var quickSetupWizard = $("div#quick-setup-wizard").wizard({
				items: [
					{
						name: "language",
						label: $.su.CHAR.QUICK_SETUP.REGION_TIME_ZONE,
						labelCls: "quicksetup-language-setting",
						content: "#quicksetup-language-setting",
						prevButtonText: $.su.CHAR.QUICK_SETUP.EXIT,
						prevHandler: function (e) {
							$.su.nav.goTo("basic");
						},
						nextHandler: function (e) {
							var r = true;
							// var region = regionCombo.combobox("getValue");
							// if (region.length == 0){
							//     regionCombo.combobox("setError");
							//     r = false;
							// };

							var timezone = timezoneCombo.combobox("getValue");
							if (timezone.length == 0) {
								timezoneCombo.combobox("setError");
								r = false;
							};
							if (currentCountry === "JP") {
								$("span#close-icon").trigger("click"); // 显示下方二维码
							}
							return r;
						}
					}, {
						name: "wan-connection",
						label: $.su.CHAR.QUICK_SETUP.INTERNET_CONNECTION_TYPE,
						labelCls: "quicksetup-internet-connection-type",
						content: "#quicksetup-internet-connection-type",
						prevHandler: function (e) {

						},
						nextHandler: function (e) {
							var conntype = rdoInternetConnectionType.radio("getValue");
							if (conntype == "") {
								rdoInternetConnectionType.radio("setError");
								return false
							}
							//iptv validator
							var mode = $("#isp-special-mode").combobox("getValue");
							var vlan1 = $("#isp_special_internet_vid").textbox("getValue");
							var vlan2 = $("#isp_special_ipphone_vid").textbox("getValue");
							var vlan3 = $("#isp_special_iptv_vid").textbox("getValue");
							var vlan4 = $("#isp_special_mciptv_vid").textbox("getValue");

							var fields = [
								{ name: "isp_special_internet_vid", mapping: "isp_special_internet_vid" },
								{ name: "isp_special_internet_vprio", mapping: "isp_special_internet_vprio" },
								{ name: "isp_special_ipphone_vid", mapping: "isp_special_ipphone_vid" },
								{ name: "isp_special_ipphone_vprio", mapping: "isp_special_ipphone_vprio" },
								{ name: "isp_special_iptv_vid", mapping: "isp_special_iptv_vid" },
								{ name: "isp_special_iptv_vprio", mapping: "isp_special_iptv_vprio" },
								{ name: "isp_special_mciptv_vid", mapping: "isp_special_mciptv_vid" },
								{ name: "isp_special_mciptv_vprio", mapping: "isp_special_mciptv_vprio" }
							]
							if (mode == "Custom" || mode == "Bridge") {
                                
								for (var index = 0; index < fields.length; index++) {
									var field = fields[index];
									if (field) {
										var name = field.name,
											mapping = field.mapping || name;
										if (name) {
											var input = $("#vlan_cnt").find("[name=" + name + "]");
											if (input.length != 0) {
												var xtype = input.get(0).xtype;
												if (xtype) {
													if (!input[xtype]("getContainer").hasClass("disabled") && (!input.prop("disabled") || xtype == "combobox")) {
														if (input[xtype]("validate")) {
															continue;
														} else {
															return false
														};
													}
												};
											}
										};
									};
								};
								if (mode == "Custom") {
									var iptv_multi_vlan_enable = $("#mciptv_enable").checkbox("getValue");
									if (iptv_multi_vlan_enable.length == 0) { //off
										var vlan_error = 0;
										if (vlan1 == vlan2) {
											$("#isp_special_ipphone_vid").textbox("setError");
											vlan_error = 2;
										}
										if (vlan1 == vlan3) {
											$("#isp_special_iptv_vid").textbox("setError");
											vlan_error = vlan_error == 2 ? 2 : 3;
										}
										if (vlan2 == vlan3) {
											$("#isp_special_iptv_vid").textbox("setError");
											vlan_error = vlan_error == 2 ? 2 : 3;
										}
										if (vlan_error > 0) {
											if (vlan_error === 2) {
												$("input#isp_special_ipphone_vid").focus();
												$("#isp_special_ipphone_vid").textbox("setError", $.su.CHAR.ERROR["00000094"]);
											} else {
												$("input#isp_special_iptv_vid").focus();
												$("#isp_special_iptv_vid").textbox("setError", $.su.CHAR.ERROR["00000094"]);
											}
											return false;
										}
									}
									else {
										if ((vlan1 == vlan2) || (vlan1 == vlan3) || (vlan1 == vlan4)) {
											$("#isp_special_internet_vid").textbox("setError", $.su.CHAR.ERROR["00000094"]);
											return false;
										}
										if ((vlan2 == vlan3) || (vlan2 == vlan4)) {
											$("#isp_special_ipphone_vid").textbox("setError", $.su.CHAR.ERROR["00000094"]);
											return false;
										}
										if ((vlan3 == vlan4)) {
											$("#isp_special_iptv_vid").textbox("setError", $.su.CHAR.ERROR["00000094"]);
											return false;
										}
									}
								}

								var lan1 = lan1_combo.combobox("getValue");
								var lan2 = lan2_combo.combobox("getValue");
								var lan3 = lan3_combo.combobox("getValue");
								var lan4 = lan4_combo.combobox("getValue");
								var wanAggEnable = portModule.getWanAggEnable();

								if (!$.su.module.link_agg_and_iptv_c5400x && ((lan1[0] != "Internet" && lan1[0] != "Internet-IPTV") || wanAggEnable == "1") && (lan2[0] != "Internet" && lan2[0] != "Internet-IPTV") && (lan3[0] != "Internet" && lan3[0] != "Internet-IPTV") && (lan4[0] != "Internet" && lan4[0] != "Internet-IPTV")) {
									lan1_combo.combobox("setError", $.su.CHAR.ERROR["00000095"]);
									return false;
								}
							}
							//添加数据回显
							chooseInternetConnectionType();

							if (conntype === "dslite") {
								dsliteWarningMsg.msg("show");
								return false;
							}

							if (conntype === "v6plus") {
								check5gRegionEnable();
								 v6plusWarningMsg.msg("show");
								return false;
							}
						}
					}, {
						name: "internet-connection-type-setting",
						content: "#quicksetup-internet-connection-type-detail",
						prevHandler: function (e) {

						},
						nextHandler: function (e) {
							var conntype = rdoInternetConnectionType.radio("getValue");
							switch (conntype) {
								case "dhcp":
									break;
								case "static":
									var ipVal = $("input#txt-static-ip-addr").textbox("getValue");
									var maskVal = $("input#txt-static-subnet-mask").textbox('getValue');

									if (!$.su.func.isNetIpLegal(ipVal, maskVal)) {
										$("input#txt-static-ip-addr").textbox('setError', $.su.CHAR.ERROR['00000059']);
										$("input#txt-static-subnet-mask").textbox('setError');
										return false;
									}

									if ($.su.func.isNetIp(ipVal, maskVal) || $.su.func.isBroadCastIp(ipVal, maskVal)) {
										$("input#txt-static-ip-addr").textbox('setError', $.su.CHAR.ERROR['00000059']);
										$("input#txt-static-subnet-mask").textbox('setError');
										return false;
									}

									if ($.su.func.isSameNet(lanIP, ipVal, maskVal) || $.su.func.isSameNet(ipVal, lanIP, lanMask)) {
										$("input#txt-static-ip-addr").textbox('setError', $.su.CHAR.ERROR['00000060']);
										$("input#txt-static-subnet-mask").textbox('setError');
										return false;
									}
									$("input#txt-static-ip-addr").textbox('setNormal');
									$("input#txt-static-subnet-mask").textbox('setNormal');
									break;
								case "pppoe":
									var pppoe_username = $("input#txt-pppoe-username").textbox('getValue');
									var pppoe_password = $("input#txt-pppoe-password").password('getValue');
									if (pppoe_username == "" && pppoe_password == "") {
										$("span#empty_confirm_msg_text").html($.su.CHAR.ERROR["00000122"]);
										emptyConfirmMsg.msg("show");
										return false;
									} else if (pppoe_username == "") {
										$("span#empty_confirm_msg_text").html($.su.CHAR.ERROR["00000137"]);
										emptyConfirmMsg.msg("show");
										return false;
									} else if (pppoe_password == "") {
										$("span#empty_confirm_msg_text").html($.su.CHAR.ERROR["00000138"]);
										emptyConfirmMsg.msg("show");
										return false;
									}
									break;
								case "l2tp":
									if (rdoL2TPConnectType.radio('getValue') == 'static') {
										var ipVal = $("input#txt-l2tp-ip-addr-static").textbox('getValue');
										var maskVal = $("input#txt-l2tp-subnet-mask-static").textbox('getValue');
										var serverVal = $("input#txt-l2tp-server-ip-address-name-static").textbox('getValue');

										var validateIp = new $.su.vtype('ip');
										var validateDomain = new $.su.vtype('domain');

										if (serverVal != '' && validateIp.validate(serverVal) == true && !$.su.func.isSameNet(serverVal, ipVal, maskVal)) {
											if ($("input#txt-l2tp-default-gateway-static").textbox('getValue') == '') {
												$("input#txt-l2tp-default-gateway-static").textbox('setError', $.su.CHAR.ERROR['00000062']);
												return false;
											}
										}

										if (serverVal != '' && validateDomain.validate(serverVal) == true) {

											if (!$.su.func.isSameNet($("input#txt-l2tp-primary-dns-static").textbox('getValue'), ipVal, maskVal) && $('input#txt-l2tp-default-gateway-static').textbox('getValue') == '') {
												$("input#txt-l2tp-default-gateway-static").textbox('setError', $.su.CHAR.ERROR['00000063']);
												return false;
											}

											if ($("input#txt-l2tp-primary-dns-static").textbox('getValue') == '') {
												$("input#txt-l2tp-primary-dns-static").textbox('setError', $.su.CHAR.ERROR['00000063']);
												return false;
											}
										}

										if (!$.su.func.isNetIpLegal(ipVal, maskVal)) {
											$("input#txt-l2tp-ip-addr-static").textbox('setError', $.su.CHAR.ERROR['00000150']);
											$("input#txt-l2tp-subnet-mask-static").textbox('setError');
											return false;
										}

										if ($.su.func.isNetIp(ipVal, maskVal) || $.su.func.isBroadCastIp(ipVal, maskVal)) {
											$("input#txt-l2tp-ip-addr-static").textbox('setError', $.su.CHAR.ERROR['00000150']);
											$("input#txt-l2tp-subnet-mask-static").textbox('setError');
											return false;
										}

										if ($.su.func.isSameNet(lanIP, ipVal, maskVal) || $.su.func.isSameNet(ipVal, lanIP, lanMask)) {
											$("input#txt-l2tp-ip-addr-static").textbox('setError', $.su.CHAR.ERROR['00000060']);
											$("input#txt-l2tp-subnet-mask-static").textbox('setError');
											return false;
										}
										$("input#txt-l2tp-ip-addr-static").textbox('setNormal');
										$("input#txt-l2tp-subnet-mask-static").textbox('setNormal');
									}
									var l2tp_username = $("input#txt-l2tp-username").textbox('getValue');
									var l2tp_password = $("input#txt-l2tp-password").password('getValue');
									if (l2tp_username == "" && l2tp_password == "") {
										$("span#empty_confirm_msg_text").html($.su.CHAR.ERROR["00000122"]);
										emptyConfirmMsg.msg("show");
										return false;
									} else if (l2tp_username == "") {
										$("span#empty_confirm_msg_text").html($.su.CHAR.ERROR["00000137"]);
										emptyConfirmMsg.msg("show");
										return false;
									} else if (l2tp_password == "") {
										$("span#empty_confirm_msg_text").html($.su.CHAR.ERROR["00000138"]);
										emptyConfirmMsg.msg("show");
										return false;
									}
									return true;
									break;
								case "pptp":
									if (rdoPPTPConnectType.radio('getValue') == 'static') {
										var ipVal = $("input#txt-pptp-ip-addr-static").textbox('getValue');
										var maskVal = $("input#txt-pptp-subnet-mask-static").textbox('getValue');
										var serverVal = $("input#txt-pptp-server-ip-address-name-static").textbox('getValue');

										var validateIp = new $.su.vtype('ip');
										var validateDomain = new $.su.vtype('domain');


										if (serverVal != '' && validateIp.validate(serverVal) == true && !$.su.func.isSameNet(serverVal, ipVal, maskVal)) {
											if ($("input#txt-pptp-default-gateway-static").textbox('getValue') == '') {
												$("input#txt-pptp-default-gateway-static").textbox('setError', $.su.CHAR.ERROR['00000062']);
												return false;
											}
										}

										if (serverVal != '' && validateDomain.validate(serverVal) == true) {

											if (!$.su.func.isSameNet($("input#txt-pptp-primary-dns-static").textbox('getValue'), ipVal, maskVal) && $('input#txt-pptp-default-gateway-static').textbox('getValue') == '') {
												$("input#txt-pptp-default-gateway-static").textbox('setError', $.su.CHAR.ERROR['00000063']);
												return false;
											}

											if ($("input#txt-pptp-primary-dns-static").textbox('getValue') == '') {
												$("input#txt-pptp-primary-dns-static").textbox('setError', $.su.CHAR.ERROR['00000063']);
												return false;
											}
										}

										if (!$.su.func.isNetIpLegal(ipVal, maskVal)) {
											$("input#txt-pptp-ip-addr-static").textbox('setError', $.su.CHAR.ERROR['00000150']);
											$("input#txt-pptp-subnet-mask-static").textbox('setError');
											return false;
										}

										if ($.su.func.isNetIp(ipVal, maskVal) || $.su.func.isBroadCastIp(ipVal, maskVal)) {
											$("input#txt-pptp-ip-addr-static").textbox('setError', $.su.CHAR.ERROR['00000150']);
											$("input#txt-pptp-subnet-mask-static").textbox('setError');
											return false;
										}

										if ($.su.func.isSameNet(lanIP, ipVal, maskVal) || $.su.func.isSameNet(ipVal, lanIP, lanMask)) {
											$("input#txt-pptp-ip-addr-static").textbox('setError', $.su.CHAR.ERROR['00000060']);
											$("input#txt-pptp-subnet-mask-static").textbox('setError');
											return false;
										}
										$("input#txt-pptp-ip-addr-static").textbox('setNormal');
										$("input#txt-pptp-subnet-mask-static").textbox('setNormal');
									}
									var pptp_username = $("input#txt-pptp-username").textbox('getValue');
									var pptp_password = $("input#txt-pptp-password").password('getValue');
									if (pptp_username == "" && pptp_password == "") {
										$("span#empty_confirm_msg_text").html($.su.CHAR.ERROR["00000122"]);
										emptyConfirmMsg.msg("show");
										return false;
									} else if (pptp_username == "") {
										$("span#empty_confirm_msg_text").html($.su.CHAR.ERROR["00000137"]);
										emptyConfirmMsg.msg("show");
										return false;
									} else if (pptp_password == "") {
										$("span#empty_confirm_msg_text").html($.su.CHAR.ERROR["00000138"]);
										emptyConfirmMsg.msg("show");
										return false;
									}
									return true;
									break;
								case "dslite":
									if (is_support_dynamic_mode && $("input#dslite_dynamic_status").combobox('getValue')[0] === "1") {
										$("#txt-dslite-name").textbox('setValue', '');
									}
								default:
							};

							check5gRegionEnable();
						}
					},
					{
						name: "wireless-settings",
						label: $.su.CHAR.QUICK_SETUP.WIRELESS_SETTINGS,
						labelCls: "quicksetup-wireless-settings",
						content: "#quicksetup-wireless-settings",
						prevHandler: function (e) {
							check5gRegionEnable();
							if (rdoInternetConnectionType.radio("getValue") == "v6plus") {
								quickSetupWizard.wizard("goTo", "wan-connection");
								return false;
							}
						},
						nextHandler: function (e) {
							//smart connect开启状态下三频段数据统一操作
							smartModule.overWriteData();
							smartModule.giveNotice();

							var v5 = false,
								v6 = false;

							var v7 = false;
							var v8 = false;

							wirelessSettings.changeFlag = false;

							var vValue = validateFunc("2g", v5, v7);
							v5 = vValue[0];
							v7 = vValue[1];

							//5g
							// if(wirelessSettings.wireless_5g_disabled == "off"){
							var vValue = validateFunc("5g", v6, v8);
							v6 = vValue[0];
							v8 = vValue[1];
							// }
							//5g_2
							tribandModule.setWireless52g(wirelessSettings, validateFunc);

							if (wireless_5g_region_enable) {
							} else {
								$("#encryption_5g_notice").css("display", "none");
							}

							tribandModule.hideEncryp52g();

							// if(wirelessSettings.wireless_2g_disabled == "on"){
							//     wirelessGoNext();
							// }
							// else{
							var pwd_verify = v5,
								encrypt_verify = v7;

							pwd_verify = smartModule.pswVertify(v5, v6, tribandModule);
							encrypt_verify = smartModule.encryptVertify(v7, v8, wireless_5g_region_enable, tribandModule);

							if (pwd_verify) {
								if (encrypt_verify) {
									wirelessGoNext();
								} else {
									$("div#wireless-confirm-notice").msg("show");
								}
							}
							// }
							return false;
						}
					}, {
						name: "quicksetup-summary",
						label: $.su.CHAR.QUICK_SETUP.SUMMARY,
						labelCls: "quicksetup-summary",
						content: "#quicksetup-summary",
						nextButtonText: $.su.CHAR.QUICK_SETUP.SAVE,
						prevHandler: function (e) {
							clearInterval(checkRouterTime);
							summaryStatus.status("setNormal");
							$("input#display-quicksetup-progressbar-summary").progressbar("reset").progressbar("hide");
							quickSetupWizard.find("button.button-next[data-name=quicksetup-summary]").button("enable");

							$("input#wireless_2g_encryption").val(encryption_2g);
							$("input#wireless_5g_encryption").val(encryption_5g);
							tribandModule.tribandVal()
						},
						nextHandler: function (e) {
							summaryStatus.status("setLoading");
							var btn = quickSetupWizard.find("button.button-next[data-name=quicksetup-summary]");
							btn.button("disable");
							var btnprev = quickSetupWizard.find("button.button-prev[data-name=quicksetup-summary]");
							btnprev.button("disable");
							//$("input#txt-wireless-password-2g").prop("disabled", true);
							//$("input#txt-wireless-password-5g").prop("disabled", true);

							quickSetupWizard.find("div.form-step[name=setup-complete] .form-buttons-container").hide();

							var progressBar = $("input#display-quicksetup-progressbar-summary");
							//progressBar.progressbar("reset").progressbar("show");
							//console.log("nextHandler")
							iptv_change_flag = check_iptv_changed();
							stopFlag = false;
							
							var submitCallback = function () {
							if (wireType == "wired" || wirelessSettings.changeFlag === false) {
								//有线连接的情况
								var count = 0,countMax = 20, totaltime = 50, waitextra = 0;
								if(wirelessSettings.changeFlag === true)
								{
									totaltime = 70;
								}
								if(iptv_change_flag === true)
								{
									totaltime = 90;
								}
								// progressBar.progressbar("reset").progressbar("show").progressbar("animate", 0, 1, totaltime*1000);
								clearInterval(checkRouterTime);
								checkRouterTime = setInterval(function(){
									
									//if iptv is changed, don't check wan connection untill 40% of the progress passed!
									var progress = progressBar.progressbar("getValue");
										if (iptv_change_flag == true) {
											if (progress < 0.5 || (progress == 1 && stopFlag) || progress == "")  	
											return;
										}
										  // for other case,don't check untill 20%percent of the progress passed!
										else {
											if (progress < 0.4 || (progress == 1 && stopFlag) || progress == "")  	
												return;		
										}
											checkRouterProxy.read({}, function () {
												stopFlag = true;
												clearInterval(checkRouterTime);
												// btn.button("enable");
												var cv = progressBar.progressbar("getValue");
												progressBar.progressbar("stop").progressbar("animate", cv, 1, 500, function () {
													quickSetupWizard.wizard("goTo", "setup-complete");
													progressBar.progressbar("reset").progressbar("hide");
												});
												quickSetupWizard.find("div.form-step[name=setup-complete] .form-buttons-container").show();
											}, function () {
												count++;
												var cv = progressBar.progressbar("getValue");

												if ((count >= countMax) || (cv == 1)){
													stopFlag = true;
													clearInterval(checkRouterTime);
													btn.button("enable");
													
													if (cv == 1){
														quickSetupWizard.wizard("goTo", "setup-complete");
													}else {												
														progressBar.progressbar("stop").progressbar("animate", cv, 1, 500, function () {
																quickSetupWizard.wizard("goTo", "setup-complete");
																progressBar.progressbar("reset").progressbar("hide");
															});	
													}
													quickSetupWizard.find("div.form-step[name=setup-complete] .form-buttons-container").show();
												};
												//提示用户
											}/*, function(){
											//失联状态
											//alert("error")
											//clearInterval(checkRouterTime);
										}*/);
										}, 1 * 2000);
										//});

								} else {
									var currentVal = progressBar.progressbar('getValue');
									progressBar.progressbar("stop").progressbar("animate", currentVal, 1, 1000, function () {
										progressBar.progressbar("reset").progressbar("hide");
										$("div#quicksetup-summary-0").css("display", "none");
										quickSetupWizard.wizard("hideButtons");
										$("div#quicksetup-summary-1").fadeIn(150);
										quickSetupWizard.find("div.form-step[name=setup-complete] .form-buttons-container").show();
									});
									//无线连接的状态							
									/* progressBar.progressbar("show").progressbar("animate", 0, 1, 1000, function () {
										$("div#quicksetup-summary-0").css("display", "none");
										quickSetupWizard.wizard("hideButtons");
										$("div#quicksetup-summary-1").fadeIn(150);
									}); */
								};
							};

							if (($.su.module.link_agg_and_iptv_c4000v1 || $.su.module.link_agg_and_iptv_c4000v2) && !portModule.portConflict()) {
								$("#linkAggChanged").msg("show");
								return false;
							}
							else {
								// progressBar.progressbar("reset").progressbar("show");
								progressBar.progressbar("reset").progressbar("show").progressbar("animate", 0, 1, 50 * 1000);
								
								quicksetupForm.form("submit", {}, function (e) {
									//直接返回成功
									//btn.button("enable");
									submitCallback();
									//quickSetupWizard.wizard("goTo", "setup-complete");
								}, function (e) {
									//直接返回操作失败
									progressBar.progressbar("reset").progressbar("hide");
									btn.button("enable");
									btnprev.button("enable");
									quicksetupForm.form("prompt", false);
								}, function (e) {
									submitCallback();
								});

								return false;
							}
						}
					}, {
						name: "setup-complete",
						label: $.su.CHAR.QUICK_SETUP.TEST_INTERNET,
						labelCls: "quicksetup-setup-complete",
						content: "#quicksetup-setup-complete",
						nextButtonText: $.su.CHAR.QUICK_SETUP.FINISH,
						prevHandler: function (e) {
							$("div#quicksetup-summary-0").css("display", "block");
							$("div#quicksetup-summary-1").css("display", "none");
							$("div#quicksetup-summary-2").css("display", "none");

							$("input#display-quicksetup-progressbar-summary").progressbar("reset").progressbar("hide");

							quickSetupWizard.wizard("showButtons");
							quickSetupWizard.find("button.button-next[data-name=quicksetup-summary]").button("enable");
							quickSetupWizard.find("button.button-prev[data-name=quicksetup-summary]").button("enable");
						},
						nextHandler: function (e) {
							$.su.nav.goTo("basic");
						}
					}
				]
			});
			
			var summaryStatus = $("#quicksetup-summary-status").status({
				cls: "inline-block"
			}).hide();
			
			var setButtonStatus = {
				step1: function () {
					var region = regionCombo.combobox("getValue");
					var timezone = timezoneCombo.combobox("getValue");
					if (timezone.length == 0) {
						//console.log(quickSetupWizard.find("button.button-next[data-name=language]"))
						quickSetupWizard.find("button.button-next[data-name=language]").button("disable");
					} else {
						quickSetupWizard.find("button.button-next[data-name=language]").button("enable");

						var item = regionCombo.combobox("getItem", region[0]);
						// var nodetect = item["nodetect"];
						//console.log(detect)

						var autoDetectContainer = $("div#auto-detect-container");
						var autoDetectNoteContainer = $("p#auto-detect-note-container");
						var selectNote = $("p#quicksetup-connect-type-note");
						if (false) {
							autoDetectContainer.css("display", "none");
							autoDetectNoteContainer.css("display", "none");
							selectNote.show();
						} else {
							autoDetectContainer.css("display", "block");
							autoDetectNoteContainer.css("display", "block");
							selectNote.hide();
						};
					};
				},
				step2: function () {
					var conntype = $("input#rdo-internet-connection-type").radio("getValue");

					if (!conntype || conntype == "none" || !conntype[0] || conntype[0] == "none") {
						quickSetupWizard.find("button.button-next[data-name=wan-connection]").button("disable");
					} else {
						quickSetupWizard.find("button.button-next[data-name=wan-connection]").button("enable");
					};
				},
				step3: function () {
					var conntypeDetail = false;
					var conntype = $("input#rdo-internet-connection-type").radio("getValue");
					switch (conntype) {
						case "dhcp":
							var v = rdoMacClone.radio("getValue");
							if (v) {
								conntypeDetail = true;
							};
							break;
						case "static":
							var v1 = $("input#txt-static-ip-addr").textbox("validate", false);
							var v2 = $("input#txt-static-subnet-mask").textbox("validate", false);
							var v3 = $("input#txt-static-default-gateway").textbox("validate", false);
							var v4 = $("input#txt-static-primary-dns").textbox("validate", false);
							var v5 = $("input#txt-static-secondary-dns").textbox("validate", false);

							conntypeDetail = v1 && v2 && v3 && v4 && v5;
							break;
						case "pppoe":
							var v1 = $("input#txt-pppoe-username").textbox("validate", false);
							var v2 = $("input#txt-pppoe-password").password("validate", false);
							//console.log(v1, v2)
							conntypeDetail = v1 && v2;
							break;
						case "l2tp":
							var v1 = $("input#txt-l2tp-username").textbox("validate", false);
							var v2 = $("input#txt-l2tp-password").password("validate", false);

							var type = rdoL2TPConnectType.radio("getValue");
							if (type == "dynamic") {
								var v3 = $("input#txt-l2tp-server-ip-address-name-dynamic").textbox("validate", false);

								conntypeDetail = v1 && v2 && v3;
							} else {
								var v3 = $("input#txt-l2tp-server-ip-address-name-static").textbox("validate", false);
								var v4 = $("input#txt-l2tp-ip-addr-static").textbox("validate", false);
								var v5 = $("input#txt-l2tp-subnet-mask-static").textbox("validate", false);
								var v6 = $("input#txt-l2tp-default-gateway-static").textbox("validate", false);
								var v7 = $("input#txt-l2tp-primary-dns-static").textbox("validate", false);
								var v8 = $("input#txt-l2tp-secondary-dns-static").textbox("validate", false);
								conntypeDetail = v1 && v2 && v3 && v4 && v5 && v6 && v7 && v8;
							};

							break;
						case "pptp":
							var v1 = $("input#txt-pptp-username").textbox("validate", false);
							var v2 = $("input#txt-pptp-password").password("validate", false);

							var type = rdoPPTPConnectType.radio("getValue");
							if (type == "dynamic") {
								var v3 = $("input#txt-pptp-server-ip-address-name-dynamic").textbox("validate", false);

								conntypeDetail = v1 && v2 && v3;
							} else {
								var v3 = $("input#txt-pptp-server-ip-address-name-static").textbox("validate", false);
								var v4 = $("input#txt-pptp-ip-addr-static").textbox("validate", false);
								var v5 = $("input#txt-pptp-subnet-mask-static").textbox("validate", false);
								var v6 = $("input#txt-pptp-default-gateway-static").textbox("validate", false);
								var v7 = $("input#txt-pptp-primary-dns-static").textbox("validate", false);
								var v8 = $("input#txt-pptp-secondary-dns-static").textbox("validate", false);

								conntypeDetail = v1 && v2 && v3 && v4 && v5 && v6 && v7 && v8;
							};

							break;
						case "dslite":
							var v1;
							v1 = $("input#txt-dslite-name").textbox("validate", false);
							conntypeDetail = v1;
							break;
						case "v6plus":
							conntypeDetail = true;
							break;
						default:
							conntypeDetail = false;
					}
					if (conntypeDetail) {
						quickSetupWizard.find("button.button-next[data-name=internet-connection-type-setting]").button("enable");
					} else {
						quickSetupWizard.find("button.button-next[data-name=internet-connection-type-setting]").button("disable");
					};
				},
				step4: function () {
					var res = false;

					var v1 = $("input#txt-wireless-name-ssid-2g").textbox("validate", false);
					var v2 = $("input#txt-wireless-password-2g").textbox("validate", false);

					var v3 = $("input#txt-wireless-name-ssid-5g").textbox("validate", false);
					var v4 = $("input#txt-wireless-password-5g").textbox("validate", false);

					v1 = $("input#txt-wireless-name-ssid-2g").prop("disabled") ? true : v1;
					v2 = $("input#txt-wireless-password-2g").prop("disabled") ? true : v2;
					v3 = $("input#txt-wireless-name-ssid-5g").prop("disabled") ? true : v3;
					v4 = $("input#txt-wireless-password-5g").prop("disabled") ? true : v4;

					if (wireless_5g_region_enable) {
						res = v1 && v2 && v3 && v4;
					} else {
						res = v1 && v2;
					};

					res = tribandModule.step4GetRes(res);
					res = smartModule.step4GetRes(v1, v2, res);
					//console.log(v1, v2, v3, v4, res)
					if (res) {
						quickSetupWizard.find("button.button-next[data-name=wireless-settings]").button("enable");
					} else {
						quickSetupWizard.find("button.button-next[data-name=wireless-settings]").button("disable");
					};
				}
			};

			smartModule.init(setButtonStatus);
			var validator = function (value, encryption, handler_true, handler_false, _format, _type) {
				var result = [],
					handler_true = handler_true || function () { },
					handler_false = handler_false || function () { };
				switch (encryption) {
            		case "psk_sae":
                        var reg = /^([A-Za-z0-9\`\~\!\@\#\$\%\^\&\*\(\)\-\=\_\+\[\]\{\}\;\:\'\"\\\|\/\?\.\,\<\>\ ]{8,63})$/;
                        if (!reg.test(value)) 
                        {
                            result = [$.su.CHAR.ERROR["00004193"]];
                        } else 
                        {
                            result = [true];
                        };
                        break;
					case "psk":
						var reg = /^([A-Za-z0-9\`\~\!\@\#\$\%\^\&\*\(\)\-\=\_\+\[\]\{\}\;\:\'\"\\\|\/\?\.\,\<\>\ ]{8,63}|[0-9a-fA-F]{8,64})$/;
						if (!reg.test(value)) {
							result = [$.su.CHAR.ERROR["00000066"]];
						} else {
							result = [true];
						};
						break;
					case "wep":
						var asc_64_reg = /^[A-Za-z0-9\`\~\!\@\#\$\%\^\&\*\(\)\-\=\_\+\[\]\{\}\;\:\'\"\\\|\/\?\.\,\<\>\ ]{5}$/;
						var asc_128_reg = /^[A-Za-z0-9\`\~\!\@\#\$\%\^\&\*\(\)\-\=\_\+\[\]\{\}\;\:\'\"\\\|\/\?\.\,\<\>\ ]{13}$/;
						var asc_152_reg = /^[A-Za-z0-9\`\~\!\@\#\$\%\^\&\*\(\)\-\=\_\+\[\]\{\}\;\:\'\"\\\|\/\?\.\,\<\>\ ]{16}$/;


						var hex_64_reg = /^[0-9a-fA-F]{10}$/;
						var hex_128_reg = /^[0-9a-fA-F]{26}$/;
						var hex_152_reg = /^[0-9a-fA-F]{32}$/;

						_type = parseInt(_type, 10);
						switch (_type) {
							case 64:
								if (_format == "asic") {
									if (!asc_64_reg.test(value)) {
										result = [$.su.CHAR.ERROR["00000068"]];
									} else {
										result = [true];
									};
								} else {
									if (!hex_64_reg.test(value)) {
										result = [$.su.CHAR.ERROR["00000067"]];
									} else {
										result = [true];
									};
								};
								break;
							case 128:
								if (_format == "asic") {
									if (!asc_128_reg.test(value)) {
										result = [$.su.CHAR.ERROR["00000070"]];
									} else {
										result = [true];
									};
								} else {
									if (!hex_128_reg.test(value)) {
										result = [$.su.CHAR.ERROR["00000069"]];
									} else {
										result = [true];
									};
								};
								break;
							case 152:
								if (_format == "asic") {
									if (!asc_152_reg.test(value)) {
										result = [$.su.CHAR.ERROR["00000072"]];
									} else {
										result = [true];
									};
								} else {
									if (!hex_152_reg.test(value)) {
										result = [$.su.CHAR.ERROR["00000071"]];
									} else {
										result = [true];
									};
								};
								break;
						};
						break;
            		case "wpa3":
					case "wpa":
						var reg = /^[A-Za-z0-9\`\~\!\@\#\$\%\^\&\*\(\)\-\=\_\+\[\]\{\}\;\:\'\"\\\|\/\?\.\,\<\>\ ]{1,64}$/;
						if (reg.test(value)) {
							result = [true];
						} else {
							result = [$.su.CHAR.ERROR["00000073"]];
						};
						break;
					default:
						result = [true];
						break;
				};
				if (result[0] === true) {
					handler_true(result);
					return true;
				} else {
					handler_false(result);
					return false;
				};
			};

			function validateFunc(frequency, va, vb, encryption_52g, wep_select_52g, wep_type_52g) {
				var text = "";
				var encryption, wep_format, wep_type;
				if (frequency == "2g") {
					encryption = encryption_2g;
					wep_format = wep_select_2g;
					wep_type = wep_type_2g;
				}
				if (frequency == "5g") {
					encryption = $("#wireless_5g_encryption").val();
					wep_format = wep_select_5g;
					wep_type = wep_type_5g;
				}
				if (frequency == "52g") {
					encryption = $("#wireless_52g_encryption").val();
					wep_format = wep_select_52g;
					wep_type = wep_type_52g;
				}

				var enable = $("input#chk-enable-wireless-radio-" + frequency).checkbox("getValue");
				enable = (enable.length == 0) ? "off" : "on";
				if (enable != wirelessSettings["enable" + frequency]) {
					wirelessSettings.changeFlag = true;
				};
				var ssid = $("input#txt-wireless-name-ssid-" + frequency).textbox("getValue");
				if (ssid != wirelessSettings["ssid" + frequency]) {
					wirelessSettings.changeFlag = true;
				};
				var hide = $("input#chk-wireless-enable-ssid-" + frequency).checkbox("getValue");
				hide = (hide.length == 0) ? "off" : "on";
				if (hide != wirelessSettings["hide" + frequency]) {
					wirelessSettings.changeFlag = true;
				};
				var password = $("input#txt-wireless-password-" + frequency).textbox("getValue");
				if (password != wirelessSettings["pwd" + frequency]) {
					wirelessSettings.changeFlag = true;
				};

				var encryptionNew = "";
				if (password == "") {
					encryptionNew = "none";
					$("input#wireless_" + frequency + "_encryption").val("none");
					va = true;
				} else {
					encryptionNew = (encryption === "none" || !encryption) ? "psk" : encryption;
					$("input#wireless_" + frequency + "_encryption").val(encryptionNew);
					if (encryptionNew == "psk") {
						$("#wireless_" + frequency + "_psk_version").val("rsn");
						$("#wireless_" + frequency + "_psk_cipher").val("aes");
						$("#wireless_" + frequency + "_psk_version").prop("disabled", false);
						$("#wireless_" + frequency + "_psk_cipher").prop("disabled", false);
					}else if (encryptionNew == "psk_sae") {
						$("#wireless_" + frequency + "_psk_version").val("sae_transition");
						$("#wireless_" + frequency + "_psk_cipher").val("auto");
						$("#wireless_" + frequency + "_psk_version").prop("disabled", false);
						$("#wireless_" + frequency + "_psk_cipher").prop("disabled", false);
					}
					va = validator(password, encryptionNew, null, function (res) {
						$("input#txt-wireless-password-" + frequency).textbox("setError", res[0]);
					}, wep_format, wep_type);
				};
				var upCaseFre = frequency.toUpperCase();
				text = "";
				$("#encryption_" + frequency + "_notice").css("display", "inline-block");
				switch (encryptionNew) {
					case "wep":
						text = $.su.CHAR.WIRELESS.WEP;
						$("#encryption_" + frequency + "_notice").html($.su.CHAR.BASIC_WIRELESS["ENCRYPTION_" + upCaseFre + "_NOTICE"].replace("%s", text));

						if (frequency == "2g") {
							$("#encryption_notice").html($.su.CHAR.BASIC_WIRELESS.ENCRYPTION_NOTICE.replace("%s", text));
						} else if (frequency == "5g") {
							$.su.module.isTriband ? $("#encryption_5g_notice").html($.su.CHAR.BASIC_WIRELESS.ENCRYPTION_51G_NOTICE.replace("%s", text)) : 1;
						}

						$("input.wep_key_" + frequency + "[wep_key_selected]").val(password);
						$("input.wep_key_" + frequency + "[wep_key_selected]").prop('disabled', false);
						break;
            		case "psk_sae":
					case "psk":
						text = encryptionNew === "psk" ? $.su.CHAR.WIRELESS.WPA_WPA2_PERSONAL : $.su.CHAR.WIRELESS.WPA3_WPA2_PERSONAL;
						$("#encryption_" + frequency + "_notice").html($.su.CHAR.BASIC_WIRELESS["ENCRYPTION_" + upCaseFre + "_NOTICE"].replace("%s", text));

						if (frequency == "2g") {
							$("#encryption_notice").html($.su.CHAR.BASIC_WIRELESS.ENCRYPTION_NOTICE.replace("%s", text));
							$("#encryption_notice").css("display", "none");
						} else if (frequency == "5g") {
							$.su.module.isTriband ? $("#encryption_5g_notice").html($.su.CHAR.BASIC_WIRELESS.ENCRYPTION_51G_NOTICE.replace("%s", text)) : 1;
						}

						$("#encryption_" + frequency + "_notice").css("display", "none");
						$("input#psk_key_" + frequency).val(password);
						$("input#psk_key_" + frequency).prop('disabled', false);
						vb = true;
						break;
					case "wpa3":
					case "wpa":
						text = encryptionNew === "wpa" ? $.su.CHAR.WIRELESS.WPA_WPA2_ENTERPRISE : $.su.CHAR.WIRELESS.WPA3_ENTERPRISE;
						$("#encryption_" + frequency + "_notice").html($.su.CHAR.BASIC_WIRELESS["ENCRYPTION_" + upCaseFre + "_NOTICE"].replace("%s", text));

						if (frequency == "2g") {
							$("#encryption_notice").html($.su.CHAR.BASIC_WIRELESS.ENCRYPTION_NOTICE.replace("%s", text));
						} else if (frequency == "5g") {
							$.su.module.isTriband ? $("#encryption_5g_notice").html($.su.CHAR.BASIC_WIRELESS.ENCRYPTION_51G_NOTICE.replace("%s", text)) : 1;
						}

						$("input#wpa_key_" + frequency).val(password);
						$("input#wpa_key_" + frequency).prop('disabled', false);
						break;
					default:
						text = $.su.CHAR.WIRELESS.NO_SECURITY;
						$("#encryption_" + frequency + "_notice").html($.su.CHAR.BASIC_WIRELESS["ENCRYPTION_" + upCaseFre + "_NO"]);
						if (frequency == "2g") {
							$("#encryption_notice").html($.su.CHAR.BASIC_WIRELESS.ENCRYPTION_NO.replace("%s", text));
						} else if (frequency == "5g") {
							$.su.module.isTriband ? $("#encryption_5g_notice").html($.su.CHAR.BASIC_WIRELESS.ENCRYPTION_51G_NO) : 1;
						}

						$("input#wpa_key_" + frequency).prop("disabled", true);
						$("input#psk_key_" + frequency).prop("disabled", true);
						$("input#wep_key1_" + frequency).prop("disabled", true);
						$("input#wep_key2_" + frequency).prop("disabled", true);
						$("input#wep_key3_" + frequency).prop("disabled", true);
						$("input#wep_key4_" + frequency).prop("disabled", true);
						break;
				};

				return [va, vb];
			}


			var check5gRegionEnable = function () {
				if (wireless_5g_region_enable == false) {
					$("input#chk-enable-wireless-radio-5g").checkbox("setValue", "off").checkbox("disable");
					$("input#txt-wireless-name-ssid-5g").textbox("disable");
					$("input#chk-wireless-enable-ssid-5g").checkbox("disable");
					$("input#txt-wireless-password-5g").textbox("disable");
				};


				tribandModule.check52gRegionEnable();

			};

			var regionItem = $.su.loadComboData(URL_REGION, {}, [
				{
					srcKey: "name", dstKey: "name", para: $.su.CHAR.REGION, func: function (src, para) {
						return para[src];
					}
				},
				{ srcKey: "value", dstKey: "value" },
				{
					srcKey: "no_autodetect", dstKey: "nodetect", func: function (src) {
						if (src) {
							return true;
						} else {
							return false;
						}
					}
				}
			]);

			var regionCombo = $("input#combo-region").combobox({
				fieldLabel: $.su.CHAR.QUICK_SETUP.REGION,
				labelCls: "s",
				inputCls: "xxxl",
				noneSelectedText: true,
				items: []
			}).on("ev_change", setButtonStatus.step1);

			regionCombo.combobox("loadData", regionItem);
			var timeZoneItem = $.su.loadComboData(URL_TIMEZONE, {}, [{
				srcKey: "name",
				dstKey: "name",
				func: function (src, para) {
					return para[src];
				},
				para: $.su.CHAR.TIME_ZONE
			},
			{ srcKey: "value", dstKey: "value" }
			]);

			var timezoneCombo = $("input#combo-time-zone").combobox({
				fieldLabel: $.su.CHAR.QUICK_SETUP.TIME_ZONE,
				labelCls: "s",
				noneSelectedRemind: true,
				noneSelectedText: $.su.CHAR.OPERATION.NOSELECTEDTEXT,
				inputCls: "xxxl",
				items: []
			}).on("ev_change", setButtonStatus.step1);

			timezoneCombo.combobox("loadData", timeZoneItem);

			/*$("button#btn-get-gmt").button({
					fieldLabel: "",
					labelCls: "s",
					// btnCls: "l",
					text: $.su.CHAR.QUICK_SETUP.GET_GMT
			});*/

			//internet connection type
			var lanIP = 0;
			var lanMask = 0;
			var wanIP = 0;
			var wanMask = 0;
			var wanSndIP = 0;
			var wanSndMask = 0;

			var lanProxy = new $.su.Proxy({
				url: URL_LAN
			});

			lanProxy.read({}, function (data) {
				if (data) {
					lanIP = data.lan_ipv4_ipaddr;
					lanMask = data.lan_ipv4_netmask;
					wanIP = data.wan_ipv4_ipaddr;
					wanMask = data.wan_ipv4_netmask;
					data.wan_ipv4_snd_ipaddr ? wanSndIP = data.wan_ipv4_snd_ipaddr : 1;
					data.wan_ipv4_snd_netmask ? wanSndMask = data.wan_ipv4_snd_netmask : 1;
				};
			});

			var autoDetectBtn = $("button#btn-auto-detect").button({
				fieldLabel: null,
				cls: "inline-block",
				text: $.su.CHAR.QUICK_SETUP.AUTO_DETECT,
				handler: function () {
					clearInterval(detectInternetConnectionTime);
					autoDetectBtn.button("disable");

					var resultSpan = $('span#auto_detect_result');
					detectInternetConnectionProxy.read({ operation: 'detect' }, function (result) {
						var time = result.time;
						var intervalTime = 0;

						resultSpan.css("display", "none")
						progressbarInternetConnectionTypeAutoDetect.progressbar("reset").progressbar("show").progressbar("animate", 0, 1, time);

						detectInternetConnectionTime = setInterval(function () {
							detectInternetConnectionProxy.read({ operation: 'read' }, function (data) {
								intervalTime += 1000;
								if (data.conntype == 'unplugged') {
									clearInterval(detectInternetConnectionTime);

									progressbarInternetConnectionTypeAutoDetect.progressbar("reset").progressbar('hide');
									resultSpan.html($.su.CHAR.BASIC_INTERNET.UNPLUGGED).fadeIn(150);
								} else if (data.conntype == 'none') {
									resultSpan.html($.su.CHAR.QUICK_SETUP.NONE);
									if (intervalTime >= time) {
										clearInterval(detectInternetConnectionTime);

										progressbarInternetConnectionTypeAutoDetect.progressbar("reset").progressbar('hide');
										resultSpan.fadeIn(150);
									};
								} else {
									clearInterval(detectInternetConnectionTime);

									progressbarInternetConnectionTypeAutoDetect.progressbar("reset").progressbar('hide');

									var charStr = "";
									switch (data.conntype) {
										case "dhcp":
											charStr = $.su.CHAR.QUICK_SETUP.DYNAMIC_IP;
											break;
										case "static":
											charStr = $.su.CHAR.QUICK_SETUP.STATIC_IP;
											break;
										case "pppoe":
											charStr = $.su.CHAR.QUICK_SETUP.PPPOE;
											break;
										case "l2tp":
											charStr = $.su.CHAR.QUICK_SETUP.L2TP;
											break;
										case "pptp":
											charStr = $.su.CHAR.QUICK_SETUP.PPTP;
											break;
										case "dslite":
											charStr = $.su.CHAR.QUICK_SETUP.DSLITE;
											break;
										case "v6plus":
											charStr = $.su.CHAR.QUICK_SETUP.V6_PLUS;
											break;
										default:
											charStr = $.su.CHAR.QUICK_SETUP.NONE;
									};
									resultSpan.html(charStr).fadeIn(150);

									if (!internetChooseDirtyFlag) {
										//console.log("here")
										rdoInternetConnectionType.radio("setValue", data.conntype);
									};
								};

								autoDetectBtn.button("enable");
							}, function () {
								clearInterval(detectInternetConnectionTime);
								progressbarInternetConnectionTypeAutoDetect.progressbar("reset").progressbar('hide');
								autoDetectBtn.button("enable");
								resultSpan.html($.su.CHAR.BASIC_INTERNET.DETECT_FAIL).fadeIn(150);
							});

						}, 1 * 1000);
					}, function () {
						clearInterval(detectInternetConnectionTime);
						progressbarInternetConnectionTypeAutoDetect.progressbar("reset").progressbar('hide');
						autoDetectBtn.button("enable");
						resultSpan.html($.su.CHAR.BASIC_INTERNET.DETECT_FAIL).fadeIn(150);
					});
				}
			});
			var progressbarInternetConnectionTypeAutoDetect = $("input#progressbar-internet-connection-type-auto-detect").progressbar({
				fieldLabel: null,
				cls: 'hidden inline',
				width: 400,
				height: 6
			});
			var chooseInternetConnectionType = function (e) {
				var connectionType = rdoInternetConnectionType.radio("getValue");
				//console.log("connectionType", connectionType);
				$("div#quicksetup-dynamic").fieldset("hide");
				$("div#quicksetup-static").fieldset("hide");
				$("div#quicksetup-pppoe").fieldset("hide");
				$("div#quicksetup-l2tp").fieldset("hide");
				$("div#quicksetup-pptp").fieldset("hide");
				$("div#quicksetup-dslite").fieldset("hide");

				switch (connectionType) {
					case "dhcp":
						$("div#quicksetup-dynamic").fieldset("show");
						break;
					case "static":
						$("div#quicksetup-static").fieldset("show");
						break;
					case "pppoe":
						$("div#quicksetup-pppoe").fieldset("show");
						break;
					case "l2tp":
						$("div#quicksetup-l2tp").fieldset("show");
						//pptp/l2tp 内容选择
						var type = rdoL2TPConnectType.radio('getValue') || 'dynamic';
						if (type == "dynamic") {
							$("div#l2tp-dynamic-ip-fieldset").fieldset("show");
							$("div#l2tp-static-ip-fieldset").fieldset("hide");
						} else {
							$("div#l2tp-dynamic-ip-fieldset").fieldset("hide");
							$("div#l2tp-static-ip-fieldset").fieldset("show");
						};
						break;
					case "pptp":
						$("div#quicksetup-pptp").fieldset("show");
						var type = rdoPPTPConnectType.radio('getValue') || 'dynamic';
						if (type == "dynamic") {
							$("div#pptp-dynamic-ip-fieldset").fieldset("show");
							$("div#pptp-static-ip-fieldset").fieldset("hide");
						} else {
							$("div#pptp-dynamic-ip-fieldset").fieldset("hide");
							$("div#pptp-static-ip-fieldset").fieldset("show");
						};
						break;
					case "dslite":
						$("div#quicksetup-dslite").fieldset("show");
						break;
					default:
				};
			};
			var internetChooseDirtyFlag = false;
			var convertIspValue = {
				"dhcp": {
					radioId: "radio-dynamic-ip",
					contentId: "dynamic"
				},
				"static": {
					radioId: "radio-static-ip",
					contentId: "static"
				},
				"pppoe": {
					radioId: "radio-pppoe",
					contentId: "pppoe"
				},
				"l2tp": {
					radioId: "radio-l2tp",
					contentId: "l2tp"
				},
				"pptp": {
					radioId: "radio-pptp",
					contentId: "pptp"
				},
				"dslite": {
					radioId: "radio-dslite",
					contentId: "dslite"
				},
				"v6plus": {
					radioId: "radio-v6plus",
					contentId: "v6plus"
				},
				"bigpond": {
					radioId: "radio-v6plus",
					contentId: "v6plus"
				}
			};
			var connectionTypeItems = $.su.loadComboData(
				$.su.url("/admin/network?form=wan_ipv4_protos"),
				{ advanced: false },
				[
					{
						srcKey: "name",
						dstKey: "boxlabel",
						func: function (src, para) {
							src = src.toUpperCase().replace(' ', '_');
							return para[src];
						},
						para: $.su.CHAR.QUICK_SETUP
					},
					{
						srcKey: "value",
						dstKey: "inputValue"
					},
					{
						srcKey: "value",
						dstKey: "id",
						func: function (src, para) {
							return convertIspValue[src].radioId;
						}
					},
					{
						srcKey: "value",
						dstKey: "content",
						func: function (src, para) {
							return "#" + convertIspValue[src].contentId;
						}
					},
					{
						srcKey: "value",
						dstKey: "contentCls",
						func: function (src, para) {
							return "inline-block";
						}
					}
				]
			);
			var rdoInternetConnectionType = $("input#rdo-internet-connection-type").radio({
				fieldLabel: null,
				items: connectionTypeItems
			}).on("ev_change", function (e, oldValue, newValue) {
				$("#dynamic").hide();
				$("#static").hide();
				$("#pppoe").hide();
				$("#l2tp").hide();
				$("#pptp").hide();
				$("#dslite").hide();
				$("#v6plus").hide();
				if (newValue == "dhcp") {
					$("#dynamic").show();
				}
				if (newValue == "static") {
					$("#static").show();
				}
				if (newValue == "pppoe") {
					$("#pppoe").show();
				}
				if (newValue == "l2tp") {
					$("#l2tp").show();
				}
				if (newValue == "pptp") {
					$("#pptp").show();
				}
				if (newValue == "dslite") {
					$("#dslite").show();
				}
				if (newValue == "v6plus") {
					$("#v6plus").show();
				}
				chooseInternetConnectionType();
				setButtonStatus.step2();
			}).on("ev_click", function () {
				internetChooseDirtyFlag = true;
			});
			$("#quicksetup-internet-connection-type ul.radio-group-list-wrap").css("width", "690px");
			$("#dynamic").text($.su.CHAR.QUICK_SETUP.DYNAMIC_INTRO).hide();
			$("#static").text($.su.CHAR.QUICK_SETUP.STATIC_INTRO).hide();
			$("#pppoe").text($.su.CHAR.QUICK_SETUP.PPPOE_INTRO).hide();
			$("#l2tp").text($.su.CHAR.QUICK_SETUP.L2TP_INTRO).hide();
			$("#pptp").text($.su.CHAR.QUICK_SETUP.PPTP_INTRO).hide();
			$("#dslite").text($.su.CHAR.QUICK_SETUP.DSLITE_INTRO).hide();
			$("#v6plus").text($.su.CHAR.QUICK_SETUP.V6_PLUS_INTRO).hide();

			/*******************iptv start******************/
var cur_mode = "";
var cur_tran_mode = "";
var cur_lan1 = "";
var cur_lan2 = "";
var cur_lan3 = "";
var cur_lan4 = "";
var cur_internet_vlanid = "";
var cur_internet_vlanpri = "";
var cur_internet_vlancheck = "";
var cur_ipphone_vlanid = "";
var cur_ipphone_vlanpri = "";
var cur_ipphone_vlancheck = "";
var cur_iptv_vlanid = "";
var cur_iptv_vlanpri = "";
var cur_iptv_vlancheck = "";
var cur_iptv_multi_vlanid = "";
var cur_iptv_multi_vlanpri = "";
var cur_iptv_multi_vlancheck = "";

var qosEnable;
var qos_iptv_compatible;
var qosProxy = new $.su.Proxy({
    async: false,
    url: $.su.url("/admin/smart_network?form=qos")
});
qosProxy.read({}, function(data) {
    qosEnable = data.enable;
    qos_iptv_compatible = data.qos_iptv_compatible;
});
			
			$("#isp_special_internet_vid").textbox({
				fieldLabel: $.su.CHAR.IPTV.INTERNET_VLAN_ID,
				inputCls: "xs",
				labelCls: 'm',
				cls: "inline-block",
				allowBlank: false,
				maxLength: 4,
				vtype: {
					vtype: "number",
					min: 2,
					max: 4094
				}
			});
			$("#isp_special_internet_vprio").combobox({
				fieldLabel: $.su.CHAR.IPTV.INTERNET_VLAN_PRIORITY,
				inputCls: "xs",
				cls: "inline-block same-line",
				items: [
					{ "value": "0", "name": "0" },
					{ "value": "1", "name": "1" },
					{ "value": "2", "name": "2" },
					{ "value": "3", "name": "3" },
					{ "value": "4", "name": "4" },
					{ "value": "5", "name": "5" },
					{ "value": "6", "name": "6" },
					{ "value": "7", "name": "7" }
				]
			});
			$('#internet_vlan_cnt').fieldset({
				fields: [
					{ name: "isp_special_internet_tag" },
					{ name: "isp_special_internet_vid" },
					{ name: "isp_special_internet_vprio" }
				]
			}).hide();

			$("#isp_special_internet_tag").checkbox({
				fieldLabel: null,
				cls: "inline-block",
				items: [
					{ boxlabel: $.su.CHAR.IPTV.Q_TAG, inputValue: "on", uncheckedValue: "off" }
				]
			});

			$('#ip_vlan_cnt').fieldset({
				fields: [
					{ name: "isp_special_ipphone_vid" },
					{ name: "isp_special_ipphone_vprio" }
				]
			}).hide();

			$("#isp_special_ipphone_vid").textbox({
				fieldLabel: $.su.CHAR.IPTV.IP_PHONE_VLAN_ID,
				labelCls: 'm',
				inputCls: "xs",
				cls: "inline-block",
				allowBlank: false,
				maxLength: 4,
				vtype: {
					vtype: "number",
					min: 2,
					max: 4094
				}
			});

			$("#isp_special_ipphone_vprio").combobox({
				fieldLabel: $.su.CHAR.IPTV.IP_PHONE_VLAN_PRIORITY,
				inputCls: "xs",
				cls: "inline-block same-line",
				items: [
					{ "value": "0", "name": "0" },
					{ "value": "1", "name": "1" },
					{ "value": "2", "name": "2" },
					{ "value": "3", "name": "3" },
					{ "value": "4", "name": "4" },
					{ "value": "5", "name": "5" },
					{ "value": "6", "name": "6" },
					{ "value": "7", "name": "7" }
				]
			});

			$('#iptv_vlan_cnt').fieldset({
				fields: [
					{ name: "isp_special_iptv_vid" },
					{ name: "isp_special_iptv_vprio" }
				]
			}).hide();

			$("#isp_special_iptv_vid").textbox({
				fieldLabel: $.su.CHAR.IPTV.IPTV_VLAN_ID,
				labelCls: 'm',
				inputCls: "xs",
				cls: "inline-block",
				allowBlank: false,
				maxLength: 4,
				vtype: {
					vtype: "number",
					min: 2,
					max: 4094
				}
			});

			$("#isp_special_iptv_vprio").combobox({
				fieldLabel: $.su.CHAR.IPTV.IPTV_VLAN_PRIORITY,
				inputCls: "xs",
				cls: "inline-block same-line",
				items: [
					{ "value": "0", "name": "0" },
					{ "value": "1", "name": "1" },
					{ "value": "2", "name": "2" },
					{ "value": "3", "name": "3" },
					{ "value": "4", "name": "4" },
					{ "value": "5", "name": "5" },
					{ "value": "6", "name": "6" },
					{ "value": "7", "name": "7" }
				]
			});

			$('#iptv_multi_vlan_cnt').fieldset({
				fields: [
					{ name: "isp_special_mciptv_vid" },
					{ name: "isp_special_mciptv_vprio" },
					{ name: "isp_special_mciptv_enable" }
				]
			}).hide();

			$("#isp_special_mciptv_vid").textbox({
				fieldLabel: $.su.CHAR.IPTV.IPTV_MULTI_VLAN_ID,
				labelCls: 'm',
				inputCls: "xs",
				cls: "inline-block",
				allowBlank: false,
				maxLength: 4,
				vtype: {
					vtype: "number",
					min: 2,
					max: 4094
				}
			});

			$("#isp_special_mciptv_vprio").combobox({
				fieldLabel: $.su.CHAR.IPTV.IPTV_MULTI_VLAN_PRIORITY,
				inputCls: "xs",
				cls: "inline-block same-line",
				items: [
					{ "value": "0", "name": "0" },
					{ "value": "1", "name": "1" },
					{ "value": "2", "name": "2" },
					{ "value": "3", "name": "3" },
					{ "value": "4", "name": "4" },
					{ "value": "5", "name": "5" },
					{ "value": "6", "name": "6" },
					{ "value": "7", "name": "7" }
				]
			});

			$("#isp_special_mciptv_enable").checkbox({
				fieldLabel: null,
				cls: "inline-block",
				items: [
					{ boxlabel: $.su.CHAR.INTERNET.ENABLE_IPTV_MULTICAST_VLAN, inputValue: "on", uncheckedValue: "off" }
				]
			}).on("ev_change", function (e, oldValue, newValue) {
				var newValue = $("#isp_special_mciptv_enable").checkbox("getValue");
				if (newValue.length > 0) {
					$("#isp_special_mciptv_vid").textbox("enable");
					$("#isp_special_mciptv_vprio").combobox("enable");
				} else {
					$("#isp_special_mciptv_vid").textbox("disable");
					$("#isp_special_mciptv_vprio").combobox("disable");
				}
			});

			// var lan1_combo = $("#isp_special_lan1").combobox({
			//     fieldLabel: $.su.CHAR.IPTV.LAN1,
			//     items: [
			//         {"value": "Internet", "name": $.su.CHAR.IPTV.INTERNET},
			//         {"value": "IPTV", "name": $.su.CHAR.IPTV.IPTV},
			//         {"value": "Internet-IPTV", "name": $.su.CHAR.IPTV.INTERNET_IPTV},
			//         {"value": "IP-Phone", "name": $.su.CHAR.IPTV.IP_PHONE}
			//     ]
			// });

			// var lan2_combo = $("#isp_special_lan2").combobox({
			//     fieldLabel: $.su.CHAR.IPTV.LAN2,
			//     items: [
			//         {"value": "Internet", "name": $.su.CHAR.IPTV.INTERNET},
			//         {"value": "IPTV", "name": $.su.CHAR.IPTV.IPTV},
			//         {"value": "Internet-IPTV", "name": $.su.CHAR.IPTV.INTERNET_IPTV},
			//         {"value": "IP-Phone", "name": $.su.CHAR.IPTV.IP_PHONE}
			//     ]
			// });

			// var lan3_combo = $("#isp_special_lan3").combobox({
			//     fieldLabel: $.su.CHAR.IPTV.LAN3,
			//     items: [
			//         {"value": "Internet", "name": $.su.CHAR.IPTV.INTERNET},
			//         {"value": "IPTV", "name": $.su.CHAR.IPTV.IPTV},
			//         {"value": "Internet-IPTV", "name": $.su.CHAR.IPTV.INTERNET_IPTV},
			//         {"value": "IP-Phone", "name": $.su.CHAR.IPTV.IP_PHONE}
			//     ]
			// });


			// var lan4_combo = $("#isp_special_lan4").combobox({
			//     fieldLabel: $.su.CHAR.IPTV.LAN4,
			//     items: [
			//         {"value": "Internet", "name": $.su.CHAR.IPTV.INTERNET},
			//         {"value": "IPTV", "name": $.su.CHAR.IPTV.IPTV},
			//         {"value": "IP-Phone", "name": $.su.CHAR.IPTV.IP_PHONE},
			//         {"value": "Bridge",   "name":$.su.CHAR.IPTV.BRIDGE}
			//     ]
			// });

			$("#isp-special-mode").combobox({
				fieldLabel: $.su.CHAR.INTERNET.ISP_PROFILE,
				labelCls: "m",
				cls: "isp-combobox",
				items: [
					{ "value": "none", "name": $.su.CHAR.BASIC_INTERNET.NONE, selected: true },
					{ "value": "ExStream", "name": $.su.CHAR.IPTV.EXSTREAM },
					{ "value": "Unifi", "name": $.su.CHAR.IPTV.UNIFY },
					{ "value": "Maxis", "name": $.su.CHAR.IPTV.MAXIS + "-1"},
					{ "value": "Maxis2", "name": $.su.CHAR.IPTV.MAXIS + "-2"},
					{ "value": "Vietnam", "name": $.su.CHAR.IPTV.VIETNAM },
					{ "value": "MEO", "name": $.su.CHAR.IPTV.MEO },
					{ "value": "VDF", "name": $.su.CHAR.IPTV.VODA },
					{ "value": "nbn", "name": $.su.CHAR.IPTV.NBN },
					{ "value": "ufb", "name": $.su.CHAR.IPTV.UFB },
					{"value": "Celcom", "name": $.su.CHAR.IPTV.CELCOM},
					{"value": "TELEKOM1", "name": $.su.CHAR.IPTV.TELEKOM1},
					{"value": "TELEKOM2", "name": $.su.CHAR.IPTV.TELEKOM2},
					{"value": "AIS", "name": $.su.CHAR.IPTV.AIS},
					{"value": "CENTURYLINK", "name": $.su.CHAR.IPTV.CENTURYLINK},
					{ "value": "Bridge", "name": $.su.CHAR.IPTV.BRIDGE },
					{ "value": "Custom", "name": $.su.CHAR.IPTV.BASIC }
				]
			}).on("ev_click", function (e, oldValue, newValue) {
				if (newValue[0] == "none") {
					$("#isp-special-enable").val("off");
					rebuidProfile({})
				} else {
					$("#isp-special-enable").val("on");
					iptvProxy.read({ operation: "change", isp: newValue[0] }, function (data) {

					}, function () {
						rebuidProfile(quicksetupForm.data().data);
						$("#isp-special-mode").combobox("setValue", oldValue);
					});
				}
			});

			function rebuidProfile(params) {
				var editable = params.configure == "on" ? "enable" : "disable"
				if (params["internet_item"] == "on") {
					$('#internet_vlan_cnt').fieldset("show");
					$('#internet_vlan_cnt').fieldset("enable");
					$("#isp_special_internet_vid").textbox("setValue", params["internet_vid"]).textbox(editable);
					$("#isp_special_internet_vprio").combobox("setValue", params["internet_vprio"]).combobox(editable);
					$("#isp_special_internet_tag").checkbox("setValue", params["internet_tag"]).checkbox(editable);
				} else {
					$('#internet_vlan_cnt').fieldset("hide");
					$('#internet_vlan_cnt').fieldset("disable");
				}

				if (params["iptv_item"] == "on") {
					$('#iptv_vlan_cnt').fieldset("show");
					$('#iptv_vlan_cnt').fieldset("enable");
					$("#isp_special_iptv_vid").textbox("setValue", params["iptv_vid"]).textbox(editable);
					$("#isp_special_iptv_vprio").combobox("setValue", params["iptv_vprio"]).combobox(editable);
				} else {
					$('#iptv_vlan_cnt').fieldset("hide");
					$('#iptv_vlan_cnt').fieldset("disable");
				}

				if (params["ipphone_item"] == "on") {
					$('#ip_vlan_cnt').fieldset("show");
					$('#ip_vlan_cnt').fieldset("enable");
					$("#isp_special_ipphone_vid").textbox("setValue", params["ipphone_vid"]).textbox(editable);
					$("#isp_special_ipphone_vprio").combobox("setValue", params["ipphone_vprio"]).combobox(editable);
				} else {
					$('#ip_vlan_cnt').fieldset("hide");
					$('#ip_vlan_cnt').fieldset("disable");
				}

				if (params["porttype"] != undefined) {
					$("#lan_cnt").show();
					$('#lan_cnt').fieldset("enable");
					lan1_combo.combobox("setNormal");
					lan2_combo.combobox("setNormal");
					lan3_combo.combobox("setNormal");
					lan4_combo.combobox("setNormal");
					lan1_combo.combobox("setValue", params["porttype"].split(" ")[0]).combobox(editable);
					lan2_combo.combobox("setValue", params["porttype"].split(" ")[1]).combobox(editable);
					lan3_combo.combobox("setValue", params["porttype"].split(" ")[2]).combobox(editable);
					lan4_combo.combobox("setValue", params["porttype"].split(" ")[3]).combobox(editable);
					isp_special_porttype.textbox("setValue", params["porttype"]);
					setTimeout(function () {
						isp_special_porttype.textbox(editable);
					}, 20);
				} else {
					$("#lan_cnt").hide();
					$('#lan_cnt').fieldset("disable");
					isp_special_porttype.textbox("disable");
				}

				if (params["seltype"] != undefined) {
					$("#lan_cnt").show();
					$('#lan_cnt').fieldset("enable");
					lan1_combo.combobox("disableItem", ["Internet", "IPTV", "Internet-IPTV", "IP-Phone"]);
					lan2_combo.combobox("disableItem", ["Internet", "IPTV", "Internet-IPTV", "IP-Phone"]);
					lan3_combo.combobox("disableItem", ["Internet", "IPTV", "Internet-IPTV", "IP-Phone"]);
					lan4_combo.combobox("disableItem", ["Internet", "IPTV", "IP-Phone", "Bridge"]);
					for (var i = 0, len = params["seltype"].split(" ").length; i < len; i++) {
						lan1_combo.combobox("enableItem", params["seltype"].split(" ")[i]);
						lan2_combo.combobox("enableItem", params["seltype"].split(" ")[i]);
						lan3_combo.combobox("enableItem", params["seltype"].split(" ")[i]);
						lan4_combo.combobox("enableItem", params["seltype"].split(" ")[i]);
					}
				} else {
					$("#lan_cnt").hide();
					$('#lan_cnt').fieldset("disable");
				}

				if (params["mciptv_item"] == "on") {
					$('#iptv_multi_vlan_cnt').fieldset("show");
					$('#iptv_multi_vlan_cnt').fieldset("enable");
					$("#isp_special_mciptv_vid").textbox("setValue", params["mciptv_vid"]);
					$("#isp_special_mciptv_vprio").combobox("setValue", params["mciptv_vprio"]);
					$("#isp_special_mciptv_enable").checkbox("setValue", params["mciptv_enable"]);
					if (params["mciptv_enable"] == "on") {
						$("#isp_special_mciptv_vid").textbox("enable");
						$("#isp_special_mciptv_vprio").combobox("enable");
					} else {
						$("#isp_special_mciptv_vid").textbox("disable");
						$("#isp_special_mciptv_vprio").combobox("disable");
					}
				} else {
					$('#iptv_multi_vlan_cnt').fieldset("hide");
					$('#iptv_multi_vlan_cnt').fieldset("disable");
				}

			}
			/*******************iptv end******************/


			$("#adv_btn").on('click', function () {
				$(".advanced-container").show();
				$(this).hide();
				$('#basic_btn').css({
					"display": "inline-block"
				});
			});
			$("#basic_btn").on('click', function () {
				$(".advanced-container").hide();
				$(this).hide();
				$('#adv_btn').css({
					"display": "inline-block"
				});
			});

			$("span.advanced-text").html($.su.CHAR.INTERNET.ADDITIONAL_ISP_SETTINGS);
			$("span.basic-text").html($.su.CHAR.INTERNET.ADDITIONAL_ISP_SETTINGS);
			$("span.note-title").text($.su.CHAR.OPERATION.NOTE);
			$("span.internet-note-text").text($.su.CHAR.INTERNET.ADDITIONAL_ISP_SETTINGS_NOTE);

			$("span.note-title").text($.su.CHAR.OPERATION.NOTE);
			//$("span.note-title").text($.su.CHAR.OPERATION.NOTE);

			$("span#wireless-hardware-off-note-content").text($.su.CHAR.ERROR["0000099"]);
			$("span#quicksetup-wan-connection-type-note").html($.su.CHAR.QUICK_SETUP.INTERNET_CONNECTION_TYPE_NOTE);
			$("#quicksetup-connect-type-note").text($.su.CHAR.QUICK_SETUP.SELECT_CONNECT_TYPE);

			//dynamic ip
			$("p#p-quicksetup-mac-clone-info").html($.su.CHAR.QUICK_SETUP.DYNAMIC_IP_INFO);
			var rdoMacClone = $("input#rdo-mac-clone").radio({
				fieldLabel: null,
				items: [
					{ boxlabel: $.su.CHAR.QUICK_SETUP.MAC_CLONE_NO, inputValue: "default", id: "radio-mac-clone-no" },
					{ boxlabel: $.su.CHAR.QUICK_SETUP.MAC_CLONE_YES, inputValue: "computer", id: "radio-mac-clone-yes" }
				]
			}).on("ev_change", setButtonStatus.step3);
			$("span#span-quicksetup-mac-clone-note").html($.su.CHAR.QUICK_SETUP.MAC_CLONE_NOTE);
			$("div#quicksetup-dynamic").fieldset({
				fields: [
					{ name: "network_mac_clone_type", mapping: "network_mac_clone_type" }
				]
			});
			//static ip
			$("p#p-quicksetup-static-info").html($.su.CHAR.QUICK_SETUP.STATIC_IP_INFO);
			$("input#txt-static-ip-addr").textbox({
				fieldLabel: $.su.CHAR.QUICK_SETUP.IP_ADDRESS,
				vtype: 'ip',
				allowBlank: false,
				textFormat: $.su.format.ip
			}).on("ev_change", setButtonStatus.step3);
			$("input#txt-static-subnet-mask").textbox({
				fieldLabel: $.su.CHAR.QUICK_SETUP.SUBNET_MASK,
				vtype: 'netmask',
				allowBlank: false,
				textFormat: $.su.format.ip
			}).on("ev_change", setButtonStatus.step3);
			$("input#txt-static-default-gateway").textbox({
				fieldLabel: $.su.CHAR.QUICK_SETUP.DEFAULT_GATEWAY,
				vtype: 'ip',
				allowBlank: false,
				textFormat: $.su.format.ip
			}).on("ev_change", setButtonStatus.step3);
			$("input#txt-static-primary-dns").textbox({
				fieldLabel: $.su.CHAR.QUICK_SETUP.PRIMARY_DNS,
				vtype: 'ip',
				allowBlank: false,
				cls: 'part-seperate',
				textFormat: $.su.format.ip
			}).on("ev_change", setButtonStatus.step3);
			$("input#txt-static-secondary-dns").textbox({
				fieldLabel: $.su.CHAR.QUICK_SETUP.SECOND_DNS,
				tips: $.su.CHAR.QUICK_SETUP.OPTIONAL,
				vtype: 'ip',
				textFormat: $.su.format.ip
			}).on("ev_change", setButtonStatus.step3);
			$("div#quicksetup-static").fieldset({
				fields: [
					{ name: "network_static_ipaddr", mapping: "network_static_ipaddr" },
					{ name: "network_static_netmask", mapping: "network_static_netmask" },
					{ name: "network_static_gateway", mapping: "network_static_gateway" },
					{ name: "network_static_pri_dns", mapping: "network_static_pri_dns" },
					{ name: "network_static_snd_dns", mapping: "network_static_snd_dns" }
				]
			});
			//pppoe
			$("p#p-quicksetup-pppoe-info").html($.su.CHAR.QUICK_SETUP.PPPOE_INFO);
			$("input#txt-pppoe-username").textbox({
				fieldLabel: $.su.CHAR.QUICK_SETUP.USERNAME,
				vtype: "string_visible_allow_blank",
				maxLength: 255,
				minLength: 0,
				autoTrim: false
			}).on("ev_change", setButtonStatus.step3);
			$("input#txt-pppoe-password").password({
				fieldLabel: $.su.CHAR.QUICK_SETUP.PASSWORD,
				showLevel: false,
				encrypt: null,
				vtype: "password",
				maxLength: 255,
				minLength: 0
			}).on("ev_change", setButtonStatus.step3);
			$("div#quicksetup-pppoe").fieldset({
				fields: [
					{ name: "network_pppoe_username", mapping: "network_pppoe_username" },
					{ name: "network_pppoe_password", mapping: "network_pppoe_password" }
				]
			});
			//l2tp
			$("p#p-quicksetup-l2tp-info").html($.su.CHAR.QUICK_SETUP.L2TP_INFO);
			$("input#txt-l2tp-username").textbox({
				fieldLabel: $.su.CHAR.QUICK_SETUP.USERNAME,
				labelCls: "l",
				vtype: 'string_visible_allow_blank',
				maxLength: 255,
				minLength: 0,
				autoTrim: false
			}).on("ev_change", setButtonStatus.step3);
			$("input#txt-l2tp-password").password({
				fieldLabel: $.su.CHAR.QUICK_SETUP.PASSWORD,
				showLevel: false,
				labelCls: "l",
				encrypt: null,
				maxLength: 255,
				minLength: 0,
				vtype: "password",
				autoTrim: false
			}).on("ev_change", setButtonStatus.step3);
			var rdoL2TPConnectType = $("input#rdo-l2tp-connect-type").radio({
				fieldLabel: "",
				labelCls: "l",
				items: [
					{ boxlabel: $.su.CHAR.QUICK_SETUP.DYNAMIC_IP, inputValue: "dynamic", id: "radio-l2tp-dynamic", checked: "checked" },
					{ boxlabel: $.su.CHAR.QUICK_SETUP.STATIC_IP, inputValue: "static", id: "radio-l2tp-static" }
				],
				columns: 2
			}).on("ev_change", function (e) {
				var type = rdoL2TPConnectType.radio("getValue");
				$("div#l2tp-dynamic-ip-fieldset").fieldset("hide");
				$("div#l2tp-static-ip-fieldset").fieldset("hide");
				switch (type) {
					case "dynamic":
						$("div#l2tp-dynamic-ip-fieldset").fieldset("show", $.su.layout.doLayout);
						break;
					case "static":
						$("div#l2tp-static-ip-fieldset").fieldset("show", $.su.layout.doLayout);
						break;
				};

				setButtonStatus.step3();
			});
			$("input#txt-l2tp-server-ip-address-name-dynamic").textbox({
				fieldLabel: $.su.CHAR.QUICK_SETUP.SERVER_IP_ADDRESS_NAME,
				labelCls: "l",
				vtype: 'string_ip_domain',
				cls: 'part-seperate',
				allowBlank: false,
			}).on("ev_change", setButtonStatus.step3);
			$("input#txt-l2tp-server-ip-address-name-static").textbox({
				fieldLabel: $.su.CHAR.QUICK_SETUP.SERVER_IP_ADDRESS_NAME,
				labelCls: "l",
				allowBlank: false,
				vtype: 'string_ip_domain',
				cls: 'part-seperate'
			}).on("ev_change", setButtonStatus.step3).on('ev_validatechange', function (item, data) {
				var dataStr = $("input#txt-l2tp-server-ip-address-name-static").textbox('getValue');

				var validateIp = new $.su.vtype('ip');
				var validateDomain = new $.su.vtype('domain');

				if (data) {
					if (validateIp.validate(dataStr) == true) {
						$("input#txt-l2tp-primary-dns-static").textbox('setTips', $.su.CHAR.QUICK_SETUP.OPTIONAL);
					} else {
						$("input#txt-l2tp-primary-dns-static").textbox('setTips', '');
					}
					return true;
				}
			});
			$("input#txt-l2tp-ip-addr-static").textbox({
				fieldLabel: $.su.CHAR.QUICK_SETUP.IP_ADDRESS,
				labelCls: "l",
				allowBlank: false,
				vtype: 'ip',
				textFormat: $.su.format.ip
			}).on("ev_change", setButtonStatus.step3);
			$("input#txt-l2tp-subnet-mask-static").textbox({
				fieldLabel: $.su.CHAR.QUICK_SETUP.SUBNET_MASK,
				labelCls: "l",
				allowBlank: false,
				vtype: 'netmask',
				textFormat: $.su.format.ip
			}).on("ev_change", setButtonStatus.step3);
			$("input#txt-l2tp-default-gateway-static").textbox({
				fieldLabel: $.su.CHAR.QUICK_SETUP.DEFAULT_GATEWAY,
				labelCls: "l",
				vtype: 'ip',
				allowBlank: false,
				textFormat: $.su.format.ip
			}).on("ev_change", setButtonStatus.step3);
			$("input#txt-l2tp-primary-dns-static").textbox({
				fieldLabel: $.su.CHAR.QUICK_SETUP.PRIMARY_DNS,
				labelCls: "l",
				vtype: 'ip',
				textFormat: $.su.format.ip
			}).on("ev_change", setButtonStatus.step3);
			$("input#txt-l2tp-secondary-dns-static").textbox({
				fieldLabel: $.su.CHAR.QUICK_SETUP.SECOND_DNS,
				labelCls: "l",
				tips: $.su.CHAR.QUICK_SETUP.OPTIONAL,
				vtype: 'ip',
				textFormat: $.su.format.ip
			}).on("ev_change", setButtonStatus.step3);
			$("div#quicksetup-l2tp").fieldset({
				fields: [
					{ name: "network_l2tp_username", mapping: "network_l2tp_username" },
					{ name: "network_l2tp_password", mapping: "network_l2tp_password" },

					{ name: "network_l2tp_snd_conn", mapping: "network_l2tp_snd_conn" },
					{ name: "network_l2tp_dyn_server", mapping: "network_l2tp_dyn_server" },

					{ name: "network_l2tp_static_server", mapping: "network_l2tp_static_server" },
					{ name: "network_l2tp_static_ip", mapping: "network_l2tp_static_ip" },
					{ name: "network_l2tp_static_netmask", mapping: "network_l2tp_static_netmask" },
					{ name: "network_l2tp_static_gateway", mapping: "network_l2tp_static_gateway" },
					{ name: "network_l2tp_static_pridns", mapping: "network_l2tp_static_pridns" },
					{ name: "network_l2tp_static_snddns", mapping: "network_l2tp_static_snddns" }
				]
			});
			$("div#l2tp-dynamic-ip-fieldset").fieldset({
				fields: [
					{ name: "network_l2tp_dyn_server", mapping: "network_l2tp_dyn_server" }
				]
			});
			$("div#l2tp-static-ip-fieldset").fieldset({
				fields: [
					{ name: "network_l2tp_static_server", mapping: "network_l2tp_static_server" },
					{ name: "network_l2tp_static_ip", mapping: "network_l2tp_static_ip" },
					{ name: "network_l2tp_static_netmask", mapping: "network_l2tp_static_netmask" },
					{ name: "network_l2tp_static_gateway", mapping: "network_l2tp_static_gateway" },
					{ name: "network_l2tp_static_pridns", mapping: "network_l2tp_static_pridns" },
					{ name: "network_l2tp_static_snddns", mapping: "network_l2tp_static_snddns" }
				]
			}).fieldset("hide");
			//pptp
			$("p#p-quicksetup-pptp-info").html($.su.CHAR.QUICK_SETUP.PPTP_INFO);
			$("input#txt-pptp-username").textbox({
				fieldLabel: $.su.CHAR.QUICK_SETUP.USERNAME,
				labelCls: "l",
				vtype: 'string_visible_allow_blank',
				maxLength: 255,
				minLength: 0,
				autoTrim: false
			}).on("ev_change", setButtonStatus.step3);
			$("input#txt-pptp-password").password({
				fieldLabel: $.su.CHAR.QUICK_SETUP.PASSWORD,
				showLevel: false,
				labelCls: "l",
				maxLength: 255,
				minLength: 0,
				vtype: 'password',
				encrypt: null
			}).on("ev_change", setButtonStatus.step3);
			var rdoPPTPConnectType = $("input#rdo-pptp-connect-type").radio({
				fieldLabel: "",
				labelCls: "l",
				items: [
					{ boxlabel: $.su.CHAR.QUICK_SETUP.DYNAMIC_IP, inputValue: "dynamic", id: "radio-pptp-dynamic", checked: "checked" },
					{ boxlabel: $.su.CHAR.QUICK_SETUP.STATIC_IP, inputValue: "static", id: "radio-pptp-static" }
				],
				columns: 2
			}).on("ev_change", function (e, vOld, vNew) {
				$("div#pptp-dynamic-ip-fieldset").fieldset("hide");
				$("div#pptp-static-ip-fieldset").fieldset("hide");
				switch (vNew) {
					case "dynamic":
						$("div#pptp-dynamic-ip-fieldset").fieldset("show", $.su.layout.doLayout);
						break;
					case "static":
						$("div#pptp-static-ip-fieldset").fieldset("show", $.su.layout.doLayout);
						break;
				};

				setButtonStatus.step3();
			});

			$("input#txt-pptp-server-ip-address-name-dynamic").textbox({
				fieldLabel: $.su.CHAR.QUICK_SETUP.SERVER_IP_ADDRESS_NAME,
				labelCls: "l",
				allowBlank: false,
				vtype: 'string_ip_domain'
			}).on("ev_change", setButtonStatus.step3);
			$("input#txt-pptp-server-ip-address-name-static").textbox({
				fieldLabel: $.su.CHAR.QUICK_SETUP.SERVER_IP_ADDRESS_NAME,
				labelCls: "l",
				allowBlank: false,
				vtype: 'string_ip_domain'
			}).on("ev_change", setButtonStatus.step3).on('ev_validatechange', function (item, data) {
				var dataStr = $("input#txt-pptp-server-ip-address-name-static").textbox('getValue');

				var validateIp = new $.su.vtype('ip');
				var validateDomain = new $.su.vtype('domain');

				if (data) {
					if (validateIp.validate(dataStr) == true) {
						$("input#txt-pptp-primary-dns-static").textbox('setTips', $.su.CHAR.QUICK_SETUP.OPTIONAL);
					} else {
						$("input#txt-pptp-primary-dns-static").textbox('setTips', '');
					}
					return true;
				}
			});
			$("input#txt-pptp-ip-addr-static").textbox({
				fieldLabel: $.su.CHAR.QUICK_SETUP.IP_ADDRESS,
				labelCls: "l",
				allowBlank: false,
				vtype: 'ip',
				textFormat: $.su.format.ip
			}).on("ev_change", setButtonStatus.step3);
			$("input#txt-pptp-subnet-mask-static").textbox({
				fieldLabel: $.su.CHAR.QUICK_SETUP.SUBNET_MASK,
				labelCls: "l",
				allowBlank: false,
				vtype: 'netmask',
				textFormat: $.su.format.ip
			}).on("ev_change", setButtonStatus.step3);
			$("input#txt-pptp-default-gateway-static").textbox({
				fieldLabel: $.su.CHAR.QUICK_SETUP.DEFAULT_GATEWAY,
				labelCls: "l",
				vtype: 'ip',
				allowBlank: false,
				textFormat: $.su.format.ip
			});
			$("input#txt-pptp-primary-dns-static").textbox({
				fieldLabel: $.su.CHAR.QUICK_SETUP.PRIMARY_DNS,
				labelCls: "l",
				vtype: 'ip',
				textFormat: $.su.format.ip
			}).on("ev_change", setButtonStatus.step3);
			$("input#txt-pptp-secondary-dns-static").textbox({
				fieldLabel: $.su.CHAR.QUICK_SETUP.SECOND_DNS,
				labelCls: "l",
				tips: $.su.CHAR.QUICK_SETUP.OPTIONAL,
				vtype: 'ip',
				textFormat: $.su.format.ip
			}).on("ev_change", setButtonStatus.step3);
			$("div#quicksetup-pptp").fieldset({
				fields: [
					{ name: "network_pptp_username", mapping: "network_pptp_username" },
					{ name: "network_pptp_password", mapping: "network_pptp_password" },

					{ name: "network_pptp_snd_conn", mapping: "network_pptp_snd_conn" },
					{ name: "network_pptp_dyn_server", mapping: "network_pptp_dyn_server" },

					{ name: "network_pptp_static_server", mapping: "network_pptp_static_server" },
					{ name: "network_pptp_static_ip", mapping: "network_pptp_static_ip" },
					{ name: "network_pptp_static_netmask", mapping: "network_pptp_static_netmask" },
					{ name: "network_pptp_static_gateway", mapping: "network_pptp_static_gateway" },
					{ name: "network_pptp_static_pridns", mapping: "network_pptp_static_pridns" },
					{ name: "network_pptp_static_snddns", mapping: "network_pptp_static_snddns" }
				]
			});
			$("div#pptp-dynamic-ip-fieldset").fieldset({
				fields: [
					{ name: "network_pptp_dyn_server", mapping: "network_pptp_dyn_server" }
				]
			});
			$("div#pptp-static-ip-fieldset").fieldset({
				fields: [
					{ name: "network_pptp_static_server", mapping: "network_pptp_static_server" },
					{ name: "network_pptp_static_ip", mapping: "network_pptp_static_ip" },
					{ name: "network_pptp_static_netmask", mapping: "network_pptp_static_netmask" },
					{ name: "network_pptp_static_gateway", mapping: "network_pptp_static_gateway" },
					{ name: "network_pptp_static_pridns", mapping: "network_pptp_static_pridns" },
					{ name: "network_pptp_static_snddns", mapping: "network_pptp_static_snddns" }
				]
			}).fieldset("hide");

			//dslite
			$("#p-quicksetup-dslite-info").html($.su.CHAR.QUICK_SETUP.DSLITE_INFO);
			$("div#quicksetup-dslite").fieldset({
				fields: [
					{ name: "network_dslite_AFTR_name", mapping: "network_dslite_AFTR_name" },
					{ name: "network_dslite_dynamic_mode", mapping: "network_dslite_dynamic_mode" }
				]
			});
			$("input#txt-dslite-name").textbox({
				labelCls: "l",
				cls: "part-seperate",
				allowBlank: false,
				validator: function (val) {
					if (is_support_dynamic_mode && $("input#dslite_dynamic_status").combobox('getValue')[0] === "1") {
						return true;
					}
					if ($.su.vtype.types.ipv6.regex.test(val)) {
						return true;
					}
					if ($.su.vtype.types.domain.regex.test(val)) {
						return true;
					}
					return $.su.CHAR.VTYPETEXT.IPV6_DOMAIN;
				}
			}).on("ev_change", setButtonStatus.step3);
			//wireless settings
			$("input#chk-enable-wireless-radio-2g").checkbox({
				fieldLabel: $.su.CHAR.QUICK_SETUP.WIRELESS_24GHZ,
				labelCls: "l",
				items: [
					{ boxlabel: $.su.CHAR.QUICK_SETUP.ENABLE_WIRELESS_RADIO, uncheckedValue: "off", inputValue: "on", id: "chk_enable_wireless_2g" }
				]
			}).on("ev_change", function (e, vOld, vNew) {
				if (vNew.length == 0) {
					$("input#wireless_2g_disabled_all").val("on");
				} else {
					$("input#wireless_2g_disabled_all").val("off");
				};
			});
			$("input#txt-wireless-name-ssid-2g").textbox({
				fieldLabel: $.su.CHAR.QUICK_SETUP.NAME_SSID,
				cls: 'inline-block',
				vtype: "string_visible_allow_blank",
				maxLength: 32,
				allowBlank: false,
				autoTrim: false,
				labelCls: "l"
			}).on("ev_change", function(e, newValue){
				setButtonStatus.step4();
				if($.su.module.isTriband==true){
					$("input#txt-wireless-name-ssid-5g").textbox('setValue', newValue+'_5G1');
					$("input#txt-wireless-name-ssid-52g").textbox('setValue', newValue+'_5G2');
				}else{
					$("input#txt-wireless-name-ssid-5g").textbox('setValue', newValue+'_5G');
				}
			});
			$("input#chk-wireless-enable-ssid-2g").checkbox({
				fieldLabel: null,
				cls: "inline-block",
				items: [
					{ boxlabel: $.su.CHAR.BASIC_WIRELESS.HIDE_SSID, uncheckedValue: "off", inputValue: "on", id: "chk_enable_ssid_broadcast_2g" }
				]
			});
			$("input#txt-wireless-password-2g").textbox({
				fieldLabel: $.su.CHAR.QUICK_SETUP.PASSWORD,
				autoTrim: false,
				labelCls: "l",
				maxLength: 64
			}).on("ev_change", function(e, newValue){
				setButtonStatus.step4();
				$("input#txt-wireless-password-5g").textbox('setValue', newValue);
				if($.su.module.isTriband==true){
					$("input#txt-wireless-password-52g").textbox('setValue', newValue);
				}
			});
			$("input#chk-enable-wireless-radio-5g").checkbox({
				fieldLabel: $.su.CHAR.QUICK_SETUP.WIRELESS_5GHZ,
				cls: "part-separate",
				labelCls: "l",
				items: [
					{ boxlabel: $.su.CHAR.QUICK_SETUP.ENABLE_WIRELESS_RADIO, uncheckedValue: "off", inputValue: "on", id: "chk_enable_wireless_5g" }
				]
			}).on("ev_change", function (e, vOld, vNew) {
				if (vNew.length == 0) {
					$("input#wireless_5g_disabled_all").val("on");
				} else {
					$("input#wireless_5g_disabled_all").val("off");
				};
			});
			$("input#txt-wireless-name-ssid-5g").textbox({
				fieldLabel: $.su.CHAR.QUICK_SETUP.NAME_SSID,
				cls: "inline-block",
				vtype: "string_visible_allow_blank",
				maxLength: 32,
				allowBlank: false,
				autoTrim: false,
				labelCls: "l"
			}).on("ev_change", setButtonStatus.step4);
			$("input#chk-wireless-enable-ssid-5g").checkbox({
				fieldLabel: null,
				cls: "inline-block",
				items: [
					{ boxlabel: $.su.CHAR.BASIC_WIRELESS.HIDE_SSID, uncheckedValue: "off", inputValue: "on", id: "chk_enable_ssid_broadcast_5g" }
				]
			});
			$("input#txt-wireless-password-5g").textbox({
				fieldLabel: $.su.CHAR.QUICK_SETUP.PASSWORD,
				autoTrim: false,
				labelCls: "l",
				maxLength: 64
			}).on("ev_change", setButtonStatus.step4);

			var fields = [
				{ name: "wireless_2g_enable", mapping: "wireless_2g_enable" },
				{ name: "wireless_2g_ssid", mapping: "wireless_2g_ssid" },
				{ name: "wireless_2g_hidden", mapping: "wireless_2g_hidden" },
				{ name: "wireless_5g_enable", mapping: "wireless_5g_enable" },
				{ name: "wireless_5g_ssid", mapping: "wireless_5g_ssid" },
				{ name: "wireless_5g_hidden", mapping: "wireless_5g_hidden" }
			];
			tribandModule.extendField(fields);

			$("div#quicksetup-wireless-settings").fieldset({
				fields: fields
			});
			$("p#wireless_note").text($.su.CHAR.QUICK_SETUP.WIRELESS_NOTE);
			//5g_2
			tribandModule.init(setButtonStatus);
			//wireless 验证部分
			var encryption_2g = "";
			var encryption_5g = "";

			var wep_select_2g = "";
			var wep_select_5g = "";

			var wep_format_2g = "";
			var wep_format_5g = "";

			var wep_type_2g = "";
			var wep_type_5g = "";

			var wireless_5g_region_enable = true;

			var wirelessGoNext = function () {
				//$("form#wireless_setting").form('submit');
				//summary内容显示
				$("div#quicksetup-summary-0").css("display", "block");
				$("div#quicksetup-summary-1").css("display", "none");
				$("div#quicksetup-summary-2").css("display", "none");

				quickSetupWizard.wizard("showButtons");

				var smartStatus = smartModule.isSmartOff();

				var wireless_status_label = $($("#display-wireless-enable-2g-summary").get(0)).closest(".text-container").find(".text-fieldlabel");
				if (smartStatus == "on") {
					$("#display-title-wireless-2g-summary").html($.su.CHAR.QUICK_SETUP.WIRELESS);
					wireless_status_label.html($.su.CHAR.QUICK_SETUP.WIRELESS);
					$("#display-wireless-5g-container-summary").hide();
					tribandModule.hide("#display-wireless-52g-container-summary");
				}
				else {
					$("#display-title-wireless-2g-summary").html($.su.CHAR.QUICK_SETUP.WIRELESS_24GHZ);
					wireless_status_label.html($.su.CHAR.QUICK_SETUP.WIRELESS_24GHZ);
					$("#display-wireless-5g-container-summary").show();
					tribandModule.show("#display-wireless-52g-container-summary");
				}



				var region = $("input#combo-region").combobox("getSelectedText");
				// $("input#display-region-summary").textbox("setValue", region);

				var timeZone = $("input#combo-time-zone").combobox("getSelectedText");
				$("input#display-time-zone-summary").textbox("setValue", timeZone);

				var internetConnectionType = $("input#rdo-internet-connection-type").radio("getSelectedText");
				$("input#display-internet-connection-type-summary").textbox("setValue", internetConnectionType);

				smartModule.summaryValue();
				if ($("input#isp-special-mode").combobox("getValue").length > 0 && $("input#isp-special-mode").combobox("getValue")[0] != "none") {
					var isp = $("input#isp-special-mode").combobox("getSelectedText");
					$("input#isp-connection-type-summary").textbox("setValue", isp).textbox("show");
				} else {
					$("input#isp-connection-type-summary").textbox("hide")
				}
				if (wireType === "wired") {
					$("div#quicksetup-summary").addClass("wired");
				} else {
					$("div#quicksetup-summary").removeClass("wired");
				};

				var wireless2g = $("input#chk-enable-wireless-radio-2g").checkbox("getValue");
				if (wireless2g[0]) {
					$("input#display-wireless-enable-2g-summary").textbox("setValue", $.su.CHAR.QUICK_SETUP.ON);
					$("div#display-wireless-2g-container-summary").addClass("enabled").removeClass("disabled");
				} else {
					$("input#display-wireless-enable-2g-summary").textbox("setValue", $.su.CHAR.QUICK_SETUP.OFF);
					$("div#display-wireless-2g-container-summary").removeClass("enabled").addClass("disabled");
				};

				var wireless5g = $("input#chk-enable-wireless-radio-5g").checkbox("getValue");
				if (wireless5g[0]) {
					$("input#display-wireless-enable-5g-summary").textbox("setValue", $.su.CHAR.QUICK_SETUP.ON);
					$("div#display-wireless-5g-container-summary").addClass("enabled").removeClass("disabled");
				} else {
					$("input#display-wireless-enable-5g-summary").textbox("setValue", $.su.CHAR.QUICK_SETUP.OFF);
					$("div#display-wireless-5g-container-summary").removeClass("enabled").addClass("disabled");
				};
				var ssid2g = $("input#txt-wireless-name-ssid-2g").textbox("getValue");
				$("input#display-wireless-name-ssid-2g-summary").textbox("setValue", ssid2g);
				$("input#reconnect-network-wireless-ssid-2g").textbox("setValue", ssid2g);

				var wirelessPassword2g = $("input#txt-wireless-password-2g").textbox("getValue");
				$("input#display-wireless-password-2g-summary").textbox("setValue", wirelessPassword2g);
				$("input#reconnect-network-wireless-password-2g").textbox("setValue", wirelessPassword2g);

				var ssid5g = $("input#txt-wireless-name-ssid-5g").textbox("getValue");
				$("input#display-wireless-name-ssid-5g-summary").textbox("setValue", ssid5g);
				$("input#reconnect-network-wireless-ssid-5g").textbox("setValue", ssid5g);

				var wirelessPassword5g = $("input#txt-wireless-password-5g").textbox("getValue");
				$("input#display-wireless-password-5g-summary").textbox("setValue", wirelessPassword5g);
				$("input#reconnect-network-wireless-password-5g").textbox("setValue", wirelessPassword5g);

				tribandModule.wirelessGoNext();

				quickSetupWizard.wizard("goTo", "quicksetup-summary");
			}

			var form2g5g_prepare_func = function () {
				$("input#wpa_key_2g").prop("disabled", true);
				$("input#psk_key_2g").prop("disabled", true);
				$("input#wep_key1_2g").prop("disabled", true);
				$("input#wep_key2_2g").prop("disabled", true);
				$("input#wep_key3_2g").prop("disabled", true);
				$("input#wep_key4_2g").prop("disabled", true);

				$("input#wpa_key_5g").prop("disabled", true);
				$("input#psk_key_5g").prop("disabled", true);
				$("input#wep_key1_5g").prop("disabled", true);
				$("input#wep_key2_5g").prop("disabled", true);
				$("input#wep_key3_5g").prop("disabled", true);
				$("input#wep_key4_5g").prop("disabled", true);

				$("input#wireless_2g_encryption").val(encryption_2g);
				$("input#wireless_5g_encryption").val(encryption_5g);
				switch (encryption_2g) {
					case "psk_sae":
					case "psk":
						$("input#psk_key_2g").prop("disabled", false);
						break;
					case "wep":
						var keyIndex = form2g5g_data.wireless_2g_wep_select;
						$("input#wep_key" + keyIndex + "_2g").prop("disabled", false);
						break;
					case "wpa3":
					case "wpa":
						$("input#wpa_key_2g").prop("disabled", false);
						break;
					default:
						break;
				};

				switch (encryption_5g) {
					case "psk_sae":
					case "psk":
						$("input#psk_key_5g").prop("disabled", false);
						break;
					case "wep":
						var keyIndex = form2g5g_data.wireless_5g_wep_select;
						$("input#wep_key" + keyIndex + "_5g").prop("disabled", false);
						break;
					case "wpa3":
					case "wpa":
						$("input#wpa_key_5g").prop("disabled", false);
						break;
					default:
						break;
				};

				tribandModule.form2g5g_prepare_func();
			};

			$("div#wireless-confirm-notice").msg({
				closeBtn: false,
				type: "confirm",
				cls: "m warning",
				okHandler: function () {
					wirelessGoNext();
				},
				noHandler: function () {
					form2g5g_prepare_func();
					return;
				}
			});



			//summary
			// $("input#display-region-summary").textbox({
			//     fieldLabel: $.su.CHAR.QUICK_SETUP.REGION,
			//     readOnly: true,
			// 	labelCls: "l"
			// });

			$("input#display-time-zone-summary").textbox({
				fieldLabel: $.su.CHAR.QUICK_SETUP.TIME_ZONE,
				readOnly: true,
				labelCls: "l",
				inputCls: "xxxxl"
			});

			$("input#display-internet-connection-type-summary").textbox({
				fieldLabel: $.su.CHAR.QUICK_SETUP.INTERNET_CONNECTION_TYPE,
				readOnly: true,
				labelCls: "l"
			});

			$("input#isp-connection-type-summary").textbox({
				fieldLabel: $.su.CHAR.QUICK_SETUP.ISP_PROFILE,
				readOnly: true,
				labelCls: "l"
			});
			$("h4#display-title-wireless-2g-summary").html($.su.CHAR.QUICK_SETUP.WIRELESS_24GHZ);

			$("input#display-wireless-enable-2g-summary").textbox({
				fieldLabel: $.su.CHAR.QUICK_SETUP.WIRELESS_24GHZ,
				readOnly: true,
				cls: "display-wireless-enable-summary",
				labelCls: "l"
			});

			$("input#display-wireless-name-ssid-2g-summary").textbox({
				fieldLabel: $.su.CHAR.QUICK_SETUP.NAME_SSID,
				readOnly: true,
				labelCls: "l"
			});

			$("input#display-wireless-password-2g-summary").textbox({
				fieldLabel: $.su.CHAR.QUICK_SETUP.PASSWORD,
				readOnly: true,
				labelCls: "l"
			});

			$("h4#display-title-wireless-5g-summary").html($.su.CHAR.QUICK_SETUP.WIRELESS_5GHZ);

			$("input#display-wireless-enable-5g-summary").textbox({
				fieldLabel: $.su.CHAR.QUICK_SETUP.WIRELESS_5GHZ,
				readOnly: true,
				cls: "display-wireless-enable-summary",
				labelCls: "l"
			});

			$("input#display-wireless-name-ssid-5g-summary").textbox({
				fieldLabel: $.su.CHAR.QUICK_SETUP.NAME_SSID,
				readOnly: true,
				labelCls: "l"
			});

			$("input#display-wireless-password-5g-summary").textbox({
				fieldLabel: $.su.CHAR.QUICK_SETUP.PASSWORD,
				readOnly: true,
				labelCls: "l"
			});

			$("input#display-quicksetup-progressbar-summary").progressbar({
				fieldLabel: null,
				cls: 'hidden',
				width: 480,
				height: 6
			});

			$("p#p-reconnect-network-note-0").html($.su.CHAR.QUICK_SETUP.SUMMARY_INFO1);

			$("input#reconnect-network-wireless-ssid-2g").textbox({
				fieldLabel: $.su.CHAR.QUICK_SETUP.WIRELESS_24GHZ_SSID,
				readOnly: true,
				labelCls: "l"
			});

			$("input#reconnect-network-wireless-password-2g").textbox({
				fieldLabel: $.su.CHAR.QUICK_SETUP.WIRELESS_24GHZ_PASSWORD,
				readOnly: true,
				labelCls: "l"
			});
			$("input#reconnect-network-wireless-ssid-5g").textbox({
				fieldLabel: $.su.CHAR.QUICK_SETUP.WIRELESS_5GHZ_SSID,
				readOnly: true,
				labelCls: "l"
			});

			$("input#reconnect-network-wireless-password-5g").textbox({
				fieldLabel: $.su.CHAR.QUICK_SETUP.WIRELESS_5GHZ_PASSWORD,
				readOnly: true,
				labelCls: "l"
			});

			$("input#status-reconnect-network").status({
				proxy: null,
				cls: "inline-block"
			});

			var btnReconnectCheck = $("button#btn-reconnect-network").button({
				text: $.su.CHAR.QUICK_SETUP.NEXT,
				cls: "inline-block submit",
				handler: function (e) {
					var count = 0,
						maxCount = 4,
						wanCount = 0,
						wanMaxCount = 9;

					var btn = quickSetupWizard.find("button.button-next[data-name=quicksetup-summary]");
					var statusReconnect = $("input#status-reconnect-network");
					statusReconnect.status("setLoading");
					btnReconnectCheck.button("disable");

					clearInterval(checkRouterTime);
					checkRouterTime = setInterval(function () {
						if (count <= maxCount) {
							checkRouterProxy.read({}, function () {
								//返回成功
								//alert("successed")
								clearInterval(checkRouterTime);
								btn.button("enable");
								statusReconnect.status("setNormal");
								quickSetupWizard.wizard("goTo", "setup-complete");
								quickSetupWizard.wizard("showButtons");
								btnReconnectCheck.button("enable");
								$.su.layout.doLayout();
							}, function () {
								wanCount++;
								if (wanCount > wanMaxCount) {
									clearInterval(checkRouterTime);
									statusReconnect.status("setNormal");

									quickSetupWizard.wizard("goTo", "setup-complete");
									quickSetupWizard.wizard("showButtons");
									btnReconnectCheck.button("enable");
									$.su.layout.doLayout();
								};
							}, function () {
								//失联状态
								//alert("error")
								count++;
								if (count > maxCount) {
									clearInterval(checkRouterTime);
									statusReconnect.status("setNormal");

									$("div#quicksetup-summary-1").css("display", "none");
									$("div#quicksetup-summary-2").fadeIn(150);
								};
							});
						} else {
							clearInterval(checkRouterTime);
						};
					}, 1 * 1000);
				}
			});

			$("h3#h3-quicksetup-summary-2-sorry").html($.su.CHAR.QUICK_SETUP.SORRY);
			$("p#p-quicksetup-summary-2-info").html($.su.CHAR.QUICK_SETUP.SUMMARY_INFO4);
			$("button#btn-quicksetup-summary-2-ok").button({
				text: $.su.CHAR.QUICK_SETUP.OK,
				cls: "submit",
				handler: function () {
					var btn = quickSetupWizard.find("button.button-next[data-name=quicksetup-summary]");
					checkRouterProxy.read({}, function () {
						btn.button("enable");
						quickSetupWizard.wizard("goTo", "setup-complete");
						quickSetupWizard.wizard("showButtons");
					}, function () {
						btn.button("enable");
						quickSetupWizard.wizard("goTo", "setup-complete");
						quickSetupWizard.wizard("showButtons");
					}, function () {
						location.reload();
					})
				}
			});

			$("h3#h3-quicksetup-congratulations").html($.su.CHAR.QUICK_SETUP.CONGRATULARIONS);
			$("p#p-quicksetup-congratulations-info-0").html($.su.CHAR.QUICK_SETUP.COMPLETE_INFO_0);
			$("p#p-quicksetup-congratulations-info-1").html($.su.CHAR.QUICK_SETUP.COMPLETE_INFO_1);

			$("span#span-quicksetup-congratulations-click-here").html($.su.CHAR.QUICK_SETUP.TEST_INTERNET);
			$("a#a-quicksetup-congratulations-click-here").on("click", function () {
				checkInternetProxy.read({}, function () {
					testInternetSuccessContainer.msg("show");
				}, function () {
					testInternetFailedContainer.msg("show");
				});
			});

			$("span#test-internet-success-title").html($.su.CHAR.QUICK_SETUP.SUCCESS);
			$("span#test-internet-failed-title").html($.su.CHAR.QUICK_SETUP.SORRY);

			$("p#test-internet-success-info").html($.su.CHAR.QUICK_SETUP.TEST_INTERNET_SUCCESS_INFO);
			$("p#test-internet-failed-info-0").html($.su.CHAR.QUICK_SETUP.TEST_INTERNET_FAILED_INFO_0);
			$("p#test-internet-failed-info-1").html($.su.CHAR.QUICK_SETUP.TEST_INTERNET_FAILED_INFO_1);

			var testInternetSuccessContainer = $("div#test-internet-success-container").msg({
				type: "alert",
				cls: "m test-internet",
				okHandler: function () {
					testInternetSuccessContainer.msg("close");
				}
			});

			var testInternetFailedContainer = $("div#test-internet-failed-container").msg({
				type: "alert",
				cls: "l test-internet",
				okHandler: function () {
					testInternetFailedContainer.msg("close");
				}
			});

			var qsFromFields = [
				{ name: "region_country" },
				{ name: "time_timezone" },

				{ name: "network_conntype" },

				{ name: "network_dhcp_mac_clone_type", mapping: "network_dhcp_mac_clone_type" },

				{ name: "network_static_ipaddr", mapping: "network_static_ipaddr" },
				{ name: "network_static_netmask", mapping: "network_static_netmask" },
				{ name: "network_static_gateway", mapping: "network_static_gateway" },
				{ name: "network_static_pri_dns", mapping: "network_static_pri_dns" },
				{ name: "network_static_snd_dns", mapping: "network_static_snd_dns" },

				{ name: "network_pppoe_username", mapping: "network_pppoe_username" },
				{ name: "network_pppoe_password", mapping: "network_pppoe_password" },

				{ name: "network_pptp_username", mapping: "network_pptp_username" },
				{ name: "network_pptp_password", mapping: "network_pptp_password" },

				{ name: "network_pptp_dyn_server", mapping: "network_pptp_dyn_server" },
				{ name: "network_pptp_static_server", mapping: "network_pptp_static_server" },
				{ name: "network_pptp_static_ip", mapping: "network_pptp_static_ip" },
				{ name: "network_pptp_static_netmask", mapping: "network_pptp_static_netmask" },
				{ name: "network_pptp_static_gateway", mapping: "network_pptp_static_gateway" },
				{ name: "network_pptp_static_pridns", mapping: "network_pptp_static_pridns" },
				{ name: "network_pptp_static_snddns", mapping: "network_pptp_static_snddns" },

				{ name: "network_pptp_snd_conn", mapping: "network_pptp_snd_conn" },

				{ name: "network_l2tp_username", mapping: "network_l2tp_username" },
				{ name: "network_l2tp_password", mapping: "network_l2tp_password" },

				{ name: "network_l2tp_dyn_server", mapping: "network_l2tp_dyn_server" },
				{ name: "network_l2tp_static_server", mapping: "network_l2tp_static_server" },
				{ name: "network_l2tp_static_ip", mapping: "network_l2tp_static_ip" },
				{ name: "network_l2tp_static_netmask", mapping: "network_l2tp_static_netmask" },
				{ name: "network_l2tp_static_gateway", mapping: "network_l2tp_static_gateway" },
				{ name: "network_l2tp_static_pridns", mapping: "network_l2tp_static_pridns" },
				{ name: "network_l2tp_static_snddns", mapping: "network_l2tp_static_snddns" },

				{ name: "network_l2tp_snd_conn", mapping: "network_l2tp_snd_conn" },

				{ name: "network_dslite_AFTR_name", mapping: "network_dslite_AFTR_name" },
				{ name: "wireless_2g_enable", mapping: "wireless_2g_enable" },
				{ name: "wireless_2g_ssid", mapping: "wireless_2g_ssid" },
				{ name: "wireless_2g_hidden", mapping: "wireless_2g_hidden" },

				{ name: "wireless_5g_enable", mapping: "wireless_5g_enable" },
				{ name: "wireless_5g_ssid", mapping: "wireless_5g_ssid" },
				{ name: "wireless_5g_hidden", mapping: "wireless_5g_hidden" },
				{ name: "isp_special_mode", mapping: "isp_special_mode" },
				{ name: "isp_special_enable", mapping: "isp_special_enable" },

				{ name: "isp_special_internet_tag", mapping: "isp_special_internet_tag" },
				{ name: "isp_special_internet_vid", mapping: "isp_special_internet_vid" },
				{ name: "isp_special_internet_vprio", mapping: "isp_special_internet_vprio" },

				{ name: "isp_special_ipphone_vid", mapping: "isp_special_ipphone_vid" },
				{ name: "isp_special_ipphone_vprio", mapping: "isp_special_ipphone_vprio" },

				{ name: "isp_special_iptv_vid", mapping: "isp_special_iptv_vid" },
				{ name: "isp_special_iptv_vprio", mapping: "isp_special_iptv_vprio" },

				{ name: "isp_special_mciptv_vid", mapping: "isp_special_mciptv_vid" },
				{ name: "isp_special_mciptv_vprio", mapping: "isp_special_mciptv_vprio" },
				{ name: "isp_special_mciptv_enable", mapping: "isp_special_mciptv_enable" },

				// {name: "isp_special_lan1", mapping: "isp_special_lan1"},
				// {name: "isp_special_lan2", mapping: "isp_special_lan2"},
				// {name: "isp_special_lan3", mapping: "isp_special_lan3"},
				// {name: "isp_special_lan4", mapping: "isp_special_lan4"}
			];

			var IPTV_URL_NEW = $.su.url("/admin/iptv?form=setting");
			var iptvProxy = new $.su.Proxy({
				url: IPTV_URL_NEW,
				autoLoad: false
			});
			var initFlag = true;
			$(iptvProxy).on("ev_read", function (e, data) {
				if (initFlag) {
					portModule.init(true, data);
					fields = portModule.extendField(qsFromFields, data);
					initFlag = false;
					if ($("#isp-special-mode").combobox("getValue") == "none") {
						rebuidProfile({});
						
						if((qosEnable === "on") && (qos_iptv_compatible == "no")) {
        				disableIptv();
        		}
						return;
					}
				}
				setTimeout(function () {
					rebuidProfile(data);
				}, 20);
			});
			qsFromFields = tribandModule.extendField(qsFromFields);
			qsFromFields = smartModule.extendField(qsFromFields);
			var quicksetupForm = $("div#quicksetup-form").form({
				proxy: {
					url: URL_QUICKSETUP,
					preventErrorDefault: true
				},
				fields: qsFromFields,
				//preventEnter: true,
				submitBtn: null,
				showPrompt: false
			}).on("ev_loadData", function (e, data) {
				if (data && data.wire_type) {
					wireType = data.wire_type;
				};
				form2g5g_data = data;
				
				//iptv data
				cur_mode = data.isp_special_mode;

				if ($.su.module.link_agg_and_iptv_c4000v1) {
					cur_lan1 = data.isp_special_lan2;
					cur_lan2 = data.isp_special_lan3;
					cur_lan3 = data.isp_special_lan4;
					cur_lan4 = data.isp_special_lan5;
				}
				else if ($.su.module.link_agg_and_iptv_c5400x) {
					cur_lan1 = data.isp_special_lan5;
					cur_lan2 = data.isp_special_lan6;
					cur_lan3 = data.isp_special_lan7;
					cur_lan4 = data.isp_special_lan8;
				}
				else {
					cur_lan1 = data.isp_special_lan1;
					cur_lan2 = data.isp_special_lan2;
					cur_lan3 = data.isp_special_lan3;
					cur_lan4 = data.isp_special_lan4;
				}

				cur_internet_vlanid = data.isp_special_internet_vid;
				cur_internet_vlanpri = data.isp_special_internet_vprio;
				cur_internet_vlancheck = data.isp_special_internet_tag;
				cur_ipphone_vlanid = data.isp_special_ipphone_vid;
				cur_ipphone_vlanpri = data.isp_special_ipphone_vprio;
				cur_iptv_vlanid = data.isp_special_iptv_vid;
				cur_iptv_vlanpri = data.isp_special_iptv_vprio;
				cur_iptv_multi_vlanid = data.isp_special_mciptv_vid;
				cur_iptv_multi_vlanpri = data.isp_special_mciptv_vprio;
				cur_iptv_multi_vlancheck = data.isp_special_mciptv_enable;				
				if(data.isp_special_enable == "off"){
			        $("#isp-special-mode").combobox("setValue", "none");
					cur_tran_mode = "none";
			    }
				else{
					cur_tran_mode = cur_mode;
				}
							
				portModule.disablePort();

				var support_please_select = data.region_support_please_select;
				var quicksetup_saved = data.time_quicksetup;
				if (support_please_select == "yes") {
					if (quicksetup_saved == "no") {
						$("input#combo-time-zone").combobox("setValue", "");
					}
				}

				//wireless部分数据加载
				//2g
				if (data.wireless_2g_enable == "on") {
					$("#wireless_2g_disabled_all").val("off");
				}
				else {
					$("#wireless_2g_disabled_all").val("on");
				}

				if (data.wireless_5g_enable == "on") {
					$("#wireless_5g_disabled_all").val("off");
				}
				else {
					$("#wireless_5g_disabled_all").val("on");
				}
				encryption_2g = data.wireless_2g_encryption || "psk";
				wep_select_2g = data.wireless_2g_wep_select;
				wep_format_2g = data["wireless_2g_wep_format" + wep_select_2g];
				wep_type_2g = data["wireless_2g_wep_type" + wep_select_2g];

				var keyContainer2g = $("input#txt-wireless-password-2g");
				var wpa2g = $("input#wpa_key_2g").val(data.wireless_2g_wpa_key).prop("disabled", true);
				var psk2g = $("input#psk_key_2g").val(data.wireless_2g_psk_key).prop("disabled", true);
				var wep12g = $("input#wep_key1_2g").val(data.wireless_2g_wep_key1).prop("disabled", true);
				var wep22g = $("input#wep_key2_2g").val(data.wireless_2g_wep_key2).prop("disabled", true);
				var wep32g = $("input#wep_key3_2g").val(data.wireless_2g_wep_key3).prop("disabled", true);
				var wep42g = $("input#wep_key4_2g").val(data.wireless_2g_wep_key4).prop("disabled", true);

				$("input#wireless_2g_encryption").val(encryption_2g);

				wirelessSettings.enable2g = data.wireless_2g_enable;
				wirelessSettings.ssid2g = data.wireless_2g_ssid;
				wirelessSettings.hide2g = data.wireless_2g_hidden;
				// wirelessSettings.wireless_2g_disabled = data.wireless_2g_disabled;

				switch (encryption_2g) {
					case "psk_sae":
					case "psk":
						keyContainer2g.textbox("setValue", data.wireless_2g_psk_key);
						wirelessSettings.pwd2g = data.wireless_2g_psk_key;
						psk2g.prop("disabled", false);
						break;
					case "wep":
						var keyIndex = data.wireless_2g_wep_select;
						keyContainer2g.textbox("setValue", data["wireless_2g_wep_key" + keyIndex]);
						wirelessSettings.pwd2g = data["wireless_2g_wep_key" + keyIndex];
						$("input#wep_key" + keyIndex + "_2g").attr("wep_key_selected", true).prop("disabled", false);
						break;
					case "wpa3":
					case "wpa":
						keyContainer2g.textbox("setValue", data.wireless_2g_wpa_key);
						wirelessSettings.pwd2g = data.wireless_2g_wpa_key;
						wpa2g.prop("disabled", false);
						break;
					default:
						wirelessSettings.pwd2g = "";
						break;
				};

				//5g
				encryption_5g = data.wireless_5g_encryption || "psk";
				wep_select_5g = data.wireless_5g_wep_select;
				wep_format_5g = data["wireless_5g_wep_format" + wep_select_5g];
				wep_type_5g = data["wireless_5g_wep_type" + wep_select_5g];

				var keyContainer5g = $("input#txt-wireless-password-5g");
				var wpa5g = $("input#wpa_key_5g").val(data.wireless_5g_wpa_key).prop("disabled", true);
				var psk5g = $("input#psk_key_5g").val(data.wireless_5g_psk_key).prop("disabled", true);
				var wep15g = $("input#wep_key1_5g").val(data.wireless_5g_wep_key1).prop("disabled", true);
				var wep25g = $("input#wep_key2_5g").val(data.wireless_5g_wep_key2).prop("disabled", true);
				var wep35g = $("input#wep_key3_5g").val(data.wireless_5g_wep_key3).prop("disabled", true);
				var wep45g = $("input#wep_key4_5g").val(data.wireless_5g_wep_key4).prop("disabled", true);

				$("input#wireless_5g_encryption").val(encryption_5g);

				wirelessSettings.enable5g = data.wireless_5g_enable;
				wirelessSettings.ssid5g = data.wireless_5g_ssid;
				wirelessSettings.hide5g = data.wireless_5g_hidden;
				// wirelessSettings.wireless_5g_disabled = data.wireless_5g_disabled;

				switch (encryption_5g) {
					case "psk_sae":
					case "psk":
						keyContainer5g.textbox("setValue", data.wireless_5g_psk_key);
						wirelessSettings.pwd5g = data.wireless_5g_psk_key;
						psk5g.prop("disabled", false);
						break;
					case "wep":
						var keyIndex = data.wireless_5g_wep_select;
						keyContainer5g.textbox("setValue", data["wireless_5g_wep_key" + keyIndex]);
						wirelessSettings.pwd5g = data["wireless_5g_wep_key" + keyIndex];
						$("input#wep_key" + keyIndex + "_5g").attr("wep_key_selected", true).prop("disabled", false);
						break;
					case "wpa3":
					case "wpa":
						keyContainer5g.textbox("setValue", data.wireless_5g_wpa_key);
						wirelessSettings.pwd5g = data.wireless_5g_wpa_key;
						wpa5g.prop("disabled", false);
						break;
					default:
						wirelessSettings.pwd5g = "";
						break;
				};

				//判断国家地区是否支持信道
				var regionCapability = data.region_capability;
				var channel5g = regionCapability ? regionCapability.channel_5g : {};
				var channel52g = regionCapability ? regionCapability.channel_5g_2 : {};

				if ($.isEmptyObject(channel5g)) {
					wireless_5g_region_enable = false;
					$("input#wireless_5g_region_enable").val("off");
				} else {
					wireless_5g_region_enable = true;
					$("input#wireless_5g_region_enable").val("on");
				};
				if( $.isEmptyObject(channel52g) ){

				}

				tribandModule.doubleThridChange(regionCapability);

				//5g_2
				tribandModule.formLoadData(data, wirelessSettings);
				smartModule.formLoadData(data,firstLoad);
				if(firstLoad){
					firstLoad = false;
				}

				var v1 = data.wireless_5g_disabled == "on";
				var v2 = data.wireless_2g_disabled == "on";

				// if(v1){
				//     $("#chk-enable-wireless-radio-2g").checkbox("disable");
				//     $("#txt-wireless-name-ssid-2g").textbox("disable");
				//     $("#chk-wireless-enable-ssid-2g").checkbox("disable");
				//     $("#txt-wireless-password-2g").textbox("disable");
				// }else{
				$("#chk-enable-wireless-radio-2g").checkbox("enable");
				$("#txt-wireless-name-ssid-2g").textbox("enable");
				$("#chk-wireless-enable-ssid-2g").checkbox("enable");
				$("#txt-wireless-password-2g").textbox("enable");
				// }

				// if(v2){
				//     $("#chk-enable-wireless-radio-5g").checkbox("disable");
				//     $("#txt-wireless-name-ssid-5g").textbox("disable");
				//     $("#chk-wireless-enable-ssid-5g").checkbox("disable");
				//     $("#txt-wireless-password-5g").textbox("disable");
				// }else{
				$("#chk-enable-wireless-radio-5g").checkbox("enable");
				$("#txt-wireless-name-ssid-5g").textbox("enable");
				$("#chk-wireless-enable-ssid-5g").checkbox("enable");
				$("#txt-wireless-password-5g").textbox("enable");
				// }

				var t = "";
				if (!wireless_5g_region_enable) {
					t += $.su.CHAR.ERROR["00000100"];
				};


				var result = v1 && v2;

				// t = tribandModule.wirelessStatusSet(data,result,t);

				// result = tribandModule.reSetVar(result,data);

				//     if(result){
				//     }else if (v1 && v2){
				//     t+= $.su.CHAR.ERROR["00000099"];
				//     //$("span#wireless-hardware-off-note-content").text($.su.CHAR.ERROR["00000099"];);//($.su.CHAR.QUICK_SETUP.WIRELESS_HARDWARE_OFF_NOTE);
				//     //$("p#wireless-hardware-off-note").css("display", "block");
				// }else if (v1){
				//     if (wireless_5g_region_enable){
				//         t+= $.su.CHAR.ERROR["00000098"];
				//     };
				//     //$("span#wireless-hardware-off-note-content").text($.su.CHAR.ERROR["00000098"]);//($.su.CHAR.QUICK_SETUP.WIRELESS_HARDWARE_OFF_NOTE_5G);
				//     //$("p#wireless-hardware-off-note").css("display", "block");
				// }else if (v2){
				//     t+= $.su.CHAR.ERROR["00000097"]
				//     //$("span#wireless-hardware-off-note-content").text($.su.CHAR.ERROR["00000097"]);//($.su.CHAR.QUICK_SETUP.WIRELESS_HARDWARE_OFF_NOTE_2G);
				//     //$("p#wireless-hardware-off-note").css("display", "block");
				// }else{
				//     //
				// };

				if (t) {
					$("span#wireless-hardware-off-note-content").text(t);
					$("p#wireless-hardware-off-note").css("display", "block");
				} else {
					$("p#wireless-hardware-off-note").css("display", "none");
				};

				wirelessSettings.changeFlag = false;
				//options状态
				var validateIp = new $.su.vtype('ip');
				var validateDomain = new $.su.vtype('domain');
				if (data.network_l2tp_static_server) {
					if (validateIp.validate(data.network_l2tp_static_server) == true) {
						$("input#txt-l2tp-primary-dns-static").textbox('setTips', $.su.CHAR.QUICK_SETUP.OPTIONAL);
					}
					else {
						$("input#txt-l2tp-primary-dns-static").textbox('setTips', '');
					}
				}
				if (data.network_pptp_static_server) {
					if (validateIp.validate(data.network_pptp_static_server) == true) {
						$("input#txt-pptp-primary-dns-static").textbox('setTips', $.su.CHAR.QUICK_SETUP.OPTIONAL);
					}
					else {
						$("input#txt-pptp-primary-dns-static").textbox('setTips', '');
					}
				}

				if (data.isp_special_mciptv_enable == "on") {
					$("#isp_special_mciptv_vid").textbox("enable");
					$("#isp_special_mciptv_vprio").combobox("enable");
				} else {
					$("#isp_special_mciptv_vid").textbox("disable");
					$("#isp_special_mciptv_vprio").combobox("disable");
				}
				iptvProxy.read();
			});

			function goToComplete(internet, hook) {
				hook = hook || function () { };
				var noInternetHandler = function () {
					hook && hook();
					quickSetupWizard.wizard("goTo", "setup-complete");
					quickSetupWizard.find("button.button-next[data-name=setup-complete]").button("setText", $.su.CHAR.QUICK_SETUP.FINISH);
					$("div#cloud-account-1").show();
					$("div#cloud-account-0").hide();
					$("div#cloud-account-2").hide();
					quickSetupWizard.find("div.form-step[name=setup-complete] .form-buttons-container").show();
					$.su.layout.doLayout();
				}
				if (!internet) {
					noInternetHandler();
				} else {
					checkInternetProxy.read({}, function () {//网络连接的情况
						hook && hook();
						quickSetupWizard.wizard("goTo", "setup-complete");
						if ($.su.userInfo.token) {
							//设备已登陆云账号
							var username = $.su.func.escapeHtml($.su.userInfo.username);
							$("p#p-quicksetup-congratulations-info-1").html($.su.CHAR.QUICK_SETUP.COMPLETE_INFO_EMAIL_PREFIX + username);
							$("div#cloud-account-2").show();
							$("div#cloud-account-0").hide();
							$("div#cloud-account-1").hide();
							quickSetupWizard.find("button.button-next[data-name=setup-complete]").button("setText", $.su.CHAR.QUICK_SETUP.FINISH);
							quickSetupWizard.find("div.form-step[name=setup-complete] .btn-prev").hide();
							quickSetupWizard.find("div.form-step[name=setup-complete] .form-buttons-container").show();
						} else {
							//设备未登陆云账号
							quickSetupWizard.find("button.button-next[data-name=setup-complete]").button("setText", $.su.CHAR.QUICK_SETUP.NEXT);
							$("div#cloud-account-0").show();
							//load cloud login page
							onReceive({ data: { eType: "ev_goto", url: "login&page=quicksetupLogin" }, source: null, origin: "_self" });
							$("div#cloud-account-1").hide();
							$("div#cloud-account-2").hide();
							quickSetupWizard.find("div.form-step[name=setup-complete] .form-buttons-container").hide();
						}
						$.su.layout.doLayout();

					}, function () {//网络无法连接的情况
						noInternetHandler();
					},function () {//网络无法连接的情况
						noInternetHandler();
					});
				}
			}			
				
function check_iptv_changed()
{

	var new_lan1 = $("#isp_special_lan1").combobox("getValue");
    var new_lan2 = $("#isp_special_lan2").combobox("getValue");
    var new_lan3 = $("#isp_special_lan3").combobox("getValue");
    var new_lan4 = $("#isp_special_lan4").combobox("getValue");

    var new_internet_vlanid = $("#isp_special_internet_vid").textbox("getValue");
    var new_internet_vlanpri = $("#isp_special_internet_vprio").combobox("getValue");
    var tmp = $("#isp_special_internet_tag").checkbox("getValue");
	if(tmp.length == 0)
	{
		new_internet_vlancheck = "off";
	}
	else
	{
		new_internet_vlancheck = "on";
	}
    var new_ipphone_vlanid = $("#isp_special_ipphone_vid").textbox("getValue");
    var new_ipphone_vlanpri = $("#isp_special_ipphone_vprio").combobox("getValue");
    tmp = $("#isp_special_ipphone_tag").checkbox("getValue");
	if(tmp.length == 0)
	{
		new_ipphone_vlancheck = "off";
	}
	else
	{
		new_ipphone_vlancheck = "on";
	}
    var new_iptv_vlanid = $("#isp_special_iptv_vid").textbox("getValue");
    var new_iptv_vlanpri =  $("#isp_special_iptv_vprio").combobox("getValue");
    tmp = $("#isp_special_iptv_tag").checkbox("getValue");
	if(tmp.length == 0)
	{
		new_iptv_vlancheck = "off";
	}
	else
	{
		new_iptv_vlancheck = "on";
	}
    var new_iptv_multi_vlanid = $("#isp_special_mciptv_vid").textbox("getValue");
    var new_iptv_multi_vlanpri = $("#isp_special_mciptv_vprio").combobox("getValue");
	tmp = $("#isp_special_mciptv_enable").checkbox("getValue");
	if(tmp.length == 0)
	{
		new_iptv_multi_vlancheck = "off";
	}
	else
	{
		new_iptv_multi_vlancheck = "on";
	}
		
	var new_mode = $("#isp-special-mode").combobox("getValue");
	
	if(new_mode != cur_tran_mode)
	{
		return true;
	}
	if(new_mode == "Custom" )
	{
		if(!(new_lan1 == cur_lan1 && new_lan2 == cur_lan2 && new_lan3 == cur_lan3 && new_lan4 == cur_lan4 
			&& new_internet_vlanid == cur_internet_vlanid && new_internet_vlanpri == cur_internet_vlanpri && new_internet_vlancheck == cur_internet_vlancheck
            && new_ipphone_vlanid == cur_ipphone_vlanid && new_ipphone_vlanpri == cur_ipphone_vlanpri && new_ipphone_vlancheck == cur_ipphone_vlancheck
            && new_iptv_vlanid == cur_iptv_vlanid && new_iptv_vlanpri == cur_iptv_vlanpri && new_iptv_vlancheck == cur_iptv_vlancheck
            && new_iptv_multi_vlancheck == cur_iptv_multi_vlancheck))
		{
			return true;
		}
		else if(new_iptv_multi_vlancheck == "on")
		{	
			if(new_iptv_multi_vlanid != cur_iptv_multi_vlanid || new_iptv_multi_vlanpri != cur_iptv_multi_vlanpri)
			{
				return true;
			}
		}

	}
	if(new_mode == "Bridge")
	{
		if(new_lan1 != cur_lan1 || new_lan2 != cur_lan2 || new_lan3 != cur_lan3 || new_lan4 != cur_lan4)
		{
			return true;
		}
	
	}
	
	return false;	
}

function disableIptv() {
    $("#isp-special-mode").combobox("setTips", $.su.CHAR.ERROR["00000105"]);
    $("#isp-special-mode").combobox("disable");
}

			setButtonStatus.step1();
			setButtonStatus.step2();
			setButtonStatus.step3();
			setButtonStatus.step4();

			quicksetupForm.on("ev_loadData", function () {
				setButtonStatus.step1();
				setButtonStatus.step2();
				setButtonStatus.step3();
				setButtonStatus.step4();
			});
			$.su.loading.hide("quick_setup_quick_setup");

			//卸载时候调用
			$.su.app.runningModule.addUnloadHandler(function () {
				clearInterval(checkRouterTime);
				clearInterval(checkInternetTime);
				clearInterval(detectInternetConnectionTime);
			});

		});
//]]>
	</script>
</body>

</html>
