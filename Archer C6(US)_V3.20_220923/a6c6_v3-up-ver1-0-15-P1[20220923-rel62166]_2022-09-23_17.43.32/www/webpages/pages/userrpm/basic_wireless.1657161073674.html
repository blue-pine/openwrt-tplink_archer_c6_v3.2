<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Wireless</title>
</head>

<body>
<div class="func_container">
	<div id="smart_connect" class="hidden">
		<input type="text" id="enable_smart_connect" name="smart_enable" value="" />
		<p id="smart_connect_note" class="note first-line"></p>
	</div>
	<div id="wire_setting">
    	<form id="wireless_setting">
	    	<input type="text"  id="status_2g" name="wireless_2g_enable" value="" />
	    	<input type="text"  id="network_name_2g" name="wireless_2g_ssid" value="" />
	    	<input type="checkbox"  id="enable_ssid_2g" name="wireless_2g_hidden" value="" />
	    	<input type="text" id="encry_password_2g" name="wireless_2g_encry_password" />

	    	<input type="hidden" name="wireless_2g_psk_key" id="basic_wire_psk_key_2g" disabled="disabled" />
	    	<input type="hidden" name="wireless_2g_wpa_key" id="basic_wire_wpa_key_2g" disabled="disabled" />

	    	<input type="hidden" name="wireless_2g_encryption" id="wireless_2g_encryption" disabled="disabled"  />
	    	<input type="hidden" name="wireless_2g_psk_version" id="wireless_2g_psk_version" disabled="disabled"  />
	    	<input type="hidden" name="wireless_2g_psk_cipher" id="wireless_2g_psk_cipher" disabled="disabled"   />

	    	<input type="hidden" id="wep_key1_2g" name="wireless_2g_wep_key1" disabled="disabled" />
	    	<input type="hidden" id="wep_key2_2g" name="wireless_2g_wep_key2" disabled="disabled" />
	    	<input type="hidden" id="wep_key3_2g" name="wireless_2g_wep_key3" disabled="disabled" />
	    	<input type="hidden" id="wep_key4_2g" name="wireless_2g_wep_key4" disabled="disabled" />

	   <!--  </form> -->

		<!-- <form id="wireless_setting"> -->
	    	<input type="text"  id="status_5g" name="wireless_5g_enable" value="" />
	    	<input type="text"  id="network_name_5g" name="wireless_5g_ssid" value="" />
	    	<input type="checkbox"  id="enable_ssid_5g" name="wireless_5g_hidden" value="" />
	    	<input type="text" id="encry_password_5g" name="wireless_5g_encry_password"/>

	    	<input type="hidden" name="wireless_5g_psk_key" id="basic_wire_psk_key_5g" disabled="disabled" />
	    	<input type="hidden" name="wireless_5g_wpa_key" id="basic_wire_wpa_key_5g" disabled="disabled" />

	    	<input type="hidden" name="wireless_5g_encryption" id="wireless_5g_encryption" disabled="disabled"  />
	    	<input type="hidden" name="wireless_5g_psk_version" id="wireless_5g_psk_version" disabled="disabled"  />
	    	<input type="hidden" name="wireless_5g_psk_cipher" id="wireless_5g_psk_cipher" disabled="disabled"   />

	    	<input type="hidden" id="wep_key1_5g" name="wireless_5g_wep_key1" disabled="disabled" />
	    	<input type="hidden" id="wep_key2_5g" name="wireless_5g_wep_key2" disabled="disabled" />
	    	<input type="hidden" id="wep_key3_5g" name="wireless_5g_wep_key3" disabled="disabled" />
	    	<input type="hidden" id="wep_key4_5g" name="wireless_5g_wep_key4" disabled="disabled" />

			 <!--  </form> -->
			<div id="field_52g" class="hidden">
		    	<input type="text"  id="status_52g" name="wireless_5g_2_enable" value="" disabled/>
		    	<input type="text"  id="network_name_52g" name="wireless_5g_2_ssid" value="" disabled/>
		    	<input type="checkbox"  id="enable_ssid_52g" name="wireless_5g_2_hidden" value="" disabled />
		    	<input type="text" id="encry_password_52g" name="wireless_5g_2_encry_password" disabled/>

		    	<input type="hidden" name="wireless_5g_2_psk_key" id="basic_wire_psk_key_52g" disabled="disabled" />
		    	<input type="hidden" name="wireless_5g_2_wpa_key" id="basic_wire_wpa_key_52g" disabled="disabled" />

		    	<input type="hidden" name="wireless_5g_2_encryption" id="wireless_52g_encryption" disabled="disabled"  />
		    	<input type="hidden" name="wireless_5g_2_psk_version" id="wireless_52g_psk_version" disabled="disabled"  />
		    	<input type="hidden" name="wireless_5g_2_psk_cipher" id="wireless_52g_psk_cipher" disabled="disabled"   />

		    	<input type="hidden" id="wep_key1_52g" name="wireless_5g_2_wep_key1" disabled="disabled" />
		    	<input type="hidden" id="wep_key2_52g" name="wireless_5g_2_wep_key2" disabled="disabled" />
		    	<input type="hidden" id="wep_key3_52g" name="wireless_5g_2_wep_key3" disabled="disabled" />
		    	<input type="hidden" id="wep_key4_52g" name="wireless_5g_2_wep_key4" disabled="disabled" />
		    </div>


	    	<input type="hidden"  id="wireless_2g_disabled_all" name="wireless_2g_disabled_all" value="on"/>
	    	<input type="hidden"  id="wireless_5g_disabled_all" name="wireless_5g_disabled_all" value="on"/>
	    	<input type="hidden"  id="wireless_52g_disabled_all" name="wireless_5g_2_disabled_all" value="on" disabled/>

			<p class="note hidden" id="not_support_5g">
		    	<span class="title note-title"></span>
		    	<span class="text" id="not_support_5g_text"></span>
		    </p>
			<p class="note hidden" id="note_title_all">
		    	<span class="title note-title"></span>
		    	<span class="text" id="note_title_text"></span>
		    </p>
	    </form>

	    <button id="total_save" type="button"></button> 
		<p id="note" class="note"></p>

		<div id="notice" class="wireless-confirm-msg">
			<h4 class="title">
				<span class="icon" ></span>
				<span class="text text1" id="encryption_2g_notice"></span>
				<span class="text text2" id="encryption_5g_notice"></span>
				<span class="text text2" id="encryption_52g_notice"></span>
				<span class="text text3" id="encryption_sure"></span>
			</h4>
		</div>
	</div>

	<div id="help_basic_wireless"></div>
</div>
<script type="text/javascript">

try{
    $
}catch(e){
    location.href = "/";
};

$(document).ready(function(e){

	$.su.module = $.su.module || {};
	var tribandModule = $.su.module.triband.basicWireless();
	var smartModule = $.su.module.smart.basicWireless(tribandModule);
	var URL_REGION_NEW = $.su.url("/admin/wireless?form=region");

	var URL_WIRELESS_2G_5G_NEW = $.su.url("/admin/wireless?form=wireless_2g&form=wireless_5g");

	var encryption_2g = "";
	var encryption_5g = "";
	var ssid_2g = "";
	var ssid_5g = "";
	var wep_select_2g    =  "";
	var wep_select_5g    =  "";

	var wep_format_2g    =  "";
	var wep_format_5g    =  "";

	var wep_type_2g    =  "";
	var wep_type_5g    =  "";

	var new_encryption_2g = "";
	var new_encryption_5g = "";

	var form2g5g_data = {};

	var wireless_2g_disabled = "off";
	var wireless_2g_disabled_all = "off";

	var wireless_5g_disabled = "off";
	var wireless_5g_disabled_all = "off";

	var cur_region_data = {};

	$("span.note-title").text($.su.CHAR.OPERATION.NOTE);
	$("#not_support_5g_text").html($.su.CHAR.ERROR["00000100"]);
	$("#note_title_text").html($.su.CHAR.SYSPARA.SWITCH_NOTICE);
	$("p#smart_connect_note").text($.su.CHAR.WIRELESS.SMART_CONNECT_NOTE);
	$("div#wire_setting").panel({
		title: $.su.CHAR.BASIC_WIRELESS.TITLE
	});

	$("input#status_2g").checkbox({
		fieldLabel: $.su.CHAR.BASIC_WIRELESS.MODE_2G,
		tips:"",
		tipsCls:"s",
		labelCls: "l",
		items: [
			{boxlabel: $.su.CHAR.BASIC_WIRELESS.ENABLE_WIRELESS, uncheckedValue:"off", inputValue: "on", id: "chk_enable_wireless_24g"}
		]
	}).on("ev_change", function(e, oldValue, newValue){
		if(newValue.length == 0)
		{
			$("#wireless_2g_disabled_all").val("on");
		}
		else
		{
			$("#wireless_2g_disabled_all").val("off");
		}
	});

	$("input#network_name_2g").textbox({
		fieldLabel: $.su.CHAR.BASIC_WIRELESS.WIRELESS_NETWORK_NAME,
		labelCls: "l",
		vtype:"string_visible_allow_blank",
		maxLength:32,
		allowBlank:false,
		autoTrim: false,
		tipsCls:"after-checkbox l",
		cls: 'inline'
	});

	$("input#enable_ssid_2g").checkbox({
		fieldLabel: null,
		cls: "inline-block",
		items: [
			{boxlabel: $.su.CHAR.BASIC_WIRELESS.HIDE_SSID,  uncheckedValue:"off", inputValue: "on", id: "chk_enable_ssid_broadcast_2g"}
		]
	});

	$("input#encry_password_2g").textbox({
		fieldLabel: $.su.CHAR.BASIC_WIRELESS.WIRELESS_PASSWORD,
		labelCls: "l",
		autoTrim:false,
		maxLength:64
	});

	$("input#status_5g").checkbox({
		fieldLabel: $.su.CHAR.BASIC_WIRELESS.MODE_5G,
		labelCls: "l",
		tips:"",
		tipsCls:"s",
		cls:"part-separate",
		items: [
			{boxlabel: $.su.CHAR.BASIC_WIRELESS.ENABLE_WIRELESS, uncheckedValue:"off", inputValue: "on", id: "chk_enable_wireless_5g"}
		]
	}).on("ev_change", function(e, oldValue, newValue){
		if(newValue.length == 0)
		{
			$("#wireless_5g_disabled_all").val("on");
		}
		else
		{
			$("#wireless_5g_disabled_all").val("off");
		}
	});

	$("input#network_name_5g").textbox({
		fieldLabel: $.su.CHAR.BASIC_WIRELESS.WIRELESS_NETWORK_NAME,
		labelCls: "l",
		vtype:"string_visible_allow_blank",
		maxLength:32,
		allowBlank:false,
		autoTrim:false,
		tipsCls:"after-checkbox l",
		cls: 'inline'
	});

	$("input#enable_ssid_5g").checkbox({
		fieldLabel: null,
		cls: "inline-block",
		items: [
			{boxlabel: $.su.CHAR.BASIC_WIRELESS.HIDE_SSID,  uncheckedValue:"off", inputValue: "on", id: "chk_enable_ssid_broadcast_5g"}
		]
	});

	$("input#encry_password_5g").textbox({
		fieldLabel: $.su.CHAR.BASIC_WIRELESS.WIRELESS_PASSWORD,
		labelCls: "l",
		autoTrim:false,
		maxLength: 64
	});

	var regionProxy = new $.su.Proxy({
		url:URL_REGION_NEW,
		async:false
	});

	regionProxy.read({},function(data){
		cur_region_data = data.capability;
	});

	tribandModule.init();

	smartModule.init();

	function validator_form_2g(){
		var val = $("input#encry_password_2g").textbox("getValue");
			if(val == "")
			{
				$("#basic_wire_psk_key_2g").prop("disabled",true);
				$("#basic_wire_wpa_key_2g").prop("disabled",true);

				$("#wireless_2g_psk_version").prop("disabled",true);
				$("#wireless_2g_psk_cipher").prop("disabled",true);

				$("#wep_key1_2g").prop("disabled",true);
				$("#wep_key2_2g").prop("disabled",true);
				$("#wep_key3_2g").prop("disabled",true);
				$("#wep_key4_2g").prop("disabled",true);

				$("#wireless_2g_encryption").prop("disabled",false);
				$("#wireless_2g_encryption").val("none");
				new_encryption_2g = "none";
			}
			else
			{
				var encryption = encryption_2g;
				if( encryption == "none")
				{
					var val = $("input#encry_password_2g").textbox("getValue");
					if(val == "")
					{
						$("#wireless_2g_encryption").val("");
						$("#wireless_2g_psk_version").val("");
						$("#wireless_2g_psk_cipher").val("");
						$("#basic_wire_psk_key_2g").val("");

						$("#wireless_2g_encryption").prop("disabled",true);
						$("#wireless_2g_psk_version").prop("disabled",true);
						$("#wireless_2g_psk_cipher").prop("disabled",true);
						$("#basic_wire_psk_key_2g").prop("disabled",true);
						new_encryption_2g = "none";
					}
					else
					{
						var reg = /^([A-Za-z0-9\`\~\!\@\#\$\%\^\&\*\(\)\-\=\_\+\[\]\{\}\;\:\'\"\\\|\/\?\.\,\<\>\ ]{8,63}|[0-9a-fA-F]{8,64})$/;
						if(reg.test(val))
						{
							//return true;
						}
						else
						{
							$("input#encry_password_2g").textbox("setError",$.su.CHAR.ERROR["00000066"]);
							return false;
						}

						$("#wireless_2g_encryption").val("psk");
						$("#wireless_2g_psk_version").val("rsn");
						$("#wireless_2g_psk_cipher").val("aes");
						$("#basic_wire_psk_key_2g").val(val);

						$("#wireless_2g_encryption").prop("disabled",false);
						$("#wireless_2g_psk_version").prop("disabled",false);
						$("#wireless_2g_psk_cipher").prop("disabled",false);
						$("#basic_wire_psk_key_2g").prop("disabled",false);
						new_encryption_2g = "psk";
					}
				}
				if( encryption == "wpa" || encryption == "wpa3")
				{
					var val = $("input#encry_password_2g").textbox("getValue");
					var reg = /^[A-Za-z0-9\`\~\!\@\#\$\%\^\&\*\(\)\-\=\_\+\[\]\{\}\;\:\'\"\\\|\/\?\.\,\<\>\ ]{1,64}$/;
					if(reg.test(val))
					{
						//return true;
					}
					else
					{
						$("input#encry_password_2g").textbox("setError",$.su.CHAR.ERROR["00000073"]);
						return false;
					}

					$("#basic_wire_wpa_key_2g").val(val);
					new_encryption_2g = encryption;
				}
				if(encryption == "psk" || encryption == "psk_sae")
				{
					
					var val = $("input#encry_password_2g").textbox("getValue");
					var reg_64 = /^([A-Za-z0-9\`\~\!\@\#\$\%\^\&\*\(\)\-\=\_\+\[\]\{\}\;\:\'\"\\\|\/\?\.\,\<\>\ ]{8,63}|[0-9a-fA-F]{8,64})$/;
					var reg_63 = /^([A-Za-z0-9\`\~\!\@\#\$\%\^\&\*\(\)\-\=\_\+\[\]\{\}\;\:\'\"\\\|\/\?\.\,\<\>\ ]{8,63})$/;
					var reg = encryption == "psk" ? reg_64 : reg_63;
					if(reg.test(val))
					{
						//return true;
					}
					else
					{
						var errTips = encryption == "psk" ? $.su.CHAR.ERROR["00000066"] : $.su.CHAR.ERROR["00004193"];
						$("input#encry_password_2g").textbox("setError", errTips);
						return false;
					}
					new_encryption_2g = encryption;
				}
				if(encryption == "wep")
				{
					var keyIndex = wep_select_2g;
					var format = wep_format_2g;
					var type = wep_type_2g;
					var key = $("input#encry_password_2g").textbox("getValue");
				
					var asc_64_reg = /^[A-Za-z0-9\`\~\!\@\#\$\%\^\&\*\(\)\-\=\_\+\[\]\{\}\;\:\'\"\\\|\/\?\.\,\<\>\ ]{5}$/;
					var asc_128_reg = /^[A-Za-z0-9\`\~\!\@\#\$\%\^\&\*\(\)\-\=\_\+\[\]\{\}\;\:\'\"\\\|\/\?\.\,\<\>\ ]{13}$/;
					var asc_152_reg = /^[A-Za-z0-9\`\~\!\@\#\$\%\^\&\*\(\)\-\=\_\+\[\]\{\}\;\:\'\"\\\|\/\?\.\,\<\>\ ]{16}$/;

					var hex_64_reg = /^[0-9a-fA-F]{10}$/;
					var hex_128_reg = /^[0-9a-fA-F]{26}$/;
					var hex_152_reg = /^[0-9a-fA-F]{32}$/;

					if(format == "asic")
					{
						if(type == 64)
						{
							if(asc_64_reg.test(key))
							{
								// return true;
							}
							else
							{
								$("input#encry_password_2g").textbox("setError",$.su.CHAR.ERROR["00000068"]);
								return false;
							}
						}
						else if(type == 128)
						{
							if(asc_128_reg.test(key))
							{
								// return true;
							}
							else
							{
								$("input#encry_password_2g").textbox("setError",$.su.CHAR.ERROR["00000070"]);
								return false;
							}
						}
						else
						{
							if(asc_152_reg.test(key))
							{
								// return true;
							}
							else
							{
								$("input#encry_password_2g").textbox("setError",$.su.CHAR.ERROR["00000072"]);
								return false;
							}
						}
					}
					else
					{
						if(type == 64)
						{
							if(hex_64_reg.test(key))
							{
								// return true;
							}
							else
							{
								$("input#encry_password_2g").textbox("setError",$.su.CHAR.ERROR["00000067"]);
								return false;
							}
						}
						else if(type == 128)
						{
							if(hex_128_reg.test(key))
							{
								// return true;
							}
							else
							{
								$("input#encry_password_2g").textbox("setError",$.su.CHAR.ERROR["00000069"]);
								return false;
							}
						}
						else
						{
							if(hex_152_reg.test(key))
							{
								// return true;
							}
							else
							{
								$("input#encry_password_2g").textbox("setError",$.su.CHAR.ERROR["00000071"]);
								return false;
							}
						}
					}
					new_encryption_2g = "wep";
				}
			}
		return true;
	}

	function validator_form_5g(){
			var val = $("input#encry_password_5g").textbox("getValue");
			if(val == "")
			{
				$("#basic_wire_psk_key_5g").prop("disabled",true);
				$("#basic_wire_wpa_key_5g").prop("disabled",true);

				$("#wireless_5g_psk_version").prop("disabled",true);
				$("#wireless_5g_psk_cipher").prop("disabled",true);

				$("#wep_key1_5g").prop("disabled",true);
				$("#wep_key2_5g").prop("disabled",true);
				$("#wep_key3_5g").prop("disabled",true);
				$("#wep_key4_5g").prop("disabled",true);

				$("#wireless_5g_encryption").prop("disabled",false);
				$("#wireless_5g_encryption").val("none");
				new_encryption_5g = "none";
			}
			else
			{
				var encryption = encryption_5g;
				if( encryption == "none")
				{
					var val = $("input#encry_password_5g").textbox("getValue");
					if(val == "")
					{
						$("#wireless_5g_encryption").val("");
						$("#wireless_5g_psk_version").val("");
						$("#wireless_5g_psk_cipher").val("");
						$("#wireless_5g_psk_key").val("");

						$("#wireless_5g_encryption").prop("disabled",true);
						$("#wireless_5g_psk_version").prop("disabled",true);
						$("#wireless_5g_psk_cipher").prop("disabled",true);
						$("#basic_wire_psk_key_5g").prop("disabled",true);

						new_encryption_5g = "none";
					}
					else
					{
						var reg = /^([A-Za-z0-9\`\~\!\@\#\$\%\^\&\*\(\)\-\=\_\+\[\]\{\}\;\:\'\"\\\|\/\?\.\,\<\>\ ]{8,63}|[0-9a-fA-F]{8,64})$/;
						if(reg.test(val))
						{
							//return true;
						}
						else
						{
							$("input#encry_password_5g").textbox("setError",$.su.CHAR.ERROR["00000066"]);
							return false;
						}

						$("#wireless_5g_encryption").val("psk");
						$("#wireless_5g_psk_version").val("rsn");
						$("#wireless_5g_psk_cipher").val("aes");
						$("#basic_wire_psk_key_5g").val(val);

						$("#wireless_5g_encryption").prop("disabled",false);
						$("#wireless_5g_psk_version").prop("disabled",false);
						$("#wireless_5g_psk_cipher").prop("disabled",false);
						$("#basic_wire_psk_key_5g").prop("disabled",false);
						new_encryption_5g = "psk";
					}
				}
				if( encryption == "wpa" || encryption == "wpa3")
				{
					var val = $("input#encry_password_5g").textbox("getValue");
					var reg = /^[A-Za-z0-9\`\~\!\@\#\$\%\^\&\*\(\)\-\=\_\+\[\]\{\}\;\:\'\"\\\|\/\?\.\,\<\>\ ]{1,64}$/;
					if(reg.test(val))
					{
						// return true;
					}
					else
					{
						$("input#encry_password_5g").textbox("setError",$.su.CHAR.ERROR["00000073"]);
						return false;
					}

					$("#basic_wire_wpa_key_5g").val(val);
					new_encryption_5g = encryption;
				}
				if(encryption == "psk" || encryption == "psk_sae")
				{
					var val = $("input#encry_password_5g").textbox("getValue");
					var reg_64 = /^([A-Za-z0-9\`\~\!\@\#\$\%\^\&\*\(\)\-\=\_\+\[\]\{\}\;\:\'\"\\\|\/\?\.\,\<\>\ ]{8,63}|[0-9a-fA-F]{8,64})$/;
					var reg_63 = /^([A-Za-z0-9\`\~\!\@\#\$\%\^\&\*\(\)\-\=\_\+\[\]\{\}\;\:\'\"\\\|\/\?\.\,\<\>\ ]{8,63})$/;
					var reg = encryption == "psk" ? reg_64 : reg_63;
					if(reg.test(val))
					{
						// return true;
					}
					else
					{
						var errTips = encryption == "psk" ? $.su.CHAR.ERROR["00000066"] : $.su.CHAR.ERROR["00004193"];
						$("input#encry_password_5g").textbox("setError", errTips);
						return false;
					}
					new_encryption_5g = encryption;
				}
				if(encryption == "wep")
				{
					var keyIndex = wep_select_5g;
					var format = wep_format_5g;
					var type = wep_type_5g;
					var key = $("input#encry_password_5g").textbox("getValue");
				
					var asc_64_reg = /^[A-Za-z0-9\`\~\!\@\#\$\%\^\&\*\(\)\-\=\_\+\[\]\{\}\;\:\'\"\\\|\/\?\.\,\<\>\ ]{5}$/;
					var asc_128_reg = /^[A-Za-z0-9\`\~\!\@\#\$\%\^\&\*\(\)\-\=\_\+\[\]\{\}\;\:\'\"\\\|\/\?\.\,\<\>\ ]{13}$/;
					var asc_152_reg = /^[A-Za-z0-9\`\~\!\@\#\$\%\^\&\*\(\)\-\=\_\+\[\]\{\}\;\:\'\"\\\|\/\?\.\,\<\>\ ]{16}$/;
					

					var hex_64_reg = /^[0-9a-fA-F]{10}$/;
					var hex_128_reg = /^[0-9a-fA-F]{26}$/;
					var hex_152_reg = /^[0-9a-fA-F]{32}$/;

					if(format == "asic")
					{
						if(type == 64)
						{
							if(asc_64_reg.test(key))
							{
								// return true;
							}
							else
							{
								$("input#encry_password_5g").textbox("setError",$.su.CHAR.ERROR["00000068"]);
								return false;
							}
						}
						else if(type == 128)
						{
							if(asc_128_reg.test(key))
							{
								// return true;
							}
							else
							{
								$("input#encry_password_5g").textbox("setError",$.su.CHAR.ERROR["00000070"]);
								return false;
							}
						}
						else
						{
							if(asc_152_reg.test(key))
							{
								// return true;
							}
							else
							{
								$("input#encry_password_5g").textbox("setError",$.su.CHAR.ERROR["00000072"]);
								return false;
							}
						}
					}
					else
					{
						if(type == 64)
						{
							if(hex_64_reg.test(key))
							{
								// return true;
							}
							else
							{
								$("input#encry_password_5g").textbox("setError",$.su.CHAR.ERROR["00000067"]);
								return false;
							}
						}
						else if(type == 128)
						{
							if(hex_128_reg.test(key))
							{
								// return true;
							}
							else
							{
								$("input#encry_password_5g").textbox("setError",$.su.CHAR.ERROR["00000069"]);
								return false;
							}
						}
						else
						{
							if(hex_152_reg.test(key))
							{
								// return true;
							}
							else
							{
								$("input#encry_password_5g").textbox("setError",$.su.CHAR.ERROR["00000071"]);
								return false;
							}
						}
					}
					new_encryption_5g = "wep";
					
				}
			}
			return true;
   }


	function prepare_form_2g(){
		$("#note").html("");
		if(encryption_2g == "none")
		{
			$("#note").html($.su.CHAR.BASIC_WIRELESS.NOTE);

			$("#basic_wire_psk_key_2g").prop("disabled",false);

			$("#basic_wire_wpa_key_2g").prop("disabled",true);

			$("#wireless_2g_encryption").prop("disabled",false);
			$("#wireless_2g_psk_version").prop("disabled",false);
			$("#wireless_2g_psk_cipher").prop("disabled",false);

			$("#wep_key1_2g").prop("disabled",true);
			$("#wep_key2_2g").prop("disabled",true);
			$("#wep_key3_2g").prop("disabled",true);
			$("#wep_key4_2g").prop("disabled",true);
		}
		if(encryption_2g == "psk" || encryption_2g == "psk_sae")
		{
			$("#basic_wire_psk_key_2g").prop("disabled",false);

			$("#basic_wire_wpa_key_2g").prop("disabled",true);

			$("#wireless_2g_encryption").prop("disabled",true);
			$("#wireless_2g_psk_version").prop("disabled",true);
			$("#wireless_2g_psk_cipher").prop("disabled",true);

			$("#wep_key1_2g").prop("disabled",true);
			$("#wep_key2_2g").prop("disabled",true);
			$("#wep_key3_2g").prop("disabled",true);
			$("#wep_key4_2g").prop("disabled",true);
		}
		if(encryption_2g == "wpa" || encryption_2g == "wpa3")
		{
			$("#basic_wire_psk_key_2g").prop("disabled",true);

			$("#basic_wire_wpa_key_2g").prop("disabled",false);

			$("#wireless_2g_encryption").prop("disabled",true);
			$("#wireless_2g_psk_version").prop("disabled",true);
			$("#wireless_2g_psk_cipher").prop("disabled",true);

			$("#wep_key1_2g").prop("disabled",true);
			$("#wep_key2_2g").prop("disabled",true);
			$("#wep_key3_2g").prop("disabled",true);
			$("#wep_key4_2g").prop("disabled",true);
		}
		if(encryption_2g == "wep")
		{
			var index = form2g5g_data.wireless_2g_wep_select;

			$("#basic_wire_wpa_key_2g").prop("disabled",true);

			$("#wireless_2g_encryption").prop("disabled",true);
			$("#wireless_2g_psk_version").prop("disabled",true);
			$("#wireless_2g_psk_cipher").prop("disabled",true);

			$("#basic_wire_psk_key_2g").prop("disabled",true);
			for(var i = 1; i <= 4; i++)
			{
				var temp_id = "#wep_key" + i + "_2g";
				if(index == i)
				{
					$(temp_id).prop("disabled",false);
				}
				else
				{
					$(temp_id).prop("disabled",true);
				}
			}
		}
	}

	function prepare_form_5g(){
		if(encryption_5g == "none")
		{
			$("#note").html($.su.CHAR.BASIC_WIRELESS.NOTE);

			$("#basic_wire_psk_key_5g").prop("disabled",false);
			$("#wep_key1_5g").prop("disabled",true);
			$("#wep_key2_5g").prop("disabled",true);
			$("#wep_key3_5g").prop("disabled",true);
			$("#wep_key4_5g").prop("disabled",true);

			$("#basic_wire_wpa_key_5g").prop("disabled",true);

			$("#wireless_5g_encryption").prop("disabled",false);
			$("#wireless_5g_psk_version").prop("disabled",false);
			$("#wireless_5g_psk_cipher").prop("disabled",false);

			$("#wireless_5g_encryption").val("psk");
			$("#wireless_5g_psk_version").val("auto");
			$("#wireless_5g_psk_cipher").val("auto");
		}
		if(encryption_5g == "psk" || encryption_5g == "psk_sae")
		{
			$("#wireless_5g_encryption").prop("disabled",true);
			$("#wireless_5g_psk_version").prop("disabled",true);
			$("#wireless_5g_psk_key").prop("disabled",true);
			$("#wireless_5g_psk_cipher").prop("disabled",true);

			$("#basic_wire_wpa_key_5g").prop("disabled",true);

			$("#basic_wire_psk_key_5g").prop("disabled",false);
			$("#wep_key1_5g").prop("disabled",true);
			$("#wep_key2_5g").prop("disabled",true);
			$("#wep_key3_5g").prop("disabled",true);
			$("#wep_key4_5g").prop("disabled",true);
		}
		if(encryption_5g == "wpa" || encryption_5g == "wpa3")
		{
			$("#wireless_5g_encryption").prop("disabled",true);
			$("#wireless_5g_psk_version").prop("disabled",true);
			$("#wireless_5g_psk_key").prop("disabled",true);
			$("#wireless_5g_psk_cipher").prop("disabled",true);

			$("#basic_wire_wpa_key_5g").prop("disabled",false);

			$("#basic_wire_psk_key_5g").prop("disabled",true);
			$("#wep_key1_5g").prop("disabled",true);
			$("#wep_key2_5g").prop("disabled",true);
			$("#wep_key3_5g").prop("disabled",true);
			$("#wep_key4_5g").prop("disabled",true);
		}
		if(encryption_5g == "wep")
		{
			var index = form2g5g_data.wireless_5g_wep_select;

			$("#wireless_5g_encryption").prop("disabled",true);
			$("#wireless_5g_psk_version").prop("disabled",true);
			$("#wireless_5g_psk_key").prop("disabled",true);
			$("#wireless_5g_psk_cipher").prop("disabled",true);

			$("#basic_wire_wpa_key_5g").prop("disabled",true);

			$("#basic_wire_psk_key_5g").prop("disabled",true);
			for(var i = 1; i <= 4; i++)
			{
				var temp_id = "#wep_key" + i + "_5g";
				if(index == i)
				{
					$(temp_id).prop("disabled",false);
				}
				else
				{
					$(temp_id).prop("disabled",true);
				}
			}
		}
	}

	

   var prepare_form_func = function(){
		prepare_form_2g();
		smartModule.prepareFormFunc(prepare_form_5g,form2g5g_data);
   };

   var evLoadData = function(data){
		//5g
		encryption_5g = data.wireless_5g_encryption;
		ssid_5g = data.wireless_5g_ssid;
		wep_select_5g = data.wireless_5g_wep_select;
		wep_format_5g = data["wireless_5g_wep_format"+wep_select_5g];
		wep_type_5g   = data["wireless_5g_wep_type"+wep_select_5g];

		if(data.wireless_5g_enable == "on")
		{
			$("#wireless_5g_disabled_all").val("off");
		}
		else
		{
			$("#wireless_5g_disabled_all").val("on");
		}

		// wireless_5g_disabled = data.wireless_5g_disabled;
		// if(data.wireless_5g_disabled == "on")
		// {
		// 	$("input#status_5g").checkbox("disable");
		// 	$("input#network_name_5g").textbox("disable");
		// 	$("input#enable_ssid_5g").checkbox("disable");
		// 	$("input#encry_password_5g").textbox("disable");
		// 	$("#total_save").button("disable");
		// 	if(data.wireless_5g_disabled_by == 0){
		// 		$("span#note_title_text").text($.su.CHAR.SYSPARA.SWITCH_NOTICE);
		// 	}
		// 	else{
		// 		$("span#note_title_text").text($.su.CHAR.SYSPARA.SWITCH_NOTICE2);
		// 	}
		// 	$("#note_title_all").removeClass("hidden");
		// }
		// else
		// {
			$("input#status_5g").checkbox("enable");
			$("input#network_name_5g").textbox("enable");
			$("input#enable_ssid_5g").checkbox("enable");
			$("input#encry_password_5g").textbox("enable");
			$("#total_save").button("enable");
			$("#note_title_all").addClass("hidden");
		// }

		$("#basic_wire_psk_key_5g").val(data.wireless_5g_psk_key);

		$("#wep_key1_5g").val(data.wireless_5g_wep_key1);
		$("#wep_key2_5g").val(data.wireless_5g_wep_key2);
		$("#wep_key3_5g").val(data.wireless_5g_wep_key3);
		$("#wep_key4_5g").val(data.wireless_5g_wep_key4);

		switch(encryption_5g){
			case "psk_sae":
			case 'psk':
				$("input#encry_password_5g").textbox("setValue", form2g5g_data.wireless_5g_psk_key);
				break;
			case 'wpa':
			case 'wpa3':
				$("input#encry_password_5g").textbox("setValue", form2g5g_data.wireless_5g_wpa_key);
				break;
			case 'wep':
				var index = data.wireless_5g_wep_select;
				var id = "wireless_5g_wep_key" + index;
				$("input#encry_password_5g").textbox("setValue", data[id]);
				break;
			default:;
		}
		//5g_2
		tribandModule.initLoadForm52g(data,form2g5g_data);

		regionProxy.read({}, function(data){
			var channel_5g = data.capability.channel_5g;
			if($.isEmptyObject(channel_5g))
			{
				$("input#status_5g").checkbox("disable");
				$("input#network_name_5g").textbox("disable");
				$("input#enable_ssid_5g").checkbox("disable");
				$("input#encry_password_5g").textbox("disable");
				if(wireless_2g_disabled == "on"){
					$("#not_support_5g").addClass("hidden");
				}
				else{
					$("#not_support_5g").removeClass("hidden");
				}
			}
		});
	};

	var wireless2gProxy = new $.su.Proxy({
		url: URL_WIRELESS_2G_5G_NEW
	});

	var formFields = [
		{name: "wireless_2g_enable", mapping: "wireless_2g_enable"},
		{name: "wireless_2g_ssid", mapping: "wireless_2g_ssid"},
		{name: "wireless_2g_hidden", mapping: "wireless_2g_hidden"},

		{name: "wireless_5g_enable", mapping: "wireless_5g_enable"},
		{name: "wireless_5g_ssid", mapping: "wireless_5g_ssid"},
		{name: "wireless_5g_hidden", mapping: "wireless_5g_hidden"}
	];

	var formFields = tribandModule.extendField(formFields);
	var wirelessProxy = tribandModule.changeProxy(wireless2gProxy);
	smartModule.setWirelessProxy(wirelessProxy);
	var smartButtonOffToOn = false;

	var wirelessSettingForm = $("form#wireless_setting").form({
		proxy: wirelessProxy,
		fields: formFields,
		autoLoad:true,
		submitBtn: "#total_save"
	}).on("ev_loadData", function(e,data){
		form2g5g_data = data;
		//2g
		encryption_2g = data.wireless_2g_encryption;
		smartModule.setSmartEncryption2g(encryption_2g);
		$("input#wireless_2g_encryption").val(encryption_2g);
		ssid_2g = data.wireless_2g_ssid;
		wep_select_2g = data.wireless_2g_wep_select;
		wep_format_2g = data["wireless_2g_wep_format"+wep_select_2g];
		wep_type_2g   = data["wireless_2g_wep_type"+wep_select_2g];

		if(data.wireless_2g_enable == "on")
		{
			$("#wireless_2g_disabled_all").val("off");
		}
		else
		{
			$("#wireless_2g_disabled_all").val("on");
		}
		// wireless_2g_disabled = data.wireless_2g_disabled;
		// if(data.wireless_2g_disabled == "on")
		// {
		// 	$("input#status_2g").checkbox("disable");
		// 	$("input#network_name_2g").textbox("disable");
		// 	$("input#enable_ssid_2g").checkbox("disable");
		// 	$("input#encry_password_2g").textbox("disable");
		// 	$("#total_save").button("disable");
		// 	if(data.wireless_2g_disabled_by == 0){
		// 		$("span#note_title_text").text($.su.CHAR.SYSPARA.SWITCH_NOTICE);
		// 	}
		// 	else{
		// 		$("span#note_title_text").text($.su.CHAR.SYSPARA.SWITCH_NOTICE2);
		// 	}
		// 	$("#note_title_all").removeClass("hidden");
		// }
		// else
		// {
			$("input#status_2g").checkbox("enable");
			$("input#network_name_2g").textbox("enable");
			$("input#enable_ssid_2g").checkbox("enable");
			$("input#encry_password_2g").textbox("enable");	
			$("#total_save").button("enable");
			$("#note_title_all").addClass("hidden");	
		// }

		$("#basic_wire_psk_key_2g").val(data.wireless_2g_psk_key);

		$("#wep_key1_2g").val(data.wireless_2g_wep_key1);
		$("#wep_key2_2g").val(data.wireless_2g_wep_key2);
		$("#wep_key3_2g").val(data.wireless_2g_wep_key3);
		$("#wep_key4_2g").val(data.wireless_2g_wep_key4);
		switch(encryption_2g){
			case 'psk_sae':
			case 'psk':
				$("input#wireless_2g_psk_cipher").val(data.wireless_2g_psk_cipher);
				$("input#wireless_2g_psk_version").val(data.wireless_2g_psk_version);
				$("input#encry_password_2g").textbox("setValue", data.wireless_2g_psk_key);
				break;
			case 'wpa3':
			case 'wpa':
				$("input#encry_password_2g").textbox("setValue", data.wireless_2g_wpa_key);
				break;
			case 'wep':
				var index = data.wireless_2g_wep_select;
				var id = "wireless_2g_wep_key" + index;
				$("input#encry_password_2g").textbox("setValue", data[id]);
				break;
			default:;
		}

		smartModule.evLoadData(evLoadData,data);
		prepare_form_func();
		smartModule.smartInitFormStatus(encryption_2g);
	});

 	$("#encryption_2g_notice").html($.su.CHAR.BASIC_WIRELESS.ENCRYPTION_2G_NOTICE);
 	$("#encryption_5g_notice").html($.su.CHAR.BASIC_WIRELESS.ENCRYPTION_5G_NOTICE);
 	$("#encryption_sure").html($.su.CHAR.BASIC_WIRELESS.ENCRYPTION_SURE);

	var msg = $("div#notice").msg({
			closeBtn: false,
			type: "confirm",
			cls:"m warning",
			okHandler: function(){
				post_wireless_data();
			},
			noHandler:function(){
				prepare_form_func();
				$("#wireless_2g_encryption").val(encryption_2g);
				$("#wireless_5g_encryption").val(encryption_5g);
				tribandModule.val("#wireless_52g_encryption");
				return;
			}
	});

	$("#total_save").button({
		text: $.su.CHAR.BASIC_WIRELESS.SAVE,
		cls:"submit",
		handler:function(){
			switch(encryption_2g)
			{
				case "none":
					break;
				case "psk_sae":
				case "psk":
						$("#wireless_setting input[name='wireless_2g_psk_key']").val($("#encry_password_2g").textbox("getValue"));
					break;
				case "wpa3":
				case "wpa":
						// $("#wireless_setting input[name='wireless_2g_wpa_key']").val($("#encry_password_2g").textbox("getValue"));
					break;
				case "wep":
						var id = "#wep_key" + wep_select_2g + "_2g";
 						$(id).val($("#encry_password_2g").textbox("getValue"));
					break;
			};
			switch(encryption_5g)
			{
				case "none":
					break;
				case "psk_sae":
				case "psk":
						$("#wireless_setting input[name='wireless_5g_psk_key']").val($("#encry_password_5g").textbox("getValue"));
					break;
				case "wpa3":
				case "wpa":
						// $("#wireless_setting input[name='wireless_5g_wpa_key']").val($("#encry_password_5g").textbox("getValue"));
					break;
				case "wep":
						var id = "#wep_key" + wep_select_5g + "_5g";
 						$(id).val($("#encry_password_5g").textbox("getValue"));
					break;
			};

			tribandModule.totalSaveHandler();
			var result = smartModule.validator_fun(validator_form_2g,validator_form_5g);
			if(result && $("#wireless_setting").form("validate"))
			{
				var text = "";
				var str1 = $.su.CHAR.BASIC_WIRELESS.ENCRYPTION_NOTICE;
				var str2 = $.su.CHAR.BASIC_WIRELESS.ENCRYPTION_2G_NOTICE;

				var encryption_2g_html = str2;
				encryption_2g_html = smartModule.reSetVar(str1,str2);

				str1 = $.su.CHAR.BASIC_WIRELESS.ENCRYPTION_NO;
				str2 = $.su.CHAR.BASIC_WIRELESS.ENCRYPTION_2G_NO;

				var encryption_2g_no_html = str2;
				var encryption_2g_no_html = smartModule.reSetVar(str1,str2);

				$("#encryption_2g_notice").css({"display":"block"});
				switch (new_encryption_2g){
					case "wep":
						text = $.su.CHAR.WIRELESS.WEP;
						$("#encryption_2g_notice").html(encryption_2g_html.replace("%s",text));
						break;
					case "psk_sae":
						text = $.su.CHAR.WIRELESS.WPA3_WPA2_PERSONAL;
						$("#encryption_2g_notice").html(encryption_2g_html.replace("%s",text));
						break;
					case "psk":
						text = $.su.CHAR.WIRELESS.WPA_WPA2_PERSONAL;
						$("#encryption_2g_notice").html("");
						$("#encryption_2g_notice").css({"display":"none"});
						break;
					case "wpa3":
						text = $.su.CHAR.WIRELESS.WPA3_ENTERPRISE;
						$("#encryption_2g_notice").html(encryption_2g_html.replace("%s",text));
						break;
					case "wpa":
						text = $.su.CHAR.WIRELESS.WPA_WPA2_ENTERPRISE;
						$("#encryption_2g_notice").html(encryption_2g_html.replace("%s",text));
						break;
					default:
						text = $.su.CHAR.WIRELESS.NO_SECURITY;
						$("#encryption_2g_notice").html(encryption_2g_no_html);
						break;
				}

                $("#encryption_5g_notice").css({"display":"none"});
				tribandModule.hide("#encryption_52g_notice");
				smartModule.validate5g(new_encryption_5g);

				var verify2g = new_encryption_2g=="psk" || new_encryption_2g=="psk_sae";
				var verify5g = new_encryption_5g=="psk" || new_encryption_5g=="psk_sae";
				var verify = verify2g && verify5g;
				verify = tribandModule.vertify52g(verify);

                verify = smartModule.getVertify(verify,new_encryption_2g);
 				if(verify)
 				{
 					 post_wireless_data();
 				}
 				else
 				{
 					msg.msg("show");
 				}
				
			}
			else
			{
				return;
			}
		}
	});

	var post_wireless_data = smartModule.postWirelessData;


    var content = ["BASIC_WIRELESS"];
	var helpBasicWireless = new $.su.Help({
			container: "div#help_basic_wireless",
			content: content
	});
});

</script>

</body>
</html>
