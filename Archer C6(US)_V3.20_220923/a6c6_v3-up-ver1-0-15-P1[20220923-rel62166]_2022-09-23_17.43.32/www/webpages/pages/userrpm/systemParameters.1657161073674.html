<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>syspara Control</title>
<style type="text/css">
	#title{
		color: #10abe1;
		font-size: 14px;
		height: 24px;
		border-bottom: 1px solid #d8d8d9;
	}

	#ok{
		margin-left:200px;
	}

	lebel.notice_lbl{
		padding-top:5px;
	}

	table#tbl_dos{
		width:100%;
	}

	td.notice{
		vertical-align:top;
		width:230px;
		margin:0px;
		text-align: left;
		padding-top:15px
	}

	td.value{
		text-align: left;
	}
</style>
</head>

<body>
<div class="func-container">

	 <div id="w24g">
	 	<form id="w24g-setting">
	    	<input type="text"  id="beacon_int_2g" name="beacon_int" value="" />
	    	<input type="text"  id="rts_2g" name="rts" value="" />
            <input type="text"  id="dtim_period_2g" name="dtim_period" value="" />
			<input type="text"  id="wpa_group_rekey_2g" name="wpa_group_rekey" value="" />
			
			<div id="feature2g_container" class="hidden">
				<input type="text"  id="wmm_2g" name="wmm" value="" />
				<input type="text"  id="shortgi_2g" name="shortgi" value="" />
				<input type="text"  id="isolate_2g" name="isolate" value="" />
		    	<input type="text"  id="usb_interference_reduction_2g" name="usb_interference_reduction" value="" />
		    	<p class="note">
					<span class="title note-title"></span>
					<span class="text" id="usb_interference_reduction_tip"></span>
				</p>
			</div>

	    	<p class="note hidden" id="note_title_2g">
	    		<span class="title note-title"></span>
	    		<span class="text" id="note_title_2g_text"></span>
	    	</p>
	    	<button id="w24g_save_btn" name="w24g_save_btn" type="button"></button>
	    </form>
	</div>


	<div id="w5g">
		<form id="w5g-setting">
	    	<input type="text"  id="beacon_int_5g" name="beacon_int" value="" />
	    	<input type="text"  id="rts_5g" name="rts" value="" />
            <input type="text"  id="dtim_period_5g" name="dtim_period" value="" />
			<input type="text"  id="wpa_group_rekey_5g" name="wpa_group_rekey" value="" />

			<div id="feature5g_container" class="hidden">
		    	<input type="text"  id="wmm_5g" name="wmm" value="" />
		    	<input type="text"  id="shortgi_5g" name="shortgi" value="" />
		    	<input type="text"  id="isolate_5g" name="isolate" value="" />
			</div>

		    <p class="note hidden" id="note_title_5g">
		    	<span class="title note-title"></span>
		    	<span class="text" id="note_title_5g_text"></span>
		    </p>
	    </form>
	</div>

	<div id="w52g" class="hidden">
		<form id="w52g-setting">
	    	<input type="text"  id="beacon_int_52g" name="beacon_int" value="" />
	    	<input type="text"  id="rts_52g" name="rts" value="" />
            <input type="text"  id="dtim_period_52g" name="dtim_period" value="" />
			<input type="text"  id="wpa_group_rekey_52g" name="wpa_group_rekey" value="" />

			<div id="feature52g_container" class="hidden">
		    	<input type="text"  id="wmm_52g" name="wmm" value="" />
		    	<input type="text"  id="shortgi_52g" name="shortgi" value="" />
		    	<input type="text"  id="isolate_52g" name="isolate" value="" />
			</div>

		    <p class="note hidden" id="note_title_52g">
		    	<span class="title note-title"></span>
		    	<span class="text" id="note_title_52g_text"></span>
		    </p>
	    </form>
	</div>


	<div id="w24g-wds" class="hidden">
	 	<form id="w24g-wds-setting">
	    	<input type="text"  id="enable_2g" name="enable" value="" />
	    	<div id="ssid_cnt_2g">
		    	<input type="text"  id="ssid_2g" name="ssid" value="" />
		    	
		    	<button type="button" id="syspara_survey_2g" name="syspara_survey"></button>
		    	<input type="text"  id="bssid_2g" name="bssid" value="" />
				<input type="text"  id="wds_mode_2g" name="wds_mode" value="" />
				<input type="text"  id="channel_2g" name="channel" value="" class="hidden"/>

		    	<input type="text"  id="encryption_2g" name="encryption" value="" />
		    	<div id="wpa_cnt_24g">
		    		<input type="text"  id="psk_key_2g" name="psk_key" value="" />
			    </div>
	    	
		    	<div id="wep_cnt_24g">
		    		<input type="text"  id="wep_mode_2g" name="wep_mode" value="" />
		    		<input type="text"  id="wep_select_2g" name="wep_select" value="" />
		    		<div id="key1_cnt_2g">
			    		<input type="text"  id="wep_format1_2g" name="wep_format1" value="" />
			    		<input type="text"  id="wep_key1_2g" name="wep_key1" value="" />
			    	</div>
			    	<div id="key2_cnt_2g">
			    		<input type="text"  id="wep_format2_2g" name="wep_format2" value="" />
			    		<input type="text"  id="wep_key2_2g" name="wep_key2" value="" />
			    	</div>
			    	<div id="key3_cnt_2g">
			    		<input type="text"  id="wep_format3_2g" name="wep_format3" value="" />
			    		<input type="text"  id="wep_key3_2g" name="wep_key3" value="" />
			    	</div>
			    	<div id="key4_cnt_2g">
			    		<input type="text"  id="wep_format4_2g" name="wep_format4" value="" />
			    		<input type="text"  id="wep_key4_2g" name="wep_key4" value="" />
			    	</div>
		    	</div>
		    </div>
		    <p class="note hidden" id="wds_note_title_2g">
	    		<span class="title note-title"></span>
		    	<span class="text" id="wds_note_title_2g_text"></span>
	    	</p>
	    </form>
	 </div>


	<div id="w5g-wds" class="hidden">
	 	<form id="w5g-wds-setting">
	    	<input type="text"  id="enable_5g" name="enable" value="" />
	    	<div id="ssid_cnt_5g">
		    	<input type="text"  id="ssid_5g" name="ssid" value="" />
		    	<button type="button" id="syspara_survey_5g" name="syspara_survey"></button>
		    	<input type="text"  id="bssid_5g" name="bssid" value="" />
				<input type="text"  id="wds_mode_5g" name="wds_mode" value="" />
				<input type="text"  id="channel_5g" name="channel" value="" class="hidden"/>

	    	<input type="text"  id="encryption_5g" name="encryption" value="" />
	    	<div id="wpa_cnt_5g">
	    		<input type="text"  id="psk_key_5g" name="psk_key" value="" />
	    	</div>
		    
		    	<div id="wep_cnt_5g">
		    		<input type="text"  id="wep_mode_5g" name="wep_mode" value="" />
		    		<input type="text"  id="wep_select_5g" name="wep_select" value="" />
		    		<div id="key1_cnt_5g">
			    		<input type="text"  id="wep_format1_5g" name="wep_format1" value="" />
			    		<input type="text"  id="wep_key1_5g" name="wep_key1" value="" />
			    	</div>
			    	<div id="key2_cnt_5g">
			    		<input type="text"  id="wep_format2_5g" name="wep_format2" value="" />
			    		<input type="text"  id="wep_key2_5g" name="wep_key2" value="" />
			    	</div>
			    	<div id="key3_cnt_5g">
			    		<input type="text"  id="wep_format3_5g" name="wep_format3" value="" />
			    		<input type="text"  id="wep_key3_5g" name="wep_key3" value="" />
			    	</div>
			    	<div id="key4_cnt_5g">
			    		<input type="text"  id="wep_format4_5g" name="wep_format4" value="" />
			    		<input type="text"  id="wep_key4_5g" name="wep_key4" value="" />
			    	</div>
		    	</div>
	    	</div>
	    	<p class="note hidden" id="wds_note_title_5g">
	    	<span class="title note-title"></span>
		    	<span class="text" id="wds_note_title_5g_text"></span>
	    </p>
	    </form>
	 </div>
	 
	<div id="w52g-wds" class="hidden">
	 	<form id="w52g-wds-setting">
	 		<input type="text"  id="enable_52g" name="enable" value="" />
	    	<div id="ssid_cnt_52g">
		    	<input type="text"  id="ssid_52g" name="ssid" value="" />
		    	<button type="button" id="syspara_survey_52g" name="syspara_survey"></button>
		    	<input type="text"  id="bssid_52g" name="bssid" value="" />
				<input type="text"  id="wds_mode_52g" name="wds_mode" value="" />

		    	<input type="text"  id="encryption_52g" name="encryption" value="" />
		    	<div id="wpa_cnt_52g">
		    		<input type="text"  id="psk_key_52g" name="psk_key" value="" />
		    	</div>

		    	<div id="wep_cnt_52g">
		    		<input type="text"  id="wep_mode_52g" name="wep_mode" value="" />
		    		<input type="text"  id="wep_select_52g" name="wep_select" value="" />
		    		<div id="key1_cnt_52g">
			    		<input type="text"  id="wep_format1_52g" name="wep_format1" value="" />
			    		<input type="text"  id="wep_key1_52g" name="wep_key1" value="" />
			    	</div>
			    	<div id="key2_cnt_52g">
			    		<input type="text"  id="wep_format2_52g" name="wep_format2" value="" />
			    		<input type="text"  id="wep_key2_52g" name="wep_key2" value="" />
			    	</div>
			    	<div id="key3_cnt_52g">
			    		<input type="text"  id="wep_format3_52g" name="wep_format3" value="" />
			    		<input type="text"  id="wep_key3_52g" name="wep_key3" value="" />
			    	</div>
			    	<div id="key4_cnt_52g">
			    		<input type="text"  id="wep_format4_52g" name="wep_format4" value="" />
			    		<input type="text"  id="wep_key4_52g" name="wep_key4" value="" />
			    	</div>
		    	</div>
	    	</div>
	    	<p class="note hidden" id="wds_note_title_52g">
		    	<span class="title note-title"></span>
		    	<span class="text" id="wds_note_title_52g_text"></span>
	    	</p>
	    </form>
	</div>
	 
	 
	 <div id="wps">
	 	<form id="wps-setting">
	    	<input type="text"  id="wps_status" name="wps" value="" />
	    </form>
	 </div>

	 <div id="nat">
	 	<form id="nat-setting">
	    	<input type="text"  id="nat_enable" name="enable" value="" />
	    	<input type="text"  id="nat_boost_enable" name="boost_enable" class="hidden" value="" />
	    	<input type="button"  id="nat_save_btn" value="" />
	    </form>
	 </div>
	 
	 
	 <div id="level">
	 	<form id="level-setting">
	    	<!-- <input type="text"  id="syspara_level_interval" name="syspara_level_interval" value="" /> -->
	    	<table id="tbl_dos">
	    		<tbody>
	    			<tr>
	    				<td class="notice"><label id="syspara_level_icmp" class="notice_lbl"></label></td>
	    				<td class="value">
	    					<input type="text"  id="icmp_low" name="icmp_low" value="" />
	    					<input type="text"  id="icmp_middle" name="icmp_middle" value="" />
	    					<input type="text"  id="icmp_high" name="icmp_high" value="" />
	    				</td>
	    			</tr>

	    			<tr>
	    				<td class="notice"><label id="syspara_level_udp" class="notice_lbl"></label></td>
	    				<td  class="value">
	    					<input type="text"  id="udp_low" name="udp_low" value="" />
	    					<input type="text"  id="udp_middle" name="udp_middle" value="" />
	    					<input type="text"  id="udp_high" name="udp_high" value="" />
	    				</td>
	    			</tr>

	    			<tr>
	    				<td class="notice"><label id="syspara_level_tcp" class="notice_lbl"></label></td>
	    				<td class="value">
	    					<input type="text"  id="tcp_low" name="syn_low" value="" />
	    					<input type="text"  id="tcp_middle" name="syn_middle" value="" />
	    					<input type="text"  id="tcp_high" name="syn_high" value="" />
	    				</td>
	    			</tr>

	    		</tbody>
	    	</table>
	    </form>
	 </div>
	 
	 <div id="survey">
	 	<div id="result_2g">
		</div>
		<div id="result_5g">
		</div>
		<div id="result_52g">
		</div>
	 </div>

	<!--  <div id="adv">
	 	<form id="adv-setting">
	    	<input type="text"  id="syspara_adv_icmp" name="syspara_adv_icmp" value="" />
	    	<input type="text"  id="syspara_adv_icmpPkt" name="syspara_adv_icmpPkt" value="" />
	    	<input type="text"  id="syspara_adv_udp" name="syspara_adv_udp" value="" />
	    	<input type="text"  id="syspara_adv_udpPkt" name="syspara_adv_udpPkt" value="" />
	    	<input type="text"  id="syspara_adv_tcp" name="syspara_adv_tcp" value="" />
	    	<input type="text"  id="syspara_adv_tcpPkt" name="syspara_adv_tcpPkt" value="" />
	    </form>
	 </div> -->


    <div id="internet_duplex_panel">
    	<form id="internet_duplex_form">
    		<input name="port" value="wan" class="hidden"/>
			<input id="internet_duplex" name="speed"/>
		</form>
	</div>

<!-- 	<div id="led_panel">
		<form id="led_form">
			<input id="led_night_mode" name="enable"/>
			<input id="led_time_start" name="time_start"/>
			<span id="led_time_to" class="led-time-to"></span>
			<input id="led_time_end" name="time_end"/>
		</form>
	</div>
 -->
	<div id="notice_2g">
		<h4 class="title">
	    	<span class="icon"></span>
	 		<span class="text" id="notice_content_2g"></span>
	 	</h4>
	</div>

	<div id="notice_5g">
		<h4 class="title">
	    	<span class="icon"></span>
	 		<span class="text" id="notice_content_5g"></span>
	 	</h4>
	</div>

	<div id="notice_52g">
		<h4 class="title">
	    	<span class="icon"></span>
	 		<span class="text" id="notice_content_52g"></span>
	 	</h4>
	</div>

	<div id="notice_nat_boost" class="hidden">
		<h4 class="title">
	    	<span class="icon"></span>
	 		<span class="text" id="notice_content_nat_boost"></span>
	 	</h4>
	</div>

	<div id="reboot_nat_boost" class="hidden">
		<div id="factory_pro_cnt" class="reboot-loading-msg">
	 		<p id="factory_note"  class="reboot-progressbar-text"></p>
	    	<input id="factory_pro_bar" type="text" />
	    </div>
	</div>

	<div id="help_system_para"></div>

	<div id="usb_interference_save_confirm_qa" class="hidden warning">
		<h4 class="title">
			<span class="icon"></span>
			<span class="text" id="usb_interference_confirm_msg_text"></span>
		</h4>
	</div>
	
	<div id="usb_interference_pro_msg" class="hidden">
		<div class="reboot-loading-msg">
			<p id="reboot_tips"></p>
			<input id="usb_interference_pro" />
		</div>
	</div>

</div>

<script type="text/javascript">

try{
    $
}catch(e){
    location.href = "/";
};
function signal_level (n){
		if(n <= 0)
			return 0;
		else if (n < 10)
			return 1;
		else if (n < 20)
			return 2;
		else if (n < 30)
			return 3;
		else if (n < 50)
			return 4;
		else
			return 5;
	}
$(document).ready(function(){
	$.su.moudle = $.su.moudle || {};
	var tribandModule = $.su.module.triband.systemParameters();
	var wdsModule = $.su.module.wds.systemParameters();
    var boostModule = $.su.module.boost.systemParameters();
	$.su.module.installedModule = {};
    $.su.module.installedModule["tribandModule"] = tribandModule;

	//所有事件被点燃，触发helpLoad事件，然后加载help信息。 因为help信息显示不显示依赖于以下请求的返回数据
	var firedArray = ["support_wds","boost","wireless_2g","wireless_5g"];
	firedArray = tribandModule.setFiredArray(firedArray);
	firedArray = wdsModule.setFiredArray(firedArray);
	$.su.app.runningModule.addWaitingEvents("helpLoad", firedArray);

	///////////////////////// duplex
	var duplexProxy = new $.su.Proxy({
		url: $.su.url('/admin/network?form=port_speed_current')
	});
	var duplexSpeedUrl = $.su.url("/admin/network?form=port_speed_supported");

	var WIRELESS_GUEST_2G_URL_NEW = $.su.url("/admin/wireless?form=guest_2g");
	var WIRELESS_GUEST_5G_URL_NEW = $.su.url("/admin/wireless?form=guest_5g");

	var guest2gProxy = new $.su.Proxy({
		url: WIRELESS_GUEST_2G_URL_NEW
	});

	var guest5gProxy = new $.su.Proxy({
		url: WIRELESS_GUEST_5G_URL_NEW
	});

	$("div#internet_duplex_panel").panel({
		title: $.su.CHAR.INTERNET.DUPLEX,
		collapsible: false
	});

	$("input#internet_duplex").combobox({
		fieldLabel: $.su.CHAR.INTERNET.DUPLEX,
		labelCls: 'm',
		items:[
		]
	});

	function parseName(val){
		var str = "";
		var temp = "";
		var name = "";
		if(!val)
		{
			return "";
		}
		else
		{
			if(val == "auto")
			{
				return $.su.CHAR.INTERNET.AUTO_NEGOTIATION;
			}
			else
			{
				if(val.indexOf("H") > 0)
				{
					temp = val.replace("H", "_DUPLEX_HALF");
				}
				else if(val.indexOf("F") > 0)
				{
					temp = val.replace("F", "_DUPLEX_FULL");
				}
				// temp = val.replace("H", "_DUPLEX_HALF").replace("F", "_DUPLEX_FULL");
				var arr = temp.split("_");
				arr.reverse();
				name = arr.join("_");
				str = $.su.CHAR.INTERNET[name];
			}
		}
		return str;
	}

	var regionItem = [];
	$.su.post(duplexSpeedUrl,{},function(response,status,xhr){
		if(!response.data)
		{
			return false;
		}
		$(response.data.supported).each(function(index,element){
			var tempObj = {};
			tempObj["value"] = element;
			tempObj["name"] = parseName(element);
			regionItem.push(tempObj);
		});
		$("#internet_duplex").combobox("loadData",regionItem);
		$("form#internet_duplex_form").form({
			proxy: duplexProxy,
			fields: [
				{name: "speed", mapping: "speed"}
			],
			submitBtn: "default"
		});
	},"json");


////////////////////////////////////////////////////////////////
	var SYS_WIRELESS_2G_URL_NEW = $.su.url("/admin/wireless?form=syspara_2g");
	var SYS_WIRELESS_5G_URL_NEW = $.su.url("/admin/wireless?form=syspara_5g");

	var SYS_SURVEY_2G_URL_NEW = $.su.url("/admin/wireless?form=survey_2g");
	var SYS_SURVEY_5G_URL_NEW = $.su.url("/admin/wireless?form=survey_5g");
	var SYS_WIRELESS_WPS_URL_NEW = $.su.url("/admin/wireless?form=syspara_wps");

	var SYS_NAT_URL_NEW = $.su.url("/admin/nat?form=setting");
	var SYS_DOS_PROTECT_URL_NEW = $.su.url("/admin/security_settings?form=dos_setting");

	var URL_WIRELESS_2G_NEW = $.su.url("/admin/wireless?form=wireless_2g");
	var URL_WIRELESS_5G_NEW = $.su.url("/admin/wireless?form=wireless_5g");

	var SYS_DOS_PROTECT_MIN = 5;
	var SYS_DOS_PROTECT_MAX = 7200;

	var wire_channel_2g = 0;
	var wire_channel_5g = 0;

	var wireless_2g_disabled = "off";
	var wireless_2g_disabled_all = "off";

	var wireless_5g_disabled = "off";
	var wireless_5g_disabled_all = "off";

	var sys_slt_2g = 0;
	var sys_slt_5g = 0;

	var wds_2g_disable_step1 =  false;
	var wds_2g_disable_step2 =  false;
	var wds_2g_disable_step3 =  false;

	var wds_5g_disable_step1 =  false;
	var wds_5g_disable_step2 =  false;
	var wds_5g_disable_step3 =  false;

	$("span.note-title").text($.su.CHAR.OPERATION.NOTE);

	//usb interference
	var usb_reduction_tip = $("#usb_interference_reduction_tip");
	usb_reduction_tip.text($.su.CHAR.SYSPARA.USB_INTERFERENCE_REDUCTION_NOTE).parent().hide();
	if ($.su.module.support_usb_reduction) {
		usb_reduction_tip.parent().show();
	}
	$('p#reboot_tips').html($.su.CHAR.INDEX.REBOOTING);
	$('span#usb_interference_confirm_msg_text').html($.su.CHAR.LAN.REBOOT_TIP);
	
	var usbRebootConfirmMsg = $("div#usb_interference_save_confirm_qa").msg({
		type: "confirm",
		global: true,
		cls: 'reboot-confirm-size',
		closeBtn: false,
		okHandler: function(e)
		{
		
			function goToNewUrl(param)
			{
				var oriUrl = top.location.href;
				var stIindex = oriUrl.indexOf('//');

                if(-1 != oriUrl.indexOf('tplink'))
                {
                	top.location.href = top.location.href;
                }
                else
                {
					top.location.href = oriUrl.slice(0, stIindex+2) + param;
                }
			}
			
			usbRebootConfirmMsg.msg('hide');
			$("#w24g-setting").form("submit");
			usbInterferenceProMsg.msg('show');
			usbInterferencePro.progressbar("reset");
			usbInterferencePro.progressbar("animate", 0, 1, 60000);
			var o = setTimeout(function(){
					goToNewUrl("tplinkwifi.net");
				}, 60000);
			return false;
		},
		noHandler: function()
		{
			usbRebootConfirmMsg.msg('hide');
			return true;
		}
	});

	var usbInterferenceProMsg = $("div#usb_interference_pro_msg").msg({
	    type: "window",
	    global: true,
	    closeBtn: false,
		cls: 'warning reboot-confirm-size'
	   /* okHandler: function(e){
	        logoutProxy.write({}, function(){
	            location.href = "/";
	        });
		}*/
	});
	var usbInterferencePro = $("input#usb_interference_pro").progressbar({
		// cls: "connect-progressbar",
		height: 6,
		width: 326
	});
	//usb interference end
	
	$("span#note_title_2g_text").text($.su.CHAR.SYSPARA.SWITCH_NOTICE);
	$("span#note_title_5g_text").text($.su.CHAR.SYSPARA.SWITCH_NOTICE);

	$("div.func-container").page({
		title: $.su.CHAR.SYSPARA.TITLE,
		help: ""	//可能是个调用的id 也可能是个url
	});
	
	$("div#w5g").panel({
		title: $.su.CHAR.SYSPARA.W5G,
		collapsible: false
	});

	$("input#beacon_int_5g").textbox({
		fieldLabel: $.su.CHAR.SYSPARA.BEACON,
		tips:$.su.CHAR.SYSPARA.BEACONUNIT,
		inputCls:'m',
		tipsCls:'xs',
		vtype:{
				vtype:"number",
				min:40,
				max:1000
		},
		maxLength:4,
		// textFormat:$.su.format.number,
		min:40,
		max:1000,
		allowBlank:false,
		labelCls:'l'
	});   
	
	$("input#rts_5g").textbox({
		fieldLabel: $.su.CHAR.SYSPARA.RTS,
		tips:$.su.CHAR.SYSPARA.RTSUNIT,
		inputCls:'m',
		tipsCls:'xs',
		vtype:{
				vtype:"number",
				min:1,
				max:2346
		},
		maxLength:4,
		// textFormat:$.su.format.number,
		min:1,
		max:2346,
		allowBlank:false,
		labelCls:'l'
	}); 


	$("input#dtim_period_5g").textbox({
		fieldLabel: $.su.CHAR.SYSPARA.DTIM,
		tips:$.su.CHAR.SYSPARA.DTIMUNIT,
		inputCls:'m',
		tipsCls:'xs',
		vtype:{
				vtype:"number",
				min:1,
				max:15
		},
		maxLength:2,
		// textFormat:$.su.format.number,
		min:1,
		max:15,
		allowBlank:false,
		labelCls:'l'
	}); 
	
	$("input#wpa_group_rekey_5g").textbox({
		fieldLabel: $.su.CHAR.SYSPARA.GROUP,
		tips:$.su.CHAR.SYSPARA.GROUPUNIT,
		inputCls:'m',
		tipsCls:'xs',
		vtype:"number",
		// textFormat:$.su.format.number,
		allowBlank:false,
		maxLength:5,
		invalidText: $.su.CHAR.ERROR["00000039"],
		validator: function(val){
			if(val == 0)
			{
				return true;
			}

			if( (val >= 30) && (val <= 86400))
			{
				return true;
			}
			return false;
		},
		labelCls:'l'
	});

	$("input#wmm_5g").checkbox({
		fieldLabel: $.su.CHAR.SYSPARA.WMM_FEATURE,
		labelCls:'l',
		cls:"part-separate",
		items: [
			{boxlabel: $.su.CHAR.SYSPARA.WMM, uncheckedValue:"off", inputValue: "on"}
		]
	});

	$("input#shortgi_5g").checkbox({
		fieldLabel: $.su.CHAR.SYSPARA.GI_FEATURE,
		labelCls:'l',
		items: [
			{boxlabel: $.su.CHAR.SYSPARA.GI, uncheckedValue:"off", inputValue: "on"}
		]
	});

	$("input#isolate_5g").checkbox({
		fieldLabel: $.su.CHAR.SYSPARA.AP_FEATURE,
		labelCls:'l',
		items: [
			{boxlabel: $.su.CHAR.SYSPARA.AP, uncheckedValue:"off", inputValue: "on"}
		]
	});

	var ipv4Proxy = new $.su.Proxy({
		url: SYS_WIRELESS_5G_URL_NEW,
		eventId:"support_wds"
	});
	$("form#w5g-setting").form({
		proxy: ipv4Proxy,
		fields: [
			{name: "beacon_int", mapping: "beacon_int"},
			{name: "rts", mapping: "rts"},
			{name: "dtim_period", mapping: "dtim_period"},
			{name: "wpa_group_rekey", mapping: "wpa_group_rekey"},
			{name: "wmm", mapping: "wmm"},
			{name: "shortgi", mapping: "shortgi"},
			{name: "isolate", mapping: "isolate"}
		],
		submitBtn: "default"
	}).on("ev_loadData", function(e, data){
       	wdsModule.show("#w5g-wds");
		wdsModule.wds5gLoadData(data);
	});
		
	//2G
	$("div#w24g").panel({
		title: $.su.CHAR.SYSPARA.W24G,
		collapsible: false
	});

	$("input#beacon_int_2g").textbox({
		fieldLabel: $.su.CHAR.SYSPARA.BEACON,
		tips:$.su.CHAR.SYSPARA.BEACONUNIT,
		inputCls:'m',
		tipsCls:'xs',
		vtype:{
			vtype:"number",
			min:40,
			max:1000
		},
		maxLength:4,
		// textFormat:$.su.format.number,
		allowBlank:false,
		min:40,
		max:1000,
		labelCls:'l'
	});   
	
	$("input#rts_2g").textbox({
		fieldLabel: $.su.CHAR.SYSPARA.RTS,
		tips:$.su.CHAR.SYSPARA.RTSUNIT,
		inputCls:'m',
		tipsCls:'xs',
		vtype:{
			vtype:"number",
			min:1,
			max:2346
		},
		maxLength:4,
		// textFormat:$.su.format.number,
		min:1,
		max:2346,
		allowBlank:false,
		labelCls:'l'
	}); 

	$("input#dtim_period_2g").textbox({
		fieldLabel: $.su.CHAR.SYSPARA.DTIM,
		tips:$.su.CHAR.SYSPARA.DTIMUNIT,
		inputCls:'m',
		tipsCls:'xs',
		vtype:{
				vtype:"number",
				min:1,
				max:15
		},
		maxLength:2,
		// textFormat:$.su.format.number,
		min:1,
		max:15,
		allowBlank:false,
		labelCls:'l'
	}); 
	
	$("input#wpa_group_rekey_2g").textbox({
		fieldLabel: $.su.CHAR.SYSPARA.GROUP,
		tips:$.su.CHAR.SYSPARA.GROUPUNIT,
		inputCls:'m',
		tipsCls:'xs',
		vtype:"number",
		// textFormat:$.su.format.number,
		allowBlank:false,
		maxLength:5,
		invalidText: $.su.CHAR.ERROR["00000039"],
		validator: function(val){
			//console.log(val);
			if(val == 0)
			{
				return true;
			}
			if( (val >= 30) && (val <= 86400))
			{
				return true;
			}
			return false;
		},
		labelCls:'l'
	});

	$("input#wmm_2g").checkbox({
		fieldLabel: $.su.CHAR.SYSPARA.WMM_FEATURE,
		labelCls:'l',
		cls:"part-separate",
		items: [
			{boxlabel: $.su.CHAR.SYSPARA.WMM,  uncheckedValue:"off", inputValue: "on"}
		]
	});

	$("input#shortgi_2g").checkbox({
		fieldLabel: $.su.CHAR.SYSPARA.GI_FEATURE,
		labelCls:'l',
		items: [
			{boxlabel: $.su.CHAR.SYSPARA.GI, uncheckedValue:"off", inputValue: "on"}
		]
	});

	$("input#isolate_2g").checkbox({
		fieldLabel: $.su.CHAR.SYSPARA.AP_FEATURE,
		labelCls:'l',
		items: [
			{boxlabel: $.su.CHAR.SYSPARA.AP, uncheckedValue:"off", inputValue: "on"}
		]
	});

	var usb_reduction_checkbox = $("input#usb_interference_reduction_2g").checkbox({
		fieldLabel: $.su.CHAR.SYSPARA.USB_INTERFERENCE_REDUCTION,
		labelCls:'l',
		items: [
			{boxlabel: $.su.CHAR.SYSPARA.ENABLE_USB_INTERFERENCE_REDUCTION, uncheckedValue:"off", inputValue: "on"}
		]
	}).checkbox("hide");
	if ($.su.module.support_usb_reduction) {
		usb_reduction_checkbox.checkbox("show");
	}
	var ipv4Proxy = new $.su.Proxy({
		url: SYS_WIRELESS_2G_URL_NEW
	});
	$("form#w24g-setting").form({
		proxy: ipv4Proxy,
		fields: [
			{name: "beacon_int", mapping: "beacon_int"},
			{name: "rts", mapping: "rts"},
			{name: "dtim_period", mapping: "dtim_period"},
			{name: "wpa_group_rekey", mapping: "wpa_group_rekey"},
			{name: "wmm", mapping: "wmm"},
			{name: "shortgi", mapping: "shortgi"},
			{name: "isolate", mapping: "isolate"},
                        {name: "usb_interference_reduction", mapping: "usb_interference_reduction"}
		],
		submitBtn: "#w24g_save_btn"
	}).on("ev_loadData", function(e, data){
        wdsModule.show("#w24g-wds");
		if( (data.extinfo.support_band == "2G") || (data.extinfo.support_band == "none"))
		{
			$("div#w5g").panel("hide");
			wdsModule.hide("div#w5g-wds");
		}
		else
		{
			$("div#w5g").panel("show");
			wdsModule.show("div#w5g-wds");
		}
		wdsModule.wds2gLoadData(data);
	});

	if(!$.su.module.wmm_edit_support){
		$("input#wmm_2g").checkbox("setValue", "on");
		$("input#wmm_5g").checkbox("setValue", "on");
		$("input#wmm_2g").checkbox("disable");
		$("input#wmm_5g").checkbox("disable");
	}

	$("button#w24g_save_btn").button({
		text:$.su.CHAR.OPERATION.SAVE,
		cls: "submit",
		handler:function(){
				$("#w24g-setting").form("submit");
			}
	});
	
	$("div#wps").panel({
		title: $.su.CHAR.SYSPARA.WPS,
		collapsible: false
	});

	$("input#wps_status").checkbox({
		fieldLabel: $.su.CHAR.SYSPARA.WPS,
		labelCls:'l',
		items: [
			{boxlabel: $.su.CHAR.SYSPARA.ENABLE_WPS,  uncheckedValue:"off", inputValue: "on"}
		]
	});

	$("form#wps-setting").form({
		proxy: {
			url: SYS_WIRELESS_WPS_URL_NEW
		},
		fields: [
			{name: "wps", mapping: "wps"}
		],
		submitBtn: "default"
	});

	$("div#nat").panel({
		title: $.su.CHAR.SYSPARA.NAT,
		collapsible: false
	});

	$("input#nat_enable").checkbox({
		fieldLabel: $.su.CHAR.SYSPARA.NAT,
		labelCls:'l',
		items: [
			{boxlabel: $.su.CHAR.SYSPARA.ENABLE_NAT,  uncheckedValue:"off", inputValue: "on"}
		]
	});
	boostModule.init();

	$("input#nat_save_btn").button({
		text:$.su.CHAR.OPERATION.SAVE,
		handler:function(){
			boostModule.saveBtn();
		},
		cls:"submit submitBtn"
	});

	var formFields = [
		{name: "enable", mapping: "enable"}
	];
	formFields = boostModule.extendField(formFields);
	$("form#nat-setting").form({
		proxy: {
			url: SYS_NAT_URL_NEW,
			eventId:"boost"
		},
		fields: formFields,
		submitBtn: "#nat_save_btn"
	}).on("ev_loadData", function(e,data){
		boostModule.loadData(data);
	});

	$("div#level").panel({
		title: $.su.CHAR.SYSPARA.DOS_PROTECTION,
		collapsible: false
	});

	$("#syspara_level_icmp").html($.su.CHAR.SYSPARA.ICMP);
	$("#icmp_low").textbox({
		fieldLabel: $.su.CHAR.SYSPARA.LOW,
		tips:$.su.CHAR.SYSPARA.UNIT,
		tipsCls:"m",
		vtype:"number",
		maxLength:4,
		allowBlank:false,
		validator:function(val){
			if((val >= SYS_DOS_PROTECT_MIN) && (val <= SYS_DOS_PROTECT_MAX))
			{
				return true;
			}
			else
			{
				return $.su.CHAR.ERROR["00000034"];
			}
		},
		inputCls:"s",
		labelCls:"xxs"
	});

	$("#icmp_middle").textbox({
		fieldLabel: $.su.CHAR.SYSPARA.MIDDLE,
		tips:$.su.CHAR.SYSPARA.UNIT,
		inputCls:"s",
		vtype:"number",
		maxLength:4,
		allowBlank:false,
		validator:function(val){
			if((val >= SYS_DOS_PROTECT_MIN) && (val <= SYS_DOS_PROTECT_MAX))
			{
				return true;
			}
			else
			{
				return $.su.CHAR.ERROR["00000034"];
			}
		},
		labelCls:"xxs"
	});

	$("#icmp_high").textbox({
		fieldLabel: $.su.CHAR.SYSPARA.HIGH,
		tips:$.su.CHAR.SYSPARA.UNIT,
		inputCls:"s",
		vtype:"number",
		maxLength:4,
		allowBlank:false,
		validator:function(val){
			if((val >= SYS_DOS_PROTECT_MIN) && (val <= SYS_DOS_PROTECT_MAX))
			{
				return true;
			}
			else
			{
				return $.su.CHAR.ERROR["00000034"];
			}
		},
		labelCls:"xxs"
	});

	$("#syspara_level_udp").html($.su.CHAR.SYSPARA.UDP);
	$("#udp_low").textbox({
		fieldLabel: $.su.CHAR.SYSPARA.LOW,
		tips:$.su.CHAR.SYSPARA.UNIT,
		inputCls:"s",
		vtype:"number",
		maxLength:4,
		allowBlank:false,
		validator:function(val){
			if((val >= SYS_DOS_PROTECT_MIN) && (val <= SYS_DOS_PROTECT_MAX))
			{
				return true;
			}
			else
			{
				return $.su.CHAR.ERROR["00000034"];
			}
		},
		labelCls:"xxs"
	});

	$("#udp_middle").textbox({
		fieldLabel: $.su.CHAR.SYSPARA.MIDDLE,
		tips:$.su.CHAR.SYSPARA.UNIT,
		inputCls:"s",
		vtype:"number",
		maxLength:4,
		allowBlank:false,
		validator:function(val){
			if((val >= SYS_DOS_PROTECT_MIN) && (val <= SYS_DOS_PROTECT_MAX))
			{
				return true;
			}
			else
			{
				return $.su.CHAR.ERROR["00000034"];
			}
		},
		labelCls:"xxs"
	});

	$("#udp_high").textbox({
		fieldLabel: $.su.CHAR.SYSPARA.HIGH,
		tips:$.su.CHAR.SYSPARA.UNIT,
		inputCls:"s",
		vtype:"number",
		maxLength:4,
		allowBlank:false,
		validator:function(val){
			if((val >= SYS_DOS_PROTECT_MIN) && (val <= SYS_DOS_PROTECT_MAX))
			{
				return true;
			}
			else
			{
				return $.su.CHAR.ERROR["00000034"];
			}
		},
		labelCls:"xxs"
	});

	$("#syspara_level_tcp").html($.su.CHAR.SYSPARA.TCP);
	$("#tcp_low").textbox({
		fieldLabel: $.su.CHAR.SYSPARA.LOW,
		tips:$.su.CHAR.SYSPARA.UNIT,
		inputCls:"s",
		vtype:"number",
		maxLength:4,
		allowBlank:false,
		validator:function(val){
			if((val >= SYS_DOS_PROTECT_MIN) && (val <= SYS_DOS_PROTECT_MAX))
			{
				return true;
			}
			else
			{
				return $.su.CHAR.ERROR["00000034"];
			}
		},
		labelCls:"xxs"
	});

	$("#tcp_middle").textbox({
		fieldLabel: $.su.CHAR.SYSPARA.MIDDLE,
		tips:$.su.CHAR.SYSPARA.UNIT,
		inputCls:"s",
		vtype:"number",
		maxLength:4,
		allowBlank:false,
		validator:function(val){
			if((val >= SYS_DOS_PROTECT_MIN) && (val <= SYS_DOS_PROTECT_MAX))
			{
				return true;
			}
			else
			{
				return $.su.CHAR.ERROR["00000034"];
			}
		},
		labelCls:"xxs"
	});

	$("#tcp_high").textbox({
		fieldLabel: $.su.CHAR.SYSPARA.HIGH,
		tips:$.su.CHAR.SYSPARA.UNIT,
		inputCls:"s",
		vtype:"number",
		maxLength:4,
		allowBlank:false,
		validator:function(val){
			if((val >= SYS_DOS_PROTECT_MIN) && (val <= SYS_DOS_PROTECT_MAX))
			{
				return true;
			}
			else
			{
				return $.su.CHAR.ERROR["00000034"];
			}
		},
		labelCls:"xxs"
	});

	$("form#level-setting").form({
		proxy: {
			url: SYS_DOS_PROTECT_URL_NEW
		},
		fields: [
			{name: "icmp_low", mapping: "icmp_low"},
			{name: "icmp_middle", mapping: "icmp_middle"},
			{name: "icmp_high", mapping: "icmp_high"},
			{name: "udp_low", mapping: "udp_low"},
			{name: "udp_middle", mapping: "udp_middle"},
			{name: "udp_high", mapping: "udp_high"},
			{name: "syn_low", mapping: "syn_low"},
			{name: "syn_middle", mapping: "syn_middle"},
			{name: "syn_high", mapping: "syn_high"}
		],
		validator:function(){
			var icmp_low_val = parseInt($("#icmp_low").textbox("getValue"),10);
			var icmp_middle_val = parseInt($("#icmp_middle").textbox("getValue"),10);
			var icmp_high_val = parseInt($("#icmp_high").textbox("getValue"),10);
			if(icmp_low_val < icmp_middle_val)
			{
				$("#icmp_middle").textbox("setError",$.su.CHAR.ERROR["00000032"]);
				return false;
			}
			if(icmp_middle_val < icmp_high_val)
			{
				$("#icmp_high").textbox("setError",$.su.CHAR.ERROR["00000033"]);
				return false;
			}

			var udp_low_val =  parseInt($("#udp_low").textbox("getValue"),10);
			var udp_middle_val =  parseInt($("#udp_middle").textbox("getValue"),10);
			var udp_high_val =  parseInt($("#udp_high").textbox("getValue"),10);
			if(udp_low_val < udp_middle_val)
			{
				$("#udp_middle").textbox("setError",$.su.CHAR.ERROR["00000032"]);
				return false;
			}
			if(udp_middle_val < udp_high_val)
			{
				$("#udp_high").textbox("setError",$.su.CHAR.ERROR["00000033"]);
				return false;
			}

			var tcp_low_val =  parseInt($("#tcp_low").textbox("getValue"),10);
			var tcp_middle_val =  parseInt($("#tcp_middle").textbox("getValue"),10);
			var tcp_high_val =  parseInt($("#tcp_high").textbox("getValue"),10);
			if(tcp_low_val < tcp_middle_val)
			{
				$("#tcp_middle").textbox("setError",$.su.CHAR.ERROR["00000032"]);
				return false;
			}
			if(tcp_middle_val < tcp_high_val)
			{
				$("#tcp_high").textbox("setError",$.su.CHAR.ERROR["00000033"]);
				return false;
			}
			return true;
		},
		autoLoad:true,
		submitBtn: "default"
	});

	$("div#survey").msg({
		autoshow:false,
		title:$.su.CHAR.SYSPARA.SURVEY,
		cls:"xxl",
		type: "window"
	});

	var survey_store_2g = new $.su.Store({
		proxy: {
			url: SYS_SURVEY_2G_URL_NEW,
			timeout:30000
		},
		fields: [
			{name: "bssid"},
			{name: "ssid"},
			{name: "signal"},
			{name: "channel"},
			{name: "encryption"}
		],
		autoLoad: false
	});


	var survey_store_5g = new $.su.Store({
		proxy: {
			url: SYS_SURVEY_5G_URL_NEW,
			timeout:30000
		},
		fields: [
			{name: "bssid"},
			{name: "ssid"},
			{name: "signal"},
			{name: "channel"},
			{name: "encryption"}
		],
		autoLoad: false
	});

	grid_suvery_2g = $("div#result_2g").grid({
		store:survey_store_2g,
		minLines:0,
		maxLines:5,
		columns: [
			{
				text: $.su.CHAR.GRID.ID, 
				xtype: "rownumberer",
				width:40
			},
			
			{
				text: $.su.CHAR.SYSPARA.SSID, 
				width:130,
				dataIndex: "ssid"
			},
			{
				text: $.su.CHAR.SYSPARA.MAC_ADDRESS, 
				width:140,
				dataIndex: "bssid"
			},
			{
				text: $.su.CHAR.SYSPARA.SIGNAL, 
				width:100,
				dataIndex: "signal",
				renderer: function (data){
					var realSig = parseInt(data);
					return "<span class=\"signal-icon signal-level-" + signal_level(realSig) + "\">" + "</span>" ;
				}
			},
			{
				text: $.su.CHAR.SYSPARA.CHANNEL, 
				width:100,
				dataIndex: "channel"
			},
			{
				text: $.su.CHAR.SYSPARA.SECURITY, 
				width:100,
				dataIndex: "encryption",
				renderer:function(val)
				{
					if( val.toUpperCase()=='NONE' ){
						return $.su.CHAR.SYSPARA.NONE;
					}else{
						return $.su.func.escapeHtml(val.toUpperCase());
					}
				}
			},
			{
				text: $.su.CHAR.GRID.OPERATION, 
				renderer:function(e, index, obj){
					return "<a href=\"void(0);\" index=\""+index+"\" class=\"choose\" >"+$.su.CHAR.OPERATION.CHOOSE+"</a>"
				}
			}		
		],
		operation: [{
			xtype: "totalCount",
			cls:"left",
			fieldLabel: $.su.CHAR.SYSPARA.AP_NUMBER
		},
		{
			xtype: "button", 
			text: $.su.CHAR.OPERATION.REFRESH,
			id:"refreshBtn_2g",
			iconCls:"btn-refresh",
			handler:function(e){
				e.stopPropagation();
				e.preventDefault();
				$("#refreshBtn_2g").button("disable");
				grid_suvery_2g.grid("runProgress");
				grid_suvery_2g.grid("getStore").load({}, function(){
					grid_suvery_2g.grid("prompt", true);
					$("#refreshBtn_2g").button("enable");
				}, function(){
					grid_suvery_2g.grid("prompt", false);
					$("#refreshBtn_2g").button("enable");
				}, function(){
					grid_suvery_2g.grid("prompt", false);
					enableButton();
				});
				return true;
			}
		}]
	}).on("ev_load", function(e, arr){
		var me = $(this);
		$(arr).each(function(index,data){
			var encryption = data.encryption.toUpperCase();
			if( encryption != "NONE" &&  encryption != "WEP" &&  encryption != "PSK")
			{
				me.grid("disableRow", index);
			}
		})
		
	});

	$("div#result_2g").delegate("a.choose","click",function(e){
		var store = $("div#result_2g").grid("getStore");
		var index = $(this).attr("index");
		e.preventDefault();
		var tr = $(this).parents("tr.grid-content-tr")[0];
		var bssid = store.data[index].bssid;
		var ssid = store.data[index].ssid;
		var channel = store.data[index].channel;
		sys_slt_2g = channel;
		var encryption = store.data[index].encryption;
		if( encryption != "none" &&  encryption != "wep" &&  encryption != "psk")
		{
			return;
		}
		$("input#ssid_2g").textbox("setValue", ssid);
		$("input#bssid_2g").textbox("setValue", bssid);
		$("input#channel_2g").textbox("setValue", channel);
		$("#encryption_2g").radio("setValue", encryption);
		$("div#survey").msg("close");
	});

	wdsModule.init(survey_store_2g,survey_store_5g);
	
	tribandModule.init();

	var grid_suvery_5g = $("div#result_5g").grid({
		store:survey_store_5g,
		minLines:0,
		maxLines:5,
		columns: [
			{
				text: $.su.CHAR.GRID.ID, 
				xtype: "rownumberer",
				width:40
			},
			{
				text: $.su.CHAR.SYSPARA.SSID, 
				width:130,
				dataIndex: "ssid"
			},
			{
				text: $.su.CHAR.SYSPARA.MAC_ADDRESS, 
				width:140,
				dataIndex: "bssid"
			},
			{
				text: $.su.CHAR.SYSPARA.SIGNAL, 
				width:100,
				dataIndex: "signal",
				renderer: function (data){
					var realSig = parseInt(data);
					return "<span class=\"signal-icon signal-level-" + signal_level(realSig) + "\">" + "</span>" ;
				}
			},
			{
				text: $.su.CHAR.SYSPARA.CHANNEL, 
				width:100,
				dataIndex: "channel"
			},
			{
				text: $.su.CHAR.SYSPARA.SECURITY, 
				width:100,
				dataIndex: "encryption",
				renderer:function(val)
				{
					if( val.toUpperCase()=='NONE' ){
						return $.su.CHAR.SYSPARA.NONE;
					}else{
						return $.su.func.escapeHtml(val.toUpperCase());
					}
				}
			},
			{
				text: $.su.CHAR.GRID.OPERATION, 
				// width:100,
				renderer:function(e, index, obj){
					return "<a href=\"void(0);\" index=\""+index+"\" class=\"choose\" >"+$.su.CHAR.OPERATION.CHOOSE+"</a>"
				}
			}
		],
		operation: [{
			xtype: "totalCount",
			cls:"left",
			fieldLabel: $.su.CHAR.SYSPARA.AP_NUMBER
		},{
			xtype: "button", 
			text: $.su.CHAR.OPERATION.REFRESH,
			id:"refreshBtn_5g",
			iconCls:"btn-refresh",
			handler:function(e){
				e.stopPropagation();
				e.preventDefault();
				$("#refreshBtn_5g").button("disable");
				grid_suvery_5g.grid("runProgress");
				grid_suvery_5g.grid("getStore").load({}, function(){
					grid_suvery_5g.grid("prompt", true);
					$("#refreshBtn_5g").button("enable");
				}, function(){
					grid_suvery_5g.grid("prompt", false);
					$("#refreshBtn_5g").button("enable");
				}, function(){
					grid_suvery_5g.grid("prompt", false);
					$("#refreshBtn_5g").button("enable");
				});
				return true;
			}
		}]
		}).on("ev_load", function(e, arr){
			var me = $(this);
			$(arr).each(function(index,data){
				var encryption = data.encryption.toUpperCase();
				if( encryption != "NONE" &&  encryption != "WEP" &&  encryption != "PSK"){
					me.grid("disableRow", index);
				}
			})
			
		});

	$("div#result_5g").delegate("a.choose","click",function(e){
		var store = $("div#result_5g").grid("getStore");
		var index = $(this).attr("index");
		e.preventDefault();
		var tr = $(this).parents("tr.grid-content-tr")[0];
		var bssid = store.data[index].bssid;
		var ssid = store.data[index].ssid;
		var channel = store.data[index].channel;
		sys_slt_5g = channel;
		var encryption = store.data[index].encryption;
		if( encryption != "none" &&  encryption != "wep" &&  encryption != "psk"){
			return;
		}
        
		$("input#ssid_5g").textbox("setValue", ssid);
		$("input#bssid_5g").textbox("setValue", bssid);
		$("input#channel_5g").textbox("setValue", channel);
		$("#encryption_5g").radio("setValue", encryption);
		$("div#survey").msg("close");
	});

	$("#notice_2g").msg({
		autoshow:false,
		// title:$.su.CHAR.SYSPARA.SURVEY,
		cls:"xl",
		okHandler:function(){
			$("#w24g-setting").form("submit");
		},
		cls:"m warning",
		cancelHandler:function(){
			return true;
		},
		type: "prompt"
		// type: "confirm"
	});

	$("#notice_content_2g").html($.su.CHAR.SYSPARA.NOTICE);
	$("#notice_content_5g").html($.su.CHAR.SYSPARA.NOTICE);

	$("#notice_5g").msg({
		autoshow:false,
		// title:$.su.CHAR.SYSPARA.SURVEY,
		cls:"xl",
		okHandler:function(){
			$("#w5g-setting").form("submit");
		},
		cls:"m warning",
		cancelHandler:function(){
			return true;
		},
		type: "prompt"
	});

	var wireless_2g_proxy = new $.su.Proxy({
			url: URL_WIRELESS_2G_NEW,
			eventId:"wireless_2g"
	});

	wireless_2g_proxy.read({}, function(data){	
		if(typeof data == "undefined"){
			return;
		}
		wire_channel_2g = data.channel;
		wireless_2g_disabled = data.disabled;
		wireless_2g_disabled_all = data.disabled_all;

		$("input#shortgi_2g").checkbox('enable');
		if(data.hwmode == 'b' || data.hwmode == 'g' || data.hwmode == 'bg'){
			$("input#shortgi_2g").checkbox('disable');
		}
		$("div#feature2g_container").show();
		wdsModule.wds2gProxyRead(guest2gProxy,data,wireless_2g_disabled,wireless_2g_disabled_all);
	});

	var wireless_5g_proxy = new $.su.Proxy({
			url: URL_WIRELESS_5G_NEW,
			eventId:"wireless_5g"
	});
	wireless_5g_proxy.read({}, function(data){
		if(typeof data == "undefined"){
			return;
		}
		wire_channel_5g = data.channel;
		wireless_5g_disabled = data.disabled;
		wireless_5g_disabled_all = data.disabled_all;

		$("input#shortgi_5g").checkbox('enable');
		if(data.hwmode == 'a_5'){
			$("input#shortgi_5g").checkbox('disable');
		}
		$("div#feature5g_container").show();
		wdsModule.wds5gProxyRead(guest5gProxy,data,wireless_5g_disabled,wireless_5g_disabled_all);	
	});

	tribandModule.wireless52gProxy();

/////////////////
	var toggleUsbHelp = (function(visible){
		return function(){
			if(!visible){
				$("div.help-content div.name-container:nth-child(10)").hide();
			}
		}
	}($.su.module.support_usb_reduction));
	var content = ["SYSTEM_PARA_WIRELESS", "SYSTEM_PARA_WPS", "SYSTEM_PARA_NAT", "SYSTEM_PARA_DOS", "SYSTEM_PARA_DUPLEX"];
		content = wdsModule.addHelpContent(content);
		$(window).one("helpLoad", function(){
			var helpSystemPara = new $.su.Help({
				container: "div#help_system_para",
				content: content,
				afterLoad:function(){
					var select = $("div#help_system_para").find("h4.title");
					for(var i=0; i < this.content.length; ++i){
						$(select[i]).addClass(this.content[i]);
					}
					toggleUsbHelp();
					boostModule.helpInit();			
					tribandModule.helpInit();
				}
			});
			$.su.layout.doLayout();
			$.su.app.runningModule.deleteWaitingEvent("helpLoad");
		});
	});
</script>
</body>

</html>
